"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7170],{14436:(e,n,t)=>{t.r(n),t.d(n,{HomeAdsFetcher:()=>w,default:()=>y});t(60850),t(69645),t(49932),t(36490),t(4207);var i=t(30758),r=t(35786),u=t(31167),o=t(26017),s=(t(79443),t(45404)),l=t(73576),f=t(23801),d=18e5;var c=1,a=.5,v={threshold:[0,a,c]};var b=t(86070),h=(0,i.lazy)((function(){return Promise.all([t.e(4151),t.e(251),t.e(7599)]).then(t.bind(t,36077))})),m=(0,i.lazy)((function(){return Promise.all([t.e(4151),t.e(599)]).then(t.bind(t,33339))})),A=(0,i.lazy)((function(){return t.e(6665).then(t.bind(t,8887))}));function w(){var e,n=(0,r.bT)(),t=n.fetchAndSetHomeAd,w=n.setHomeAd,y=n.homeAd,E=(0,u.y)(),S=E.homeAdElement,_=E.setHomeAdElement,p=y&&"then"in y,k=function(e){var n=e.target,t=(0,i.useState)("visible_unknown"),r=(0,o.A)(t,2),u=r[0],s=r[1];return(0,i.useEffect)((function(){if(n){var e=new IntersectionObserver((function(e){var n=(0,o.A)(e,1)[0].intersectionRatio;return s((function(){return n>=c?"visible_100":n>=a?"visible_50":n<a?"visible_0":"visible_unknown"}))}),v);return e.observe(n),function(){return e.disconnect()}}s("visible_unknown")}),[n]),{visibilityState:u}}({target:null!=S?S:void 0}),H=k.visibilityState;if((0,i.useEffect)((function(){return null==t||t(),function(){return w(void 0)}}),[t,w]),function(e){var n=e.visibilityState,t=e.homeAdIsCurrentlyBeingFetched,u=(0,r.bT)().fetchAndSetHomeAd,c=(0,l.n)(),a=(0,f.$)(),v=(0,i.useState)(),b=(0,o.A)(v,2),h=b[0],m=b[1],A=(0,s.A)((function(){return!t&&(null==u?void 0:u())}));(0,i.useEffect)((function(){c&&a&&("visible_50"===n||"visible_100"===n)&&h&&Date.now()-h>=d&&A()}),[c,h,a,n,A]),(0,i.useEffect)((function(){t||m(Date.now())}),[t,m])}({visibilityState:H,homeAdIsCurrentlyBeingFetched:p}),!y||p)return null;var g="text/html"===(null===(e=y.display[0])||void 0===e?void 0:e.mimeType);return(0,b.jsx)(i.Suspense,{children:g?(0,b.jsx)(h,{homeAd:y,ref:_}):(0,b.jsx)(A,{homeAd:y,visibilityState:H,children:(0,b.jsx)(m,{homeAd:y,ref:_})})})}const y=w},31167:(e,n,t)=>{t.d(n,{H:()=>o,y:()=>u});var i=t(26017),r=t(30758);function u(){var e=(0,r.useState)(null),n=(0,i.A)(e,2);return{homeAdElement:n[0],setHomeAdElement:n[1]}}var o=r.forwardRef},23801:(e,n,t)=>{t.d(n,{$:()=>u});var i=t(26017),r=t(30758),u=function(){var e=(0,r.useState)(document.hasFocus()),n=(0,i.A)(e,2),t=n[0],u=n[1];return(0,r.useEffect)((function(){function e(){u(!0)}function n(){u(!1)}return window.addEventListener("focus",e),window.addEventListener("blur",n),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",n)}}),[]),t}}}]);
//# sourceMappingURL=home-ads-fetcher.js.map