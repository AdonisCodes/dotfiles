"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3667],{6031:(e,i,t)=>{t.r(i),t.d(i,{PiPMiniPlayer:()=>ui});var n=t(44073),l=t(81226),r=t(26017),a=(t(177),t(30758)),o=t(97500),c=t.n(o),s=t(15527),u=t(1409),d=t(260),m=t(59081),v=t(82147);const f="wF7I8x6BNoB5TCxuQM6p",h="mTVLkxm92ETj9KUKj6We",p="_ZzrZWfp7kDAE2lh9_Wc",g="Z7EJBI5IBlrJ1ze7IeeW",k="v5BmE36Bbgt7MSjmR6Xc",x="CAQW4b5xnSED1cuM6jcp",C="cRGZivJEkNn8_Q7kaHpT",b="jOhwShRZLQkG51TckxOL",j="RqE15DUByK94UTAHnMWF",y="AfV1a_jkmN7Ep4mov4u7",S="QrDtnomlujlNGYbhYEFQ",N="Jgem6BNDvKfWTBl3cX4W",w="ePoosDhdXDFF4p3vqKLd",B="QGE_nRKg4bMbNKF_e7PM",E="ddMrU_P5vADrfZCD5KQP",L="x591ODwZ11KBAWKS6SiE",M="yyE7Kg8ClZLrYU03bSoA",T="GJYNq4mAAnZScLzJPrZb",P="Q4qOSqJZ_dfNRxOBhsGE",R="hix4I_WU5iQPehn_m5h2",A="gOpH1qSy5WZp_dGqBjSO";var I="transparent",D=t(68577),F=t(19919),_=t(82122),U=t(694),V=t(7736),z=t(44755),W=t(87703),O=t(15993),K=t(1770),Z=t(7104),Q=t(2965),H=t(60034),J=t(9856),q=t.n(J),Y=function(){return!0===q().getParser(window.navigator.userAgent).satisfies({chrome:">=123"})},G=function(){Y()&&window.focus()},X="document-pip-hover-element",$="document-pip-cover-art",ee="document-pip-cover-art-placeholder",ie=t(86070);var te=function(e){var i=e.item,t=e.imageUrl,n=(0,K.iz)(i),l=(0,ie.jsx)(U._,{className:L,src:t,loading:"eager",testid:$,children:(0,ie.jsx)("div",{className:M,children:(0,ie.jsx)(_.s,{size:"xlarge",type:i.type,"data-testid":ee})})});return n.url?(0,ie.jsx)(Z.default,{className:E,to:n.url,children:l}):l},ne=function(){var e,i=null!==(e=(0,v.L)())&&void 0!==e?e:{},t=i.item,n=i.context,r=(0,a.useMemo)((function(){var e;return(0,O.h)(null!==(e=null==t?void 0:t.images)&&void 0!==e?e:void 0,{desiredSize:640})}),[null==t?void 0:t.images,640]),o=(0,z.l)(),s=(0,u.NC)(F.a4n),d=(0,H.CV)().isYourDJNarrator,m=(0,a.useRef)(null),f=(0,a.useCallback)((function(){var e;if(m.current){var i=null===(e=m.current)||void 0===e?void 0:e.children[0];if(i){var t=m.current,n=t.offsetWidth,l=t.offsetHeight,r=Math.min(n,l);r=Math.min(r,640),1===(0,D.D)(i,"--extra-padding",0,"")&&(r-=Math.max(Math.min(.1*r,64),12)),i.width=i.height=r}}}),[]),h=(0,V.ox)();(0,a.useEffect)((function(){return null==h||h.addEventListener("resize",f),function(){null==h||h.removeEventListener("resize",f)}}),[f,h]);var p=t&&function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(t),g=(0,W.N)(t),k=!p;!p||!o&&s||(k=!0);var x,C=(0,a.useMemo)((function(){return k&&!g&&Y()}),[g,k]);x=d?(0,ie.jsx)(Q.aU,{}):g?(0,ie.jsx)(te,{item:t,imageUrl:r}):(0,ie.jsx)(U._,{className:L,src:r,loading:"eager",testid:$,children:(0,ie.jsx)("div",{className:M,children:(0,ie.jsx)(_.s,{size:"xlarge",type:null==t?void 0:t.type,"data-testid":ee})})});var b=(0,a.useCallback)((function(){C&&G()}),[C]),j=(0,a.useCallback)((function(e){"Enter"===e.key&&b()}),[b]);return t&&n&&k?(0,ie.jsx)("div",{className:c()(w,(0,l.A)({},B,C)),ref:function(e){m.current=e,f()},role:"button",tabIndex:C?0:-1,onClick:b,onKeyDown:j,children:x}):null},le=(t(28649),t(1581),t(60830)),re=t(22865),ae=t(82035),oe=t(13343),ce=t(11379),se=t(45820);function ue(e){return e?{width:e.innerWidth,height:e.innerHeight}:null}var de=t(84747),me=(t(83892),t(54925)),ve=t(23041),fe=t(47346),he=t(81160),pe=t(50789),ge=t(3328),ke=t(24240);const xe="yb0n1ZOvcsGEP6MtzpHw",Ce="srBfv7LB0I9QnzxBpeTV",be="NZlJ5gYuUaWvALQ2gGfg",je="CsqhW5xDG4TO3VV20IZJ";var ye=function(e){var i=e.item,t=e.onClick,n=e.className,l=(0,ve.XX)(i),r=(0,W.N)(i)?null==l?void 0:l.title:i.name,a=(0,W.N)(i)?null==l?void 0:l.subtitle:i.name,o=(0,ke.K)(),s=function(e){switch(e){case"SMALL":return{title:"bodySmall",subtitle:"marginal"};case"MEDIUM":return{title:"bodyMedium",subtitle:"bodySmall"};default:return{title:"titleSmall",subtitle:"bodySmall"}}}(o.vertical);return(0,ie.jsxs)("div",{className:c()(xe,n),children:[(0,ie.jsx)("div",{className:Ce,children:(0,ie.jsx)(pe.r,{title:r,children:(0,ie.jsx)(me.E,{"data-testid":"context-item-info-title",as:"div",variant:s.title,className:Ce,dir:"auto",children:(0,ie.jsx)(he.R,{item:i,onClick:t,adUrl:null==l?void 0:l.url,children:r})})},i.uri)}),(0,ie.jsx)(ge.l,{className:je,item:i,size:"DEFAULT"===o.vertical?"small":"xsmall",variant:"DEFAULT"===o.vertical?"bodySmall":"marginal",enableVideoButton:!0}),(0,ie.jsx)("div",{className:be,children:(0,ie.jsx)(pe.r,{title:a,children:(0,ie.jsx)(me.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:s.subtitle,className:be,semanticColor:"textSubdued",children:(0,ie.jsx)(fe.n,{item:i,onClick:t})})},i.uri)})]})},Se=t(32303),Ne=t(28811),we=t(98359),Be=t(17175),Ee=t(13202);const Le="U7qJ1UbUI0C76xXqYVQY",Me="wSLUJtAztEeB6cSHzEjf",Te="ivh1pWB_obHbkRTZRwlA",Pe="CppZQsRDE7tQVl_Uo22Y";var Re={title:"bodyMediumBold",subtitle:"bodySmall"},Ae={title:"titleSmall",subtitle:"bodyMedium"},Ie=a.memo((function(){var e=(0,we.L)().openURLWithSessionTransfer,i="SMALL"===(0,ke.K)().vertical?Re:Ae,t=(0,u.NC)(Be.rW),n=(0,Ee.D)("loggedin_upgrade_button"),l=(0,a.useCallback)((function(){e(n(Ne.M0),"_blank")}),[n,e]);return(0,ie.jsx)("div",{className:Le,children:(0,ie.jsxs)("div",{className:c()({"circular-sp-vietnamese":t},Me),children:[(0,ie.jsx)(me.E,{variant:i.title,dir:"auto",className:Te,children:m.Ru.get("web-player.pip-mini-player.upsell.title")}),(0,ie.jsx)(me.E,{variant:i.subtitle,semanticColor:"textSubdued",children:m.Ru.get("web-player.pip-mini-player.upsell.subtitle")}),(0,ie.jsx)("div",{className:Pe,children:(0,ie.jsx)(Se.$,{onClick:l,size:"small",children:m.Ru.get("web-player.pip-mini-player.upsell.cta-button")})})]})})})),De=t(11386),Fe=t(74940),_e=t(88728),Ue=t(91837),Ve=t(21726),ze=t(67157),We=function(){return(0,ie.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:k,children:(0,ie.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})})},Oe=a.memo((function(){return"SMALL"!==(0,ke.K)().vertical?(0,ie.jsx)(De.U,{}):(0,ie.jsx)(Fe.M,{})})),Ke=function(e){var i=e.className,t=(0,oe.d)().setVideoPlayerUIFlag,n=(0,ze.D)({}).onClick,l=(0,a.useCallback)((function(){t(ce.n.documentPip,!1),n()}),[t,n]),r=(0,Ue.mv)();return(0,ie.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:c()(i,p),children:[(0,ie.jsx)("button",{className:g,onClick:l,children:r.operatingSystem===Ve.f.macOS?(0,ie.jsx)(We,{}):(0,ie.jsx)(_e.M,{size:"xsmall",className:k})}),(0,ie.jsx)(Oe,{}),(0,ie.jsx)("div",{className:x})]})},Ze=t(41118),Qe=t(78370),He=t(65581),Je=t(84101),qe=t(50627),Ye=t(28172),Ge=t(16026),Xe=t(19085),$e=t(64805),ei=t(76236),ii=t(38675),ti=t(59950),ni=t(41485);function li(e){var i,t,n;return{itemToBeSkipped:(null===(i=e.item)||void 0===i?void 0:i.uri)||"",positionMs:null!==(t=(0,ti.s)(e))&&void 0!==t?t:-1,totalContentMs:null!==(n=e.duration)&&void 0!==n?n:-1}}function ri(e){return Math.floor(100*e)}const ai="Y1sIRIE9_S2jPP9L89qs",oi="lcyebQsHz0j8IkDXTAlB",ci="enGtDaA6WTTvIFhZz1wz";var si=a.memo((function(e){var i=e.item,t=e.spec,n=e.logger,l=i.uri,r=function(e){var i=e.uri,t=e.spec,n=e.logger,l=(0,a.useRef)(i);l.current=i;var r=(0,ei.K)(),o=(0,a.useMemo)((function(){return t.playerControlsFactory()}),[t]),c=(0,a.useCallback)((function(e){var i=null;l.current&&("pause"===e?i=o.playPauseButtonFactory().hitPause({itemToBePaused:l.current}):"resume"===e&&(i=o.playPauseButtonFactory().hitResume({itemToBeResumed:l.current})),i&&n.logInteraction(i))}),[n,o]),s=(0,a.useCallback)((function(e){if(l.current){var i=o.likeButtonFactory(),t=e?i.hitLike({itemToBeLiked:l.current}):i.hitRemoveLike({itemNoLongerLiked:l.current});n.logInteraction(t)}}),[n,o]),u=(0,a.useCallback)((function(){var e=r.getState();if(e){var i=o.previousButtonFactory().hitSkipToPrevious(li(e));n.logInteraction(i)}}),[n,r,o]),d=(0,a.useCallback)((function(){var e=r.getState();if(e){var i=o.nextButtonFactory().hitSkipToNext(li(e));n.logInteraction(i)}}),[n,r,o]),m=(0,a.useCallback)((function(e){var i=o.repeatButtonFactory(),t=null;switch(e){case ii.p.REPEAT_TRACK:t=i.hitRepeatOneEnable();break;case ii.p.REPEAT_CONTEXT:t=i.hitRepeatEnable();break;case ii.p.REPEAT_NONE:t=i.hitRepeatDisable();break;default:(0,ni.k)(e)}t&&n.logInteraction(t)}),[n,o]),v=(0,a.useCallback)((function(e){if(l.current){var i=e?"shuffle":"linear",t=e?"linear":"shuffle",r=o.shuffleButtonFactory({uri:l.current}).hitSelectShuffleMode({previousMode:t,selectedMode:i});n.logInteraction(r)}}),[n,o]),f=(0,a.useCallback)((function(e){var i=o.volumeMuteButtonFactory();n.logInteraction("muted"===e?i.hitMutePlayback():i.hitUnmutePlayback())}),[n,o]),h=(0,a.useCallback)((function(e){var i=o.volumeBarFactory();n.logInteraction(i.hitSetVolume({newVolumePercentage:ri(e)}))}),[n,o]),p=(0,a.useCallback)((function(e){var i=o.volumeBarFactory();n.logInteraction(i.dragSetVolume({newVolumePercentage:ri(e)}))}),[n,o]),g=(0,a.useCallback)((function(e){var i=o.seekBackwardButtonFactory();n.logInteraction(i.hitSeekByTime({msSeekedOffset:e}))}),[n,o]);return{onClickSeekForward:(0,a.useCallback)((function(e){var i=o.seekForwardButtonFactory();n.logInteraction(i.hitSeekByTime({msSeekedOffset:e}))}),[n,o]),onClickSeekBack:g,onClickPlayPause:c,onClickLike:s,onClickSkipPrevious:u,onClickSkipNext:d,onClickRepeat:m,onClickShuffle:v,onClickVolumeButton:f,onClickVolumeBar:h,onDragVolumeBar:p}}({uri:l,spec:t,logger:n}),o=r.onClickPlayPause,c=r.onClickLike,s=r.onClickSkipPrevious,u=r.onClickSkipNext,d=r.onClickRepeat,m=r.onClickShuffle,v=r.onClickVolumeButton,f=r.onClickVolumeBar,h=r.onDragVolumeBar,p=r.onClickSeekBack,g=r.onClickSeekForward,k=(0,ke.K)(),x=(0,Qe.YQ)(h,500,{leading:!1,trailing:!0});if(!l)return null;var C=(0,qe.v)(i),b=(0,Je.p)(i),j=(0,W.N)(i),y=function(e){if((0,Je.p)(e)||(0,He.d)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(i),S="SMALL"===k.horizontal,N="SMALL"===k.vertical,w="MEDIUM"===k.vertical,B="DEFAULT"===k.vertical;return j?N?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Xe.xJ,{onClick:o}),(0,ie.jsx)(Xe.v3,{onClick:g})]}):B?(0,ie.jsx)(Xe.v3,{onClick:g}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Xe.hC,{onClick:p}),(0,ie.jsx)(Xe.xJ,{onClick:o}),(0,ie.jsx)(Xe.v3,{onClick:g}),(0,ie.jsx)($e.M,{mode:$e.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:v,onVolumeBarClick:f,onVolumeBarDrag:x})]}):N?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Xe.xJ,{onClick:o}),y?(0,ie.jsx)(Xe.v3,{onClick:g}):(0,ie.jsx)(Xe.$K,{onClick:u})]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("div",{className:ai,children:[C&&(0,ie.jsx)(Ge.b,{uri:l,onClick:c,className:oi}),b&&(0,ie.jsx)(Ye.b,{uri:l,onClick:c,className:oi})]}),y?(0,ie.jsx)(Xe.hC,{onClick:p}):(0,ie.jsx)(Xe.uP,{onClick:m}),(0,ie.jsx)(Xe.dQ,{onClick:s}),(0,ie.jsx)(Xe.xJ,{iconSize:S||w?"small":"medium",onClick:o,className:ci}),(0,ie.jsx)(Xe.$K,{onClick:u}),y?(0,ie.jsx)(Xe.v3,{onClick:g}):(0,ie.jsx)(Xe.s_,{onClick:d}),(0,ie.jsx)($e.M,{mode:$e.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:v,onVolumeBarClick:f,onVolumeBarDrag:x})]})}));var ui=a.memo((function(){var e,i,t,o=null!==(e=(0,v.L)())&&void 0!==e?e:{},p=o.item,g=o.context,k=(0,a.useState)(!1),x=(0,r.A)(k,2),w=x[0],B=x[1],E=640,L=(0,u.NC)(F.Ln9),M=(0,u.NC)(F.rWU),_=(0,a.useMemo)((function(){var e;return(0,O.h)(null!==(e=null==p?void 0:p.images)&&void 0!==e?e:void 0,{desiredSize:E})}),[null==p?void 0:p.images,E]),U=(0,le.z)(_,I),z=(0,u.NC)(F.a4n);!function(e,i){var t=(0,de.o)((function(e){var i;return null==e||null===(i=e.nextItems)||void 0===i?void 0:i[0]}),(function(e,i){return(null==e?void 0:e.uri)===(null==i?void 0:i.uri)})),n=(0,a.useMemo)((function(){var i;return(0,O.h)(null!==(i=null==t?void 0:t.images)&&void 0!==i?i:void 0,{desiredSize:e})}),[null==t?void 0:t.images,e]);(0,le.z)(n,i)}(E,I);var K=(0,ae.r)(d.w,{}),Z=K.spec,Q=K.logger;!function(e){var i=e.spec,t=e.logger,n=(0,V.ox)(),l=(0,a.useRef)(null);null===l.current&&(l.current=ue(n)),(0,se.s)((function(){var e=ue(n);null!==e&&null!==l.current&&(t.logInteraction(i.dragUiResize2d({startWidthPx:l.current.width,startHeightPx:l.current.height,endWidthPx:e.width,endHeightPx:e.height})),l.current=e)}),{throttleTime:500,leading:!1,trailing:!0})}({logger:Q,spec:Z}),function(e){var i=e.spec,t=e.logger,n=e.pipWindow;(0,a.useEffect)((function(){if(n){var e=function(e){if(e.currentTarget===n){var l=i.windowControlsFactory().closeButtonFactory().hitUiHide();t.logInteraction(l)}};return n.addEventListener("pagehide",e),function(){n.removeEventListener("pagehide",e)}}}),[t,n,i])}({logger:Q,spec:Z,pipWindow:null!==(i=null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)&&void 0!==i?i:null});var H=(0,oe.d)().setVideoPlayerUIFlag,J=(0,a.useState)(""),q=(0,r.A)(J,2),$=q[0],ee=q[1];(0,a.useLayoutEffect)((function(){ee(h)}),[]);var te=function(){var e=(0,V.ox)(),i=(0,a.useState)(!1),t=(0,r.A)(i,2),n=t[0],l=t[1];return(0,se.s)((function(){var i=ue(e);null!==i&&(i.width<=300&&i.height<=300?l(!0):l(!1))}),{throttleTime:500,leading:!1,trailing:!0}),n}();(0,a.useEffect)((function(){z&&H(ce.n.documentPip,!0)}),[z,H]);var me=(0,a.useCallback)((function(e){var i;(i=e.target)&&"object"===(0,n.A)(i)&&"nodeName"in i&&"A"===i.nodeName&&"_blank"!==e.target.target&&(Y()?G():B(!0))}),[]);!function(e,i){var t=(0,V.ox)(),n=null!=i?i:t;(0,a.useEffect)((function(){e&&n&&(n.document.title=e)}),[e,n])}(m.Ru.get("web-player.pip-mini-player.window-title")),(0,a.useEffect)((function(){if(w){var e=setTimeout((function(){B(!1)}),3e3);return function(){clearTimeout(e)}}}),[w]);var ve=(0,a.useRef)(null),fe=(0,u.NC)(F.HYy),he=(0,re.t)(Z,fe),pe=(0,a.useState)(!1),ge=(0,r.A)(pe,2),ke=ge[0],xe=ge[1],Ce=(0,a.useRef)(null),be=(0,a.useRef)(null),je=(0,a.useCallback)((function(){xe(!0),Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout((function(){xe(!1);var e=(0,D.D)(ve.current,"--mouse-active-over-controls-fadeout-timeout",300,"ms");be.current&&clearTimeout(be.current),be.current=setTimeout((function(){be.current=null}),e)}),1e3)}),[]),Se=(0,a.useCallback)((function(){be.current||xe(!1)}),[]);if(!p||!g)return null;var Ne={"--background-color":U,"--background-image-url":"url(".concat(_,")"),"--background-image-width":"".concat(E,"px"),"--background-image-height":"".concat(E,"px"),display:"var(--mini-player-display)"},we=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(p),Be=(0,W.N)(p);return!L&&!Be&&te?(0,ie.jsx)(Ie,{}):(0,ie.jsxs)("div",{ref:ve,className:c()("encore-dark-theme","encore-small-devices-theme",{"circular-sp-vietnamese":M},f),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,ie.jsx)(Ke,{}),(0,ie.jsxs)("div",{className:c()(C,b),style:Ne,ref:he,children:[(0,ie.jsx)("div",{className:c()(y,(0,l.A)({},S,!we)),"data-testid":"pip-hover-element",children:(0,ie.jsx)("div",{className:N,id:"document-pip-main-container",children:(0,ie.jsx)(ne,{})})}),(0,ie.jsx)(ye,{item:p,className:A,onClick:me}),(0,ie.jsx)("div",{className:c()("encore-over-media-set",T,(0,l.A)((0,l.A)({},R,ke),P,(0,W.N)(p))),dir:"ltr","data-testid":X,onMouseEnter:je,onMouseMove:je,onMouseLeave:Se,children:(0,ie.jsx)(si,{item:p,spec:Z,logger:Q})})]}),(0,ie.jsx)("div",{className:$,children:(0,ie.jsx)(Ze.B,{fadeIn:!1})}),(0,ie.jsx)(s.qb,{colorSet:"invertedLight",showSnackbar:w,className:j,children:m.Ru.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")})]})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map