"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9480],{70993:(e,r,t)=>{t.d(r,{M:()=>m});var i=t(26017),n=(t(83892),t(69760)),a=t(4092),o=t(33677),l=t(67825),s=t(68521);const u="profile-editImage-imageContainer",d="profile-editImage-editImageButtonContainer";var c=t(86070),m=function(e){var r=e.onClick,t=e.name,m=e.images,p=e.canEdit,f=e.placeholderType,g=e.shape,v=void 0===g?s.u.SQUARE:g,h=e.dragUri,b=void 0===h?"":h,y=(0,a.P)(m),x=(0,i.A)(y,2),j=x[0],k=x[1],w=(0,o.b)(j,k)===o.g.loaded,R=(0,n.P)({itemUris:[b],dragLabelText:t}),A=R.draggable,I=R.onDragStart;return(0,c.jsxs)("div",{className:u,"data-testid":"".concat(f,"-image"),draggable:A&&!!b,onDragStart:I,children:[(0,c.jsx)(s.b,{loading:"eager",name:t,images:m,placeholderType:f,shape:v}),p&&(0,c.jsx)("div",{className:d,children:(0,c.jsx)(l.a,{overlay:w,onClick:r,rounded:v===s.u.CIRCLE})})]})}},17590:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ki});var i=t(30758),n=t(61022),a=t(51517),o=t(78221),l=t(29924),s=t(71526),u=t(15995),d=(t(84008),t(83892),t(50252),t(23908)),c=t(59081),m=t(12321),p=t(46317),f=t(7766),g=t(89229),v=t(67693),h=t(86070),b=function(e){var r=e.uri,t=(0,v.Z)(g.SR,[r]),i=t.data,n=t.loading,a=t.error,o=null==i?void 0:i.profiles;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:c.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{className:"contentSpacing",title:c.Ru.get("followers"),total:null==o?void 0:o.length,showAll:!0,fullPage:!0,rowGap:d.lT,children:null==o?void 0:o.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))})},y=function(e){var r=e.uri,t=(0,v.Z)(g.mH,[r]),i=t.data,n=t.loading,a=t.error,o=null==i?void 0:i.profiles;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:c.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{className:"contentSpacing",title:c.Ru.get("following"),total:null==o?void 0:o.length,showAll:!0,fullPage:!0,rowGap:d.lT,children:null==o?void 0:o.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))})},x=t(26017),j=(t(54436),t(69645),t(93902),t(64992),t(55074)),k=t(97500),w=t.n(k),R=t(45976),A=t(42551),I=t(1409),P=t(95307),_=t(24121),O=t(94331),T=t(36092),E=t(71348),C=t(85107),N=t(70993),S=t(54212),U=t(19968),D=t(95514),M=t(16247),L=t.n(M),F=(t(63624),t(54925)),B=t(88728),H=t(72681),W=t(32303),G=t(81226),$=t(12182),Q=t(4092),z=t(33677),K=t(68521);const V="profile-userEditDetails-image",q="valcBm4lLe9qFBcg0sFY",Z="tAIzXn8C9KriGwGuBfWg",X="PsrXxenHUFXYM1ub1xWw",Y="U_VWfeeLWnDPhUTxCmrQ";var J=function(e){var r=e.onClickEdit,t=e.onClickRemove,i=e.name,n=e.images,a=e.canEdit,o=(0,Q.P)(n),l=(0,x.A)(o,2),s=l[0],u=l[1],d=(0,z.b)(s,u)===z.g.loaded;return(0,h.jsxs)("div",{className:V,children:[(0,h.jsx)(K.b,{loading:"eager",name:i,images:n,placeholderType:"user",shape:K.u.CIRCLE}),a&&(0,h.jsxs)("div",{className:w()(q,(0,G.A)({},X,d)),children:[(0,h.jsx)("button",{className:Z,"aria-haspopup":"true",onClick:r,type:"button",children:(0,h.jsx)(F.E,{variant:"bodyMedium",children:c.Ru.get("user.edit-details.choose-photo")})}),(0,h.jsx)("div",{className:w()(Y,"icon"),children:(0,h.jsx)($.G,{size:"xlarge","aria-hidden":!0})}),(0,h.jsx)("button",{className:Z,onClick:t,type:"button",children:(0,h.jsx)(F.E,{variant:"bodyMedium",children:c.Ru.get("user.edit-details.remove-photo")})})]})]})},ee=(t(38858),t(62172),t(98168),t(26697)),re=t(93433),te=(t(60905),t(51725),t(78381),t(94238),t(63619),t(9332),t(21932),t(60850),t(21256),t(69927),t(2979),t(97731),t(1834),t(21294),t(11141),t(66874),t(34318),t(41679),t(81443),t(74457),t(6844),t(77458),t(9981),t(31840),t(45991),t(36490),t(75687),t(73066),t(79656),t(26460),t(97390),t(14297),t(87348),t(99333),t(81909),t(78920),t(53252),t(35866),t(67781),t(7505),t(58243),t(85502),t(28261),t(57597),t(96654),t(26325),t(98771),t(28249),t(66411),t(58071),t(32396),t(67367),t(89921),t(15542),t(34562),t(90379),t(7410),t(50247),t(88190),t(4207),t(59043));function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function ne(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ie(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ae(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return oe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oe(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}function oe(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var le={paths:""},se=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create(),i=ae(e.paths);try{for(i.s();!(r=i.n()).done;){var n=r.value;t.uint32(10).string(n)}}catch(e){i.e(e)}finally{i.f()}return t},ue=function(e,r){var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ne({},le);for(n.paths=[];t.pos<i;){var a=t.uint32();if(a>>>3==1)n.paths.push(t.string());else t.skipType(7&a)}return n},de=function(e){var r=ne({},le);if(r.paths=[],void 0!==e.paths&&null!==e.paths){var t,i=ae(e.paths);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.paths.push(String(n))}}catch(e){i.e(e)}finally{i.f()}}return r},ce=function(e){var r=ne({},le);if(r.paths=[],void 0!==e.paths&&null!==e.paths){var t,i=ae(e.paths);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.paths.push(n)}}catch(e){i.e(e)}finally{i.f()}}return r},me=function(e){var r={};return e.paths?r.paths=e.paths.map((function(e){return e})):r.paths=[],r},pe=(t(67560),t(67119),t(80403),t(60561),t(11313),t(61081),t(85013),t(21364)),fe=t(84686).hp;function ge(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function ve(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ge(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ge(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var he={value:0},be={value:!1},ye={value:""};var xe=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(8).int32(e.value),r},je=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ve({},he);t.pos<i;){var a=t.uint32();if(a>>>3==1)n.value=t.int32();else t.skipType(7&a)}return n},ke=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(8).bool(e.value),r},we=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ve({},be);t.pos<i;){var a=t.uint32();if(a>>>3==1)n.value=t.bool();else t.skipType(7&a)}return n},Re=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(10).string(e.value),r},Ae=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ve({},ye);t.pos<i;){var a=t.uint32();if(a>>>3==1)n.value=t.string();else t.skipType(7&a)}return n};te.util.Long!==pe.A&&(te.util.Long=pe.A,(0,te.configure)());var Ie=globalThis;Ie.atob,Ie.btoa;function Pe(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return _e(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _e(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}function _e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function Oe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function Te(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Oe(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ee={maxWidth:0,maxHeight:0,url:""},Ce={},Ne={},Se=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(8).int32(e.maxWidth),r.uint32(16).int32(e.maxHeight),r.uint32(26).string(e.url),r},Ue=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=Te({},Ee);t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:n.maxWidth=t.int32();break;case 2:n.maxHeight=t.int32();break;case 3:n.url=t.string();break;default:t.skipType(7&a)}}return n},De=function(e){var r=Te({},Ee);return void 0!==e.maxWidth&&null!==e.maxWidth?r.maxWidth=Number(e.maxWidth):r.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?r.maxHeight=Number(e.maxHeight):r.maxHeight=0,void 0!==e.url&&null!==e.url?r.url=String(e.url):r.url="",r},Me=function(e){var r=Te({},Ee);return void 0!==e.maxWidth&&null!==e.maxWidth?r.maxWidth=e.maxWidth:r.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?r.maxHeight=e.maxHeight:r.maxHeight=0,void 0!==e.url&&null!==e.url?r.url=e.url:r.url="",r},Le=function(e){var r={};return void 0!==e.maxWidth&&(r.maxWidth=e.maxWidth),void 0!==e.maxHeight&&(r.maxHeight=e.maxHeight),void 0!==e.url&&(r.url=e.url),r},Fe=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();void 0!==e.username&&void 0!==e.username&&Re({value:e.username},r.uint32(10).fork()).ldelim(),void 0!==e.name&&void 0!==e.name&&Re({value:e.name},r.uint32(18).fork()).ldelim();var t,i=Pe(e.images);try{for(i.s();!(t=i.n()).done;){var n=t.value;Se(n,r.uint32(26).fork()).ldelim()}}catch(e){i.e(e)}finally{i.f()}return void 0!==e.verified&&void 0!==e.verified&&ke({value:e.verified},r.uint32(34).fork()).ldelim(),void 0!==e.editProfileDisabled&&void 0!==e.editProfileDisabled&&ke({value:e.editProfileDisabled},r.uint32(42).fork()).ldelim(),void 0!==e.reportAbuseDisabled&&void 0!==e.reportAbuseDisabled&&ke({value:e.reportAbuseDisabled},r.uint32(50).fork()).ldelim(),void 0!==e.abuseReportedName&&void 0!==e.abuseReportedName&&ke({value:e.abuseReportedName},r.uint32(58).fork()).ldelim(),void 0!==e.abuseReportedImage&&void 0!==e.abuseReportedImage&&ke({value:e.abuseReportedImage},r.uint32(66).fork()).ldelim(),void 0!==e.hasSpotifyName&&void 0!==e.hasSpotifyName&&ke({value:e.hasSpotifyName},r.uint32(74).fork()).ldelim(),void 0!==e.hasSpotifyImage&&void 0!==e.hasSpotifyImage&&ke({value:e.hasSpotifyImage},r.uint32(82).fork()).ldelim(),void 0!==e.color&&void 0!==e.color&&xe({value:e.color},r.uint32(90).fork()).ldelim(),r},Be=function(e,r){var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=Te({},Ce);for(n.images=[];t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:n.username=Ae(t,t.uint32()).value;break;case 2:n.name=Ae(t,t.uint32()).value;break;case 3:n.images.push(Ue(t,t.uint32()));break;case 4:n.verified=we(t,t.uint32()).value;break;case 5:n.editProfileDisabled=we(t,t.uint32()).value;break;case 6:n.reportAbuseDisabled=we(t,t.uint32()).value;break;case 7:n.abuseReportedName=we(t,t.uint32()).value;break;case 8:n.abuseReportedImage=we(t,t.uint32()).value;break;case 9:n.hasSpotifyName=we(t,t.uint32()).value;break;case 10:n.hasSpotifyImage=we(t,t.uint32()).value;break;case 11:n.color=je(t,t.uint32()).value;break;default:t.skipType(7&a)}}return n},He=function(e){var r=Te({},Ce);if(r.images=[],void 0!==e.username&&null!==e.username?r.username=String(e.username):r.username=void 0,void 0!==e.name&&null!==e.name?r.name=String(e.name):r.name=void 0,void 0!==e.images&&null!==e.images){var t,i=Pe(e.images);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.images.push(De(n))}}catch(e){i.e(e)}finally{i.f()}}return void 0!==e.verified&&null!==e.verified?r.verified=Boolean(e.verified):r.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?r.editProfileDisabled=Boolean(e.editProfileDisabled):r.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?r.reportAbuseDisabled=Boolean(e.reportAbuseDisabled):r.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?r.abuseReportedName=Boolean(e.abuseReportedName):r.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?r.abuseReportedImage=Boolean(e.abuseReportedImage):r.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?r.hasSpotifyName=Boolean(e.hasSpotifyName):r.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?r.hasSpotifyImage=Boolean(e.hasSpotifyImage):r.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?r.color=Number(e.color):r.color=void 0,r},We=function(e){var r=Te({},Ce);if(r.images=[],void 0!==e.username&&null!==e.username?r.username=e.username:r.username=void 0,void 0!==e.name&&null!==e.name?r.name=e.name:r.name=void 0,void 0!==e.images&&null!==e.images){var t,i=Pe(e.images);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.images.push(Me(n))}}catch(e){i.e(e)}finally{i.f()}}return void 0!==e.verified&&null!==e.verified?r.verified=e.verified:r.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?r.editProfileDisabled=e.editProfileDisabled:r.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?r.reportAbuseDisabled=e.reportAbuseDisabled:r.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?r.abuseReportedName=e.abuseReportedName:r.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?r.abuseReportedImage=e.abuseReportedImage:r.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?r.hasSpotifyName=e.hasSpotifyName:r.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?r.hasSpotifyImage=e.hasSpotifyImage:r.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?r.color=e.color:r.color=void 0,r},Ge=function(e){var r={};return void 0!==e.username&&(r.username=e.username),void 0!==e.name&&(r.name=e.name),e.images?r.images=e.images.map((function(e){return e?Le(e):void 0})):r.images=[],void 0!==e.verified&&(r.verified=e.verified),void 0!==e.editProfileDisabled&&(r.editProfileDisabled=e.editProfileDisabled),void 0!==e.reportAbuseDisabled&&(r.reportAbuseDisabled=e.reportAbuseDisabled),void 0!==e.abuseReportedName&&(r.abuseReportedName=e.abuseReportedName),void 0!==e.abuseReportedImage&&(r.abuseReportedImage=e.abuseReportedImage),void 0!==e.hasSpotifyName&&(r.hasSpotifyName=e.hasSpotifyName),void 0!==e.hasSpotifyImage&&(r.hasSpotifyImage=e.hasSpotifyImage),void 0!==e.color&&(r.color=e.color),r},$e={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return void 0!==e.mask&&void 0!==e.mask&&se(e.mask,r.uint32(10).fork()).ldelim(),void 0!==e.userProfile&&void 0!==e.userProfile&&Fe(e.userProfile,r.uint32(18).fork()).ldelim(),r},decode:function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=Te({},Ne);t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:n.mask=ue(t,t.uint32());break;case 2:n.userProfile=Be(t,t.uint32());break;default:t.skipType(7&a)}}return n},fromJSON:function(e){var r=Te({},Ne);return void 0!==e.mask&&null!==e.mask?r.mask=de(e.mask):r.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?r.userProfile=He(e.userProfile):r.userProfile=void 0,r},fromPartial:function(e){var r=Te({},Ne);return void 0!==e.mask&&null!==e.mask?r.mask=ce(e.mask):r.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?r.userProfile=We(e.userProfile):r.userProfile=void 0,r},toJSON:function(e){var r={};return void 0!==e.mask&&(r.mask=e.mask?me(e.mask):void 0),void 0!==e.userProfile&&(r.userProfile=e.userProfile?Ge(e.userProfile):void 0),r}},Qe="".concat(ee.I_,"/identity");function ze(e,r,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,D.A)(L().mark((function e(r,t,i){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.build().withHost(Qe).withMethod("POST").withPath("/v3/profile-image/".concat(encodeURIComponent((0,re.v)(t)),"/").concat(i)).withEndpointIdentifier("/v3/profile-image/{username}/{uploadToken}").withoutMarket().send();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,r){return qe.apply(this,arguments)}function qe(){return(qe=(0,D.A)(L().mark((function e(r,t){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.build().withHost(Qe).withMethod("DELETE").withPath("/v3/profile-image/".concat(encodeURIComponent((0,re.v)(t)))).withEndpointIdentifier("/v3/profile-image/{username}").withoutMarket().send();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,r,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,D.A)(L().mark((function e(r,t,i){var n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$e.encode($e.fromPartial({mask:{paths:["name"]},userProfile:null!==i?{name:i}:{}})),e.next=3,r.build().withHost(Qe).withMethod("POST").withPath("/v3/user/username/".concat(encodeURIComponent((0,re.v)(t)))).withEndpointIdentifier("/v3/user/username/{username}").withBody(n.finish()).withoutMarket().send();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,r,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,D.A)(L().mark((function e(r,t,i){var n,a;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.name,a=i.imageUploadToken,void 0===n){e.next=4;break}return e.next=4,Ze(r,t,n);case 4:if(void 0===a){e.next=12;break}if(null===a){e.next=10;break}return e.next=8,ze(r,t,a);case 8:e.next=12;break;case 10:return e.next=12,Ve(r,t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var er=t(56761),rr="https://image-upload.spotify.com/v4";function tr(e,r){return ir.apply(this,arguments)}function ir(){return(ir=(0,D.A)(L().mark((function e(r,t){var i,n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n=t.imageUploadToken,e.next=3,Ye(er.n.getInstance(),r,{name:i,imageUploadToken:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(e){return ar.apply(this,arguments)}function ar(){return(ar=(0,D.A)(L().mark((function e(r){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.n.getInstance().build().withEndpointIdentifier("image-upload/v4/user-profile").withHost(rr).withMethod("POST").withPath("/user-profile").withBody(r).withoutGlobalHeaders().withHeaders([{key:"Content-Type",value:"image/jpeg"}]).withoutMarket().send();case 2:if((t=e.sent).body){e.next=5;break}throw new Error("No upload token recieved");case 5:return e.abrupt("return",t.body.uploadToken);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var or={type:"error",get message(){return c.Ru.get("user.edit-details.error.file-size-exceeded",10)}},lr={type:"error",get message(){return c.Ru.get("user.edit-details.error.too-small",300,300)}},sr={type:"error",get message(){return c.Ru.get("user.edit-details.error.missing-name")}},ur={type:"error",get message(){return c.Ru.get("user.edit-details.error.failed-to-save")}},dr={type:"error",get message(){return c.Ru.get("user.edit-details.error.file-upload-failed")}};function cr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function mr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?cr(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function pr(e){return{type:"setLoading",loading:e}}function fr(e){return{type:"setMessage",message:e}}function gr(e,r){switch(r.type){case"setName":return mr(mr({},e),{},{name:r.name});case"setMessage":return mr(mr({},e),{},{message:r.message,loading:!1});case"setLoading":return mr(mr({},e),{},{loading:r.loading,message:null});case"setImageData":return mr(mr({},e),{},{imageData:r.data,removeImage:!1});case"setImageToken":return mr(mr({},e),{},{imageToken:r.token,removeImage:!1});case"removeImage":return mr(mr({},e),{},{imageToken:void 0,imageData:void 0,image:void 0,removeImage:!0});default:return e}}var vr=t(16655),hr=t(47355),br=t(22307),yr=t(86945);const xr="profile-userEditDetails-container",jr="profile-userEditDetails-content",kr="profile-userEditDetails-header",wr="profile-userEditDetails-closeButton",Rr="vAeyAmeLkDEDKdL9Hou0",Ar="dnmzO6yYKkxUV8jl7O1Z",Ir="profile-userEditDetails-nameInput",Pr="profile-userEditDetails-name",_r="profile-userEditDetails-label",Or="profile-userEditDetails-labelText",Tr="dMhJaxli87_22jb_3d9x",Er="profile-userEditDetails-saveButton",Cr="profile-userEditDetails-disclaimer";var Nr=i.memo((function(e){var r=e.uri,t=e.name,n=e.image,a=e.onClose,o=e.shouldOpenImagePicker,l=e.userCapabilities,s=(0,br.p)(),u=(0,x.A)(s,2),d=u[0],m=u[1],p=function(e){var r=e.name,t=e.image;return(0,i.useReducer)(gr,{loading:!1,message:null,name:r,image:t})}({name:t,image:n}),f=(0,x.A)(p,2),g=f[0],v=f[1],b=(0,i.useMemo)((function(){var e=g.imageData||g.image;return e?[{url:e,width:300,height:300}]:[]}),[g.image,g.imageData]);function y(){return(y=(0,D.A)(L().mark((function e(r){var t,i,n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(t=r.imageFile,i=r.imageDataUrl,v(fr(null)),v({type:"setImageData",data:i}),!t){e.next=18;break}return e.prev=6,v(pr(!0)),e.next=10,nr(t);case 10:n=e.sent,v({type:"setImageToken",token:n}),v(pr(!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),v(fr(dr));case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}(0,i.useEffect)((function(){o&&m()}),[m,o]);var j=(0,i.useCallback)((function(e){e===hr.i.FILE_TOO_BIG?v(fr(or)):e===hr.i.IMAGE_TOO_SMALL&&v(fr(lr))}),[v]),k=(0,i.useCallback)((function(){v({type:"removeImage"})}),[v]),R=(0,i.useCallback)(function(){var e=(0,D.A)(L().mark((function e(t){var i;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==g.name.trim().length){e.next=5;break}return v(fr(sr)),e.abrupt("return");case 5:return v(pr(!0)),e.prev=6,i=g.removeImage?null:g.imageToken,e.next=10,tr(r,{name:g.name,imageUploadToken:i});case 10:a({name:g.name,image:g.imageData||g.image}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),v(fr(ur));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(r){return e.apply(this,arguments)}}(),[v,a,g.image,g.imageData,g.imageToken,g.name,g.removeImage,r]);return(0,h.jsx)(vr.A,{isOpen:!0,contentLabel:c.Ru.get("user.edit-details.title"),onRequestClose:function(){return a()},children:(0,h.jsxs)("div",{className:xr,children:[(0,h.jsxs)("div",{className:kr,children:[(0,h.jsx)(F.E,{as:"h1",variant:"titleSmall",children:c.Ru.get("user.edit-details.title")}),(0,h.jsx)("button",{className:wr,onClick:function(){return a()},"aria-label":c.Ru.get("close"),children:(0,h.jsx)(B.M,{size:"small"})})]}),g.message&&(0,h.jsx)(yr.z,{isErrorMessage:"error"===g.message.type,message:g.message.message}),(0,h.jsxs)("form",{className:jr,onSubmit:R,children:[l.edit_image&&(0,h.jsx)(hr.u,{isOpen:d,minImageWidth:300,minImageHeight:300,maxFileSizeMB:10,onChange:function(e){return y.apply(this,arguments)},onError:j}),(0,h.jsxs)("div",{className:Rr,children:[(0,h.jsx)(J,{name:t,images:b,onClickEdit:m,onClickRemove:k,canEdit:l.edit_image}),g.loading&&(0,h.jsx)("div",{className:Ar,children:(0,h.jsx)(H.I,{})})]}),(0,h.jsxs)("div",{className:Pr,children:[(0,h.jsx)("label",{htmlFor:"user-edit-name",className:_r,children:(0,h.jsx)(F.E,{variant:"marginalBold",className:Or,children:c.Ru.get("user.edit-details.name-label")})}),(0,h.jsx)("input",{"data-testid":"user-edit-name-input",id:"user-edit-name",type:"text",dir:"auto",className:w()(Ir,Tr),onChange:function(e){v(function(e){return{type:"setName",name:e}}(e.target.value))},placeholder:c.Ru.get("user.edit-details.name-placeholder"),maxLength:32,value:g.name,disabled:!l.edit_name})]}),(0,h.jsx)("div",{className:Er,children:(0,h.jsx)(W.$,{colorSet:"invertedLight",onClick:R,disabled:g.loading,children:c.Ru.get("save")})}),(0,h.jsx)(F.E,{as:"p",variant:"marginalBold",className:Cr,children:c.Ru.get("image-upload.legal-disclaimer")})]})]})})})),Sr=t(66959),Ur=t(13147),Dr=t(26686),Mr=t(89454),Lr=t(77666),Fr=t(90997),Br=t(82035),Hr=t(39437),Wr=t(88038),Gr=t(82930),$r=t(28996),Qr=t(98849),zr=t(73704),Kr=t(62472),Vr=t(11182),qr=t(94189),Zr=t(4906),Xr=t(18022),Yr=t(26520),Jr=t(19919),et=t(68067),rt=t(37686),tt=t(28937),it=new rt.l("userTopContent","query","feb6d55177e2cbce2ac59214f9493f1ef2e4368eec01b3d4c3468fa1b97336e2",null);function nt(e){return"Artist"===e.__typename}function at(e){var r;if("ArtistPageV2"!==(null==e||null===(r=e.topArtists)||void 0===r?void 0:r.__typename))return null;var t=e.topArtists.items.map((function(e){return e.data})).filter(nt);return 0===t.length?null:{totalCount:e.topArtists.totalCount,items:t}}function ot(e){return"Track"===e.__typename}function lt(e){var r;if("TrackPageV2"!==(null==e||null===(r=e.topTracks)||void 0===r?void 0:r.__typename))return null;var t=e.topTracks.items.map((function(e){return e.data})).filter(ot).filter((function(e){return null!==e.albumOfTrack}));return 0===t.length?null:{totalCount:e.topTracks.totalCount,items:t}}var st=et.xE.Affinity,ut=et.Nm.ShortTerm;function dt(e){var r,t,i,n,a,o,l=e.includeTopArtists,s=e.includeTopTracks,u=e.topArtistsLimit,d=e.topTracksLimit,c=(a={includeTopArtists:l,topArtistsInput:{offset:0,limit:u,sortBy:st,timeRange:ut},includeTopTracks:s,topTracksInput:{offset:0,limit:d,sortBy:st,timeRange:ut}},o={enabled:l||s,gcTime:18e5,staleTime:3e5},(0,tt.I)(it,a,o)),m=c.data,p=c.loading;return null!==c.error?{topTracks:null,topArtists:null,loading:p,error:new Error("Failed loading user top content!")}:{topTracks:lt(null!==(r=null==m||null===(t=m.me)||void 0===t?void 0:t.profile)&&void 0!==r?r:null),topArtists:at(null!==(i=null==m||null===(n=m.me)||void 0===n?void 0:n.profile)&&void 0!==i?i:null),loading:p,error:null}}var ct=t(78041),mt=t(60828),pt=t(43909),ft=t(84206),gt=t(54509),vt=t(73576),ht=t(11355),bt=t(87238),yt=t(27672),xt=t(530),jt=i.memo((function(e){var r=e.openModal,t=e.spec,n=e.logger,a=e.name,o=e.backgroundColor,l=e.isCurrentUser,s=e.uri,u=(0,ht.Y)(s),d=(0,x.A)(u,2),m=d[0],p=d[1],f=(0,gt.W)(),g=!(0,vt.n)(),v=(0,i.useCallback)((function(){f({targetUri:s,intent:m?"unfollow":"follow",type:"click"});var e=t.actionBarFactory().followButtonFactory();m?(p(!1),n.logInteraction(e.hitUnfollow({itemToBeUnfollowed:s}))):(p(!0),n.logInteraction(e.hitFollow({itemToBeFollowed:s})))}),[m,n,f,p,t,s]),b=(0,i.useCallback)((function(){var e=t.actionBarFactory().contextMenuButtonFactory().hitUiReveal();n.logInteraction(e)}),[n,t]),y=(0,xt.j)();return(0,h.jsx)(bt.E,{backgroundColor:o,children:(0,h.jsxs)(yt.S,{children:[!l&&(0,h.jsx)(pt.e,{children:(0,h.jsx)(ft.W,{isFollowing:Boolean(m),onClick:v,disabled:g})}),(0,h.jsx)(mt.b,{menu:(0,h.jsx)(E.B,{uri:s,onEditProfileCallback:r}),children:(0,h.jsx)(ct.e,{label:c.Ru.get("more.label.context",a),onClick:b,size:y})})]})})})),kt=t(71041),wt=t(43407),Rt=t(96792),At=t(53980),It=t(52782),Pt=t(34478),_t=t(97150),Ot=t(53921),Tt=t(54839),Et=t(23235),Ct=t(34293),Nt=t(19269),St=t(31332),Ut=t(93928),Dt=t(30710),Mt=t(87440),Lt=t(2856),Ft=t(29833),Bt=t(82323),Ht=t(95597),Wt=t(18001),Gt=t(15514),$t=t(70403),Qt=t(46241),zt=t(35509),Kt=t(17649),Vt=t(24009),qt=t(26261),Zt=t(98593),Xt=t(31625),Yt=t(59133),Jt=t(7183),ei=t(91080),ri=t(12493),ti=i.memo((function(e){var r,t=e.uri,i=e.name,n=e.duration_ms,a=e.artists,o=e.album,l=e.contextUri,s=e.isExplicit,u=e.isMOGEFRestricted,d=e.isPlayable,m=e.index,p=e.imgUrl,f=e.usePlayContextItem,g=(0,Br.r)(Tt.i,{data:{position:m,reason:"",uri:t}}).spec,v=f({uri:t,index:m}),b=v.isActive,y=v.isPlaying,x=v.triggerPlay,j=v.togglePlay,k=(0,St.T)(t),w=(0,Mt.g)(t,d),R=(0,Ut.b)({downloadAvailability:k,isExplicit:s,isMOGEFRestricted:u}),A=R.badges,I=R.hasBadges,P=(null==a?void 0:a.map((function(e){return e.name})).join(c.Ru.getSeparator()))||"";return(0,h.jsx)(Pt.pZ,{value:"row",index:m,children:(0,h.jsx)(T.h,{menu:(0,h.jsx)(Lt.P,{uri:t,albumUri:o.uri,artists:a,contextUri:l}),children:(0,h.jsxs)(ei.w,{uri:t,contextUri:l,onTriggerPlay:function(e,r){x({loggingParams:r})},isActive:b,index:m,ariaRowIndex:m+1,isPlayable:w,ageRestricted:u,dragMetadata:{name:i,createdBy:P},spec:g,children:[(0,h.jsx)(qt.y,{ariaColIndex:0,children:(0,h.jsx)(Qt.$,{uri:t,playAriaLabel:c.Ru.get("tracklist.a11y.play",i,P),isPlaying:y,isActive:b,onClick:function(e,r){j({loggingParams:r})},spec:g,children:(0,h.jsx)(Kt.a,{children:m+1})})}),(0,h.jsxs)(Zt.U,{ariaColIndex:1,children:[(0,h.jsx)(Gt.e,{src:p}),(0,h.jsxs)($t.l,{children:[(0,h.jsx)(Jt.p,{titleText:i,children:i}),I&&(0,h.jsxs)(Ht.P,{children:[A.download&&(0,h.jsx)(Et._,{}),A.explicit&&(0,h.jsx)(Ct.g,{}),A.nineteen&&(0,h.jsx)(Nt.q,{className:ri.A.nineteen,size:16})]}),(0,h.jsx)(Yt.p,{children:(0,h.jsx)(Bt.l,{artists:a,spec:g})})]})]}),(0,h.jsx)(Xt.o,{ariaColIndex:2,children:(0,h.jsx)(Ft.g,{uri:o.uri,name:o.name,creatorUri:null==a||null===(r=a[0])||void 0===r?void 0:r.uri,spec:g,children:o.name})}),(0,h.jsxs)(Vt.l,{ariaColIndex:3,children:[(0,h.jsx)(Dt.d,{uri:t,spec:g}),(0,h.jsx)(Wt.P,{duration:n}),(0,h.jsx)(zt.Y,{menu:(0,h.jsx)(Lt.P,{uri:t,albumUri:o.uri,artists:a,contextUri:l}),label:c.Ru.get("more.label.track",i,P),spec:g})]})]})})})}),(function(e,r){return e.uri===r.uri})),ii=t(99517),ni=i.memo((function(e){var r=e.tracks,t=e.hasHeaderRow,n=void 0!==t&&t,a=e.nrTracksVisible,l=e.uri,s=(0,re.v)(l),u=(0,o.du)(s,"tracks").toURI(),d=(0,i.useMemo)((function(){return a?r.slice(0,a):r}),[a,r]),m=(0,_t.P)({uri:u,pages:[{items:r.map((function(e){return{type:Ot.c.TRACK,uri:e.uri,uid:null,provider:null}}))}]},{featureIdentifier:"profile",referrerIdentifier:"user_profile"}).usePlayContextItem,p=(0,i.useCallback)((function(e,r){var t,i,n,a=(0,Hr.g)(null==e||null===(t=e.albumOfTrack)||void 0===t||null===(t=t.coverArt)||void 0===t?void 0:t.sources,{desiredSize:40});return(0,h.jsx)(ti,{index:r,uri:(0,It.a)(e),duration_ms:e.duration.totalMilliseconds,name:e.name,artists:e.artists.items.map((function(e){return{uri:e.uri,name:e.profile.name}})),album:e.albumOfTrack,isPlayable:!0,isExplicit:(null===(i=e.contentRating)||void 0===i?void 0:i.label)===et.x7.Explicit,isMOGEFRestricted:(null===(n=e.contentRating)||void 0===n?void 0:n.label)===et.x7.NineteenPlus,imgUrl:(null==a?void 0:a.url)||"",contextUri:u,usePlayContextItem:m},r+e.uri)}),[u,m]),f=(0,i.useMemo)((function(){return[Rt.$.INDEX,Rt.$.TITLE_AND_ARTIST,Rt.$.ALBUM,Rt.$.DURATION]}),[]),g=(0,i.useCallback)((function(e){return{uri:e.uri}}),[]),v=(0,At.A)()?0:void 0;return(0,h.jsx)(Pt.pZ,{value:"user-top-tracks-tracklist",children:(0,h.jsx)(ii.S4,{ariaLabel:c.Ru.get("top_tracks_this_month"),renderRow:p,nrTracks:d.length,tracks:d,resolveItem:g,headerTop:v,hasHeaderRow:n,columns:f,columnPersistenceKey:"user-top-tracks-tracklist"})})}),(function(e,r){return e.tracks===r.tracks})),ai=i.memo((function(e){var r=e.tracks,t=e.title,n=e.tagline,a=e.seeAllUri,o=e.className,l=e.uri,s=e.spec,u=(0,wt.s)(),d=(0,i.useCallback)((function(){var e=s.titleLinkFactory().hitUiNavigate({destination:a});u.logInteraction(e)}),[u,a,s]),c=(0,i.useCallback)((function(){var e=s.titleLinkFactory().hitUiNavigate({destination:a});u.logInteraction(e)}),[u,a,s]);if(!r||0===r.totalCount||0===r.items.length)return null;var m=r.totalCount>4;return(0,h.jsxs)("section",{className:o,children:[(0,h.jsx)(kt.U,{title:t,tagline:n,seeAllUri:a,hasMoreElements:m,onClickTitle:d,onClickSeeAll:c}),(0,h.jsx)(Fr.r,{spec:s,children:(0,h.jsx)(ni,{tracks:r.items,uri:l,nrTracksVisible:4})})]})}),(function(e,r){return e.tracks===r.tracks}));function oi(e,r){switch(r.type){case"OPEN_MODAL":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!1};case"OPEN_MODAL_WITH_IMAGEPICKER":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!0};case"CLOSE_MODAL":return{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1};default:return e}}const li="J6PX6RfvHlA4BPp7_8sJ",si="DJCugGBTcU3io4Q28BHl",ui="vpTiIBeCfuGKOTj3Tzg6",di="eGAuBpyB1eqsyPKbaQU7",ci="GoG_UTK1uLaPCfhipeF0";var mi=18e5,pi=3e5,fi=(0,A.Mz)(Ur.mB,(function(e){return(null==e?void 0:e.images)||[]})),gi=function(e){var r,t,n,a=e.uri,l=e.isCurrentUser,u=null===(r=(0,R.d4)(Ur.mB))||void 0===r?void 0:r.uri,d=(0,R.d4)(Ur.Mn),f=(0,R.d4)(fi),b=(0,R.wA)(),y=(0,j.jE)(),k=(0,I.NC)(Jr.DGB,{loadingValue:!0}),A=(0,i.useMemo)((function(){return(0,Hr.g)(f)}),[f]),D=(t=(0,i.useReducer)(oi,{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1}),[(n=(0,x.A)(t,2))[0],n[1]]),M=(0,x.A)(D,2),L=M[0],F=L.isModalOpen,B=L.modalVariant,H=L.shouldOpenImagePicker,W=M[1],G=(0,v.Z)(g.E$,[{uri:a,playlists:10,artists:10,episodes:10}],{gcTime:mi,staleTime:pi}),$=G.data,Q=G.loading,z=G.queryKey,V=(0,s.V)();(0,Yr.N)(Xr.mc.OPERATION_COMPLETE,(function(){y.invalidateQueries({queryKey:z})})),(0,Lr.l)(Mr.UV.OPERATION_COMPLETE,(function(){y.invalidateQueries({queryKey:z})}));var q=null==$?void 0:$.public_playlists,Z=null==$?void 0:$.is_verified,X=null==$?void 0:$.recently_played_artists,Y=l?(null==A?void 0:A.url)||"":(null==$?void 0:$.image_url)||"",J=(0,re.v)(a),ee=(l?d:null==$?void 0:$.name)||"",te=(0,Sr.H)((null==$?void 0:$.image_url)||null),ie=(0,Br.r)(P._,{data:{uri:a}}),ne=ie.spec,ae=ie.logger,oe=(0,i.useMemo)((function(){return ne.sectionTopTracksFactory()}),[ne]),le=!V&&(!1!==(null==$?void 0:$.show_follows)||l),se=l&&k,ue=(0,v.Z)(g.mH,[a],{enabled:le,gcTime:mi,staleTime:pi}),de=ue.data,ce=ue.loading,me=null==de?void 0:de.profiles,pe=(0,v.Z)(g.SR,[a],{enabled:le,gcTime:mi,staleTime:pi}),fe=pe.data,ge=pe.loading,ve=null==fe?void 0:fe.profiles,he=null==me?void 0:me.some((function(e){return e.uri===u})),be=dt({includeTopArtists:se,includeTopTracks:se,topArtistsLimit:10,topTracksLimit:4}),ye=be.topArtists,xe=be.topTracks,je=be.loading,ke=(0,i.useCallback)((function(e){W({type:"CLOSE_MODAL"}),e&&(b((0,Dr.IE)(e.name)),b((0,Dr.ZQ)(e.image?[{url:e.image,height:null,width:null}]:[])))}),[W,b]),we=(0,i.useCallback)((function(){W({type:"OPEN_MODAL"});var e=ne.headerFactory().usernameFactory().hitUiReveal();ae.logInteraction(e)}),[ae,W,ne]),Re=(0,i.useCallback)((function(){W({type:"OPEN_MODAL_WITH_IMAGEPICKER"});var e=ne.headerFactory().profileImageFactory().hitUiReveal();ae.logInteraction(e)}),[ae,W,ne]),Ae=(0,i.useMemo)((function(){return[{url:Y}]}),[Y]),Ie=(0,i.useCallback)((function(){var e=ne.headerFactory().usernameFactory().hitUiReveal();ae.logInteraction(e)}),[ae,ne]),Pe=(0,i.useCallback)((function(e,r){if(r){var t=ne.headerFactory().followersLinkFactory().hitUiNavigate({destination:r});ae.logInteraction(t)}}),[ae,ne]),_e=(0,i.useCallback)((function(e,r){if(r){var t=ne.headerFactory().followersLinkFactory().hitUiNavigate({destination:r});ae.logInteraction(t)}}),[ae,ne]);if(!$||Q||ce||ge||je)return(0,h.jsx)(p.A,{hasError:!1,errorMessage:c.Ru.get("error.not_found.title.page")});var Oe=w()("contentSpacing",si),Te=le&&!(null==ve||!ve.length),Ee=le&&!(null==me||!me.length);return(0,h.jsxs)("div",{className:li,children:[(0,h.jsx)(C.Q,{children:ee}),(0,h.jsxs)(Gr.z,{backgroundColor:te,children:[(0,h.jsx)(S.h,{children:(0,h.jsx)(U.X,{text:ee})}),(0,h.jsx)(T.h,{menu:(0,h.jsx)(E.B,{uri:$.uri}),children:(0,h.jsx)($r.X,{children:(0,h.jsx)(N.M,{canEdit:l&&!$.edit_image_disabled,name:ee,images:Ae,onClick:Re,placeholderType:"user",shape:K.u.CIRCLE})})}),(0,h.jsxs)(Qr.Y,{children:[(0,h.jsx)(Kr.B,{children:Z?(0,h.jsx)(qr.M,{text:c.Ru.get("card.tag.profile")}):c.Ru.get("card.tag.profile")}),(0,h.jsx)(T.h,{menu:(0,h.jsx)(E.B,{uri:$.uri}),children:(0,h.jsx)(Vr.mm,{canEdit:l&&!$.edit_name_disabled,editTitle:c.Ru.get("playlist.edit-details.title"),onClick:we,children:ee})}),(0,h.jsx)(zr.t,{totalFollowers:$.followers_count,totalFollowing:$.following_count,publicPlaylists:$.total_public_playlists_count,userUri:a,onCreatorClick:Ie,onTotalFollowersClick:Pe,onTotalFollowingClick:_e,theyFollowUs:he})]})]}),(0,h.jsx)(jt,{openModal:we,spec:ne,logger:ae,name:ee,backgroundColor:te,isCurrentUser:l,uri:a}),(0,h.jsxs)(Fr.r,{spec:ne,children:[l&&(0,h.jsxs)(h.Fragment,{children:[null!==ye&&(0,h.jsx)(Zr.p,{className:Oe,total:ye.totalCount,title:c.Ru.get("top_artists_this_month"),tagline:c.Ru.get("only_visible_to_you"),seeAllUri:(0,o.Qj)(J,["top","artists"]).toURI(),id:"top-artists",index:0,children:ye.items.map((function(e,r){var t,i;return(0,h.jsx)(_.a,{index:r,uri:e.uri,name:e.profile.name,images:null!==(t=null===(i=e.visuals.avatarImage)||void 0===i?void 0:i.sources)&&void 0!==t?t:[]},e.uri)}))}),(0,h.jsx)(ai,{className:Oe,title:c.Ru.get("top_tracks_this_month"),tagline:c.Ru.get("only_visible_to_you"),seeAllUri:(0,o.Qj)(J,["top","tracks"]).toURI(),uri:a,tracks:xe,spec:oe})]}),(0,h.jsx)(Zr.p,{className:Oe,total:$.total_public_playlists_count,title:c.Ru.get("public_playlists"),seeAllUri:(0,o.Qj)(J,["playlists"]).toURI(),id:"playlists",index:1,children:null==q?void 0:q.map((function(e,r){return(0,h.jsx)(O.B,{index:r,uri:e.uri,name:e.name,images:[{url:(0,Wr.m)({imageUriOrUrl:e.image_url}),width:300,height:300}],authorName:e.owner_name,description:e.followers_count?c.Ru.get("user.followers",e.followers_count):""},e.uri)}))}),null!=X&&X.length?(0,h.jsx)(Zr.p,{className:Oe,total:null==X?void 0:X.length,title:c.Ru.get("recently_played_artists"),seeAllUri:(0,o.Qj)(J,["recently-played-artists"]).toURI(),id:"recently-played-artists",index:2,children:null==X?void 0:X.map((function(e,r){return(0,h.jsx)(_.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))}):null,Te?(0,h.jsx)(Zr.p,{className:Oe,title:c.Ru.get("followers"),total:null==ve?void 0:ve.length,seeAllUri:(0,o.Qj)(J,["followers"]).toURI(),id:"followers",index:3,children:null==ve?void 0:ve.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))}):null,Ee?(0,h.jsx)(Zr.p,{className:Oe,title:c.Ru.get("following"),total:null==me?void 0:me.length,seeAllUri:(0,o.Qj)(J,["following"]).toURI(),id:"following",index:4,children:null==me?void 0:me.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))}):null,l&&F&&("editProfile"===B?(0,h.jsx)(Nr,{uri:a,name:ee,image:Y,onClose:ke,shouldOpenImagePicker:H,userCapabilities:{edit_image:!(null!=$&&$.edit_image_disabled),edit_name:!(null!=$&&$.edit_name_disabled)}}):null)]})]})},vi=function(e){var r=e.uri,t=(0,v.Z)(g.Eo,[{uri:r}]),i=t.data,n=t.loading,a=t.error,o=i||{},l=o.public_playlists,s=o.total_public_playlists_count,u=void 0===s?0:s;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:c.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{className:"contentSpacing",total:u,title:c.Ru.get("public_playlists"),showAll:!0,fullPage:!0,rowGap:d.lT,children:null==l?void 0:l.map((function(e,r){return(0,h.jsx)(O.B,{index:r,uri:e.uri,name:e.name,authorName:e.owner_name,description:e.followers_count?c.Ru.get("user.followers",e.followers_count):"",images:[{url:(0,Wr.m)({imageUriOrUrl:e.image_url}),width:300,height:300}]},e.uri)}))})},hi=function(e){var r=e.uri,t=(0,v.Z)(g.sL,[{uri:r,limit:50}]),i=t.data,n=t.loading,a=t.error,o=null==i?void 0:i.artists;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:c.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{className:"contentSpacing",total:null==o?void 0:o.length,title:c.Ru.get("recently_played_artists"),showAll:!0,fullPage:!0,rowGap:d.lT,children:null==o?void 0:o.map((function(e,r){return(0,h.jsx)(_.a,{index:r,name:e.name,uri:e.uri,images:[{url:e.image_url}]},e.uri)}))})},bi=function(){var e=dt({includeTopArtists:!0,includeTopTracks:!1,topArtistsLimit:100,topTracksLimit:0}),r=e.topArtists,t=e.loading,i=e.error;return t?(0,h.jsx)(p.A,{hasError:null!==i,errorMessage:c.Ru.get("error.not_found.title.page")}):null===r?null:(0,h.jsx)(f.$,{className:"contentSpacing",total:r.items.length,title:c.Ru.get("top_artists_this_month"),tagline:c.Ru.get("only_visible_to_you"),showAll:!0,fullPage:!0,rowGap:d.lT,children:r.items.map((function(e,r){var t,i;return(0,h.jsx)(_.a,{index:r,uri:e.uri,name:e.profile.name,images:null!==(t=null===(i=e.visuals.avatarImage)||void 0===i?void 0:i.sources)&&void 0!==t?t:[]},e.uri)}))})},yi=function(e){return e.isCurrentUser?(0,h.jsx)(bi,{}):(0,h.jsx)(p.A,{hasError:!0,errorMessage:c.Ru.get("error.not_found.title.page")})},xi=function(e){var r=e.uri,t=dt({includeTopArtists:!1,includeTopTracks:!0,topArtistsLimit:0,topTracksLimit:100}),i=t.topTracks,n=t.loading,a=t.error;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:c.Ru.get("error.not_found.title.page")}):null===i?null:(0,h.jsxs)("div",{className:w()("contentSpacing",ui),children:[(0,h.jsxs)("div",{className:di,children:[(0,h.jsx)(F.E,{as:"h1",variant:"titleMedium",className:ci,children:c.Ru.get("top_tracks_this_month")}),(0,h.jsx)(F.E,{as:"p",variant:"bodySmall",children:c.Ru.get("only_visible_to_you")})]}),(0,h.jsx)(ni,{tracks:i.items,uri:r,hasHeaderRow:!0})]})},ji=function(e){var r=e.uri;return e.isCurrentUser?(0,h.jsx)(xi,{uri:r}):(0,h.jsx)(p.A,{hasError:!0,errorMessage:c.Ru.get("error.not_found.title.page")})};const ki=(0,i.memo)((function(){var e=(0,n.g)().userId,r=decodeURIComponent(void 0===e?"":e),t=(0,o.Qj)(r).toURI(),i=function(e){var r,t=(0,s.V)(),i=null===(r=(0,l.C)())||void 0===r?void 0:r.username;return!t&&i===e}(r);return(0,h.jsx)("section",{children:(0,h.jsxs)(n.BV,{children:[(0,h.jsx)(n.qh,{path:"playlists",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_PLAYLISTS,children:(0,h.jsx)(vi,{uri:t})})}),(0,h.jsx)(n.qh,{path:"top/tracks",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_TOP_TRACKS,children:(0,h.jsx)(ji,{uri:t,isCurrentUser:i})})}),(0,h.jsx)(n.qh,{path:"top/artists",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_TOP_ARTISTS,children:(0,h.jsx)(yi,{isCurrentUser:i})})}),(0,h.jsx)(n.qh,{path:"recently-played-artists",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_RECENTLY_PLAYED_ARTISTS,children:(0,h.jsx)(hi,{uri:t})})}),(0,h.jsx)(n.qh,{path:"following",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_FOLLOWING,children:(0,h.jsx)(y,{uri:t})})}),(0,h.jsx)(n.qh,{path:"followers",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_FOLLOWERS,children:(0,h.jsx)(b,{uri:t})})}),(0,h.jsx)(n.qh,{path:"/",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE,children:(0,h.jsx)(gi,{uri:t,isCurrentUser:i})})})]})})}))},29924:(e,r,t)=>{t.d(r,{C:()=>a});t(84008),t(50252);var i=t(45976),n=t(53921),a=function(){var e,r=(0,i.d4)((function(e){var r;return null===(r=e.session)||void 0===r?void 0:r.user}));return r?{type:n.c.USER,uri:r.uri,username:r.id,displayName:null!==(e=r.display_name)&&void 0!==e?e:null,images:r.images.map((function(e){return{url:e.url,width:e.width||void 0,height:e.height||void 0}}))}:null}},52782:(e,r,t)=>{t.d(r,{a:()=>i});var i=function(e){var r;return(null==e||null===(r=e.linked_from)||void 0===r?void 0:r.uri)||e.uri}},33677:(e,r,t)=>{t.d(r,{b:()=>o,g:()=>a});var i=t(26017),n=t(30758),a=function(e){return e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.error=2]="error",e}({});function o(e,r){var t=e?a.loading:a.error,o=(0,n.useState)(t),l=(0,i.A)(o,2),s=l[0],u=l[1];return(0,n.useEffect)((function(){var t=function(){u(a.loaded)},i=function(){u(a.error)};if(!e)return u(a.error),function(){};u(a.loading);var n=document.createElement("img");return n.addEventListener("load",t),n.addEventListener("error",i),n.setAttribute("src",e),r&&n.setAttribute("srcSet",r),function(){n.removeEventListener("load",t),n.removeEventListener("error",i)}}),[e,r]),s}}}]);
//# sourceMappingURL=xpui-routes-profile.js.map