"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6080],{67709:(e,t,r)=>{r.r(t),r.d(t,{default:()=>qe});var i,n=r(81226),a=(r(94238),r(69645),r(93902),r(7410),r(30758)),l=r(8421),o=r(59081),s=r(27890),u=r(46317),c=r(79260),A=r(30405),d=(r(38858),r(62172),r(89731)),E=r(42379),g=(r(51945),r(39921),r(96792)),p=r(46567),f=function(e){return e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER",e}({}),D={"show-alphabetical":f.SHOW_ALPHABETICAL,"book-alphabetical":f.BOOK_ALPHABETICAL,"episode-alphabetical":f.EPISODE_ALPHABETICAL,"playlist-alphabetical":f.PLAYLIST_ALPHABETICAL,"album-alphabetical":f.ALBUM_ALPHABETICAL,"recently-added":f.ADDED_AT,"creator-name":f.CREATOR_NAME,"creator-name-alphabetical":f.CREATOR_NAME_ALPHABETICAL,"album-creator-name":f.ALBUM_CREATOR_NAME,"recently-played":f.RECENTLY_PLAYED,"playlist-most-relevant":f.MOST_RELEVANT,"playlist-custom-order":f.CUSTOM_ORDER},C=(i={},(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)(i,f.RECENTLY_PLAYED,{key:"recently-played",get value(){return o.Ru.get("collection.sort.recently-played")}}),f.ADDED_AT,{key:"recently-added",get value(){return o.Ru.get("collection.sort.recently-added")}}),f.SHOW_ALPHABETICAL,{key:"show-alphabetical",get value(){return o.Ru.get("collection.sort.alphabetical")}}),f.BOOK_ALPHABETICAL,{key:"book-alphabetical",get value(){return o.Ru.get("collection.sort.alphabetical")}}),f.EPISODE_ALPHABETICAL,{key:"episode-alphabetical",get value(){return o.Ru.get("collection.sort.alphabetical")}}),f.PLAYLIST_ALPHABETICAL,{key:"playlist-alphabetical",get value(){return o.Ru.get("collection.sort.alphabetical")}}),f.ALBUM_CREATOR_NAME,{key:"album-creator-name",get value(){return o.Ru.get("collection.sort.creator")}}),f.CREATOR_NAME,{key:"creator-name",get value(){return o.Ru.get("collection.sort.creator")}}),f.CREATOR_NAME_ALPHABETICAL,{key:"creator-name-alphabetical",get value(){return o.Ru.get("collection.sort.alphabetical")}}),f.ALBUM_ALPHABETICAL,{key:"album-alphabetical",get value(){return o.Ru.get("collection.sort.alphabetical")}}),(0,n.A)((0,n.A)(i,f.MOST_RELEVANT,{key:"playlist-most-relevant",get value(){return o.Ru.get("collection.sort.most-relevant")}}),f.CUSTOM_ORDER,{key:"playlist-custom-order",get value(){return o.Ru.get("collection.sort.custom-order")}}));f.ADDED_AT,f.ALBUM_ALPHABETICAL,f.CREATOR_NAME,(0,n.A)((0,n.A)((0,n.A)({},f.ADDED_AT,{field:E.uY.ADDED_AT,order:E.xB.DESC}),f.ALBUM_ALPHABETICAL,{field:E.uY.NAME,order:E.xB.ASC}),f.CREATOR_NAME,{field:E.uY.ARTIST_NAME,order:E.xB.ASC});f.ADDED_AT,f.CREATOR_NAME_ALPHABETICAL,(0,n.A)((0,n.A)({},f.ADDED_AT,{field:E.af.ADDED_AT,order:E.xB.DESC}),f.CREATOR_NAME_ALPHABETICAL,{field:E.af.NAME,order:E.xB.ASC});f.ADDED_AT,f.SHOW_ALPHABETICAL,(0,n.A)((0,n.A)({},f.ADDED_AT,{field:E.WW.ADDED_AT,order:E.xB.DESC}),f.SHOW_ALPHABETICAL,{field:E.WW.NAME,order:E.xB.ASC});f.ADDED_AT,f.BOOK_ALPHABETICAL,(0,n.A)((0,n.A)({},f.ADDED_AT,E.Ev.ADDED_AT),f.BOOK_ALPHABETICAL,E.Ev.NAME);f.MOST_RELEVANT,f.RECENTLY_PLAYED,f.ADDED_AT,f.PLAYLIST_ALPHABETICAL,f.CUSTOM_ORDER,(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},f.ADDED_AT,{field:p.nw.ADDED_AT,order:p.xB.DESC}),f.RECENTLY_PLAYED,{field:p.nw.RECENTLY_PLAYED,order:p.xB.ASC}),f.PLAYLIST_ALPHABETICAL,{field:p.nw.NAME,order:p.xB.ASC}),f.MOST_RELEVANT,{field:p.nw.RELEVANCE,order:p.xB.DESC}),f.CUSTOM_ORDER,void 0);f.ADDED_AT,f.ADDED_AT,f.ADDED_AT,f.MOST_RELEVANT,f.ADDED_AT;var T=r(86070),L=function(e){return e===f.ADDED_AT?E.xB.DESC:E.xB.ASC},y={option:f.ADDED_AT,order:E.xB.DESC},h=(0,n.A)((0,n.A)({},E.xB.ASC,E.xB.DESC),E.xB.DESC,E.xB.ASC),m=(0,a.createContext)({setSortState:function(){throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:y}),_=a.memo((function(e){var t=e.uri,r=e.children,i=e.defaultSortOption,n={option:i,order:L(i)};return(0,T.jsx)(d.E,{uri:t,defaultState:n,sortContext:m,children:r})})),P=r(73576),b=r(92373),x=r(80380),R=r(97150),S=r(2489),O=r(38675),v=r(85107),I=r(59285),B=(r(83892),r(73690)),j=r(78028),M=r(19008),N=r(82035),k=(r(84008),r(50252),r(77700)),w=a.memo((function(e){var t,r=e.sortOptions,i=e.onSort,n=(0,a.useContext)(m),l=n.sortState,o=n.setSortState,s=(0,a.useCallback)((function(e){var t=D[e];null==i||i(t),o(function(e,t,r){return t!==e?{option:e,order:L(e)}:{option:e,order:h[r]}}(t,l.option,l.order))}),[i,o,l.option,l.order]),u=r.map((function(e){return C[e]})),c=C[l.option];return(0,T.jsx)(k.g,{options:u,onSelect:s,selected:c,sortOrder:(t=l.order,t===E.xB.ASC?g.H.ASC:g.H.DESC)})}));const H="gWfUTJg52F5eTzM6M82w";var U=a.memo((function(e){var t=e.canSort,r=e.canFilter,i=e.filterPlaceholder,n=e.sortOptions,l=(0,N.r)(j.E,{}),o=l.spec,s=l.logger,u=(0,a.useCallback)((function(){s.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[s,o]),c=(0,a.useCallback)((function(){s.logInteraction(o.filterFieldFactory().hitClearFilter())}),[s,o]);return(0,T.jsxs)("div",{className:H,children:[r?(0,T.jsx)(a.Suspense,{fallback:null,children:(0,T.jsx)(M.S,{placeholder:i,onFilter:u,onClear:c})}):null,t?(0,T.jsx)(w,{sortOptions:n}):null]})})),Y=r(78104),W=r(87238),F=r(27672),z=r(530),K=(r(98168),r(67560),(0,n.A)((0,n.A)((0,n.A)({},E.ci.NAME,c.lU.TITLE),E.ci.SHOW_NAME,c.lU.SHOW),E.ci.ADDED_AT,c.lU.ADDED_AT)),V=[f.ADDED_AT,f.CREATOR_NAME,f.EPISODE_ALPHABETICAL],q=(0,n.A)((0,n.A)((0,n.A)({},f.ADDED_AT,E.ci.ADDED_AT),f.CREATOR_NAME,E.ci.SHOW_NAME),f.EPISODE_ALPHABETICAL,E.ci.NAME);var G=function(e,t){if(function(e){return V.includes(e)}(e))return{field:q[e],order:t}},Q=function(e,t){if(V.includes(e))return function(e){if(null!=e&&e.field){var t=K[e.field];if(t)return c.SL[t].map((function(t){return e.order?"".concat(t," ").concat(e.order):t})).join(",")}}(G(e,t))};const X="RuBJDnBql7qpA7bDaV6A",Z="wmGcau34_eXQOX37kUTc",J="Yxy9nPtcdgz7zbBsWVKg";var $=function(e){var t=e.metadata,r=e.canSort,i=e.backgroundColor,n=e.isPlaying,a=e.isOnline,l=e.togglePlay,s=(0,Y.t)(),u=t.uri,c=t.name,A=t.totalLength>0,d=(0,z.j)();return(0,T.jsx)(W.E,{backgroundColor:i,children:(0,T.jsxs)(F.S,{children:[A&&(0,T.jsx)(B.D,{onClick:function(){return l()},isPlaying:n,size:d,uri:u,disabled:!a,ariaPlayLabel:o.Ru.get("playlist.a11y.play",c),ariaPauseLabel:o.Ru.get("playlist.a11y.pause",c)}),r&&(0,T.jsx)("div",{className:J,children:(0,T.jsx)(U,{canSort:s.getCapabilities().canSort,canFilter:s.getCapabilities().canFilter,filterPlaceholder:o.Ru.get("playlist.search_in_playlist"),sortOptions:V})})]})})},ee=r(93209),te=r(95514),re=r(26017),ie=r(16247),ne=r.n(ie),ae=(r(60905),r(63619),r(5280),r(34318),r(41679),r(81443),r(74457),r(6844),r(77458),r(50247),r(88190),r(19082)),le=r(34478),oe=r(39418),se=r(81260),ue=r(9593),ce=(r(51725),r(1409)),Ae=r(36092),de=r(84470),Ee=r(78338),ge=r(12209),pe=r(77483),fe=r(94007);const De="sxxBMk7G1OGo4uYIgPdQ",Ce="wpP88qSwGpDQbc_ogyXW";var Te=r(69760),Le=r(54509),ye=r(34293),he=r(19269),me=r(179),_e=r(53313),Pe=r(53921),be=r(93928),xe=r(76157),Re=r(87440),Se=r(19919),Oe={small:64,standard:300,large:640,xlarge:1024},ve=a.memo((function(e){var t,r,i,n,l,o,s,u,c,d,E=e.index,g=e.contextUri,p=e.episode,f=e.onRemove,D=e.usePlayContextItem,C=(0,a.useRef)(p.duration.milliseconds-p.timeLeft.milliseconds),L=p.uri,y=(0,a.useState)(0===p.timeLeft.milliseconds),h=(0,re.A)(y,2),m=h[0],_=h[1],b=(0,a.useContext)(A.g).filter,x=(0,Te.P)(),S=x.draggable,O=x.onDragStart,v=(0,se.y)(),I=(0,Le.W)(),B=(0,me.A)(L,!0),j=(0,re.A)(B,1)[0],M=(0,Re.g)(p.uri,p.isPlayable),N=(0,P.n)(),k=D({uri:L,index:E}),w=k.isPlaying,H=k.isActive,U=k.togglePlay,Y=(0,_e.S)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===L})),W=(0,re.A)(Y,1)[0];(0,a.useEffect)((function(){w&&(C.current=W)}),[w,W]);var F=(0,R.P)({uri:L,pages:[{items:[{type:Pe.c.EPISODE,uri:L,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),z=F.isPlaying,K=F.isActive,V=F.togglePlay;(0,a.useEffect)((function(){j||f()}),[j,f]),(0,a.useEffect)((function(){w||p.duration.milliseconds<=C.current&&_(!0)}),[w,p.duration.milliseconds]);var q=(0,a.useCallback)((function(e){e||(C.current=0),_(e)}),[]),G=(0,a.useCallback)((function(e){var t;if(e.target===e.currentTarget){var r="".concat(p.name);null!==(t=p.show)&&void 0!==t&&t.name&&(r+=" â€¢ ".concat(p.show.name)),O(e,{itemUris:[L],dragLabelText:r,contextUri:g})}}),[g,p.name,null===(t=p.show)||void 0===t?void 0:t.name,L,O]),Q=(0,a.useCallback)((function(){I({type:"click",targetUri:L,intent:"navigate"})}),[L,I]),X=(0,a.useCallback)((function(){N?(I({type:"click",intent:w?"pause":"play"}),U()):(I({type:"click",intent:z?"pause":"play"}),V())}),[N,w,z,I,U,V]),Z=(0,a.useCallback)((function(e){return(0,T.jsx)(xe.M,{searchWords:[b],textToHighlight:e})}),[b]),J=null!==(r=null===(i=p.podcastSubscription)||void 0===i?void 0:i.isPaywalled)&&void 0!==r&&r,$=null!==(n=null===(l=p.podcastSubscription)||void 0===l?void 0:l.isUserSubscribed)&&void 0!==n&&n,ee=(0,be.b)({isExplicit:p.isExplicit,isMOGEFRestricted:p.is19PlusOnly,isPaywalled:J}).badges,te=!1;(H||!N&&K)&&(te=!0);var ie=(0,ce.NC)(Se.cKd,{loadingValue:!1});return j?(0,T.jsxs)(le.pZ,{value:"row",index:E,children:[(0,T.jsx)("hr",{className:De,"aria-hidden":!0}),(0,T.jsx)(Ae.h,{menu:(0,T.jsx)(de.b,{uri:L,contextUri:g,showUri:null===(o=p.show)||void 0===o?void 0:o.uri,isPlayed:m,onMarkAsPlayed:q}),children:ie?(0,T.jsx)(ge.k,{requestId:p.requestId,index:E,uri:L,uid:L,size:v,images:p.images.map((function(e){return{url:e.url,width:e.width||(e.label?Oe[e.label]:null),height:e.height||(e.label?Oe[e.label]:null)}})),isPaywalled:J,isUserSubscribed:$,name:p.name,highlightText:Z,showName:null===(s=p.show)||void 0===s?void 0:s.name,showUri:null===(u=p.show)||void 0===u?void 0:u.uri,description:p.description,isPlayable:M,fullyPlayed:m,durationMs:p.duration.milliseconds,releaseDate:p.release.date||"",resumePositionMs:C.current,draggable:S,handleDragStart:G,handlePlaybackClick:X,handleClick:Q,isCurrentlyPlaying:te,isPlaying:N?w:z,position:te?W:void 0,episodeSharingInfo:null,onMarkAsPlayed:q,badges:(0,T.jsxs)(T.Fragment,{children:[ee.explicit&&(0,T.jsx)(ye.g,{}),ee.paid&&(0,T.jsx)(fe.K,{}),ee.nineteen&&(0,T.jsx)(he.q,{size:16})]}),playButtonWrapper:function(e){var t;return(0,T.jsx)(pe.f,{enabled:J&&!$,showUri:(null===(t=p.show)||void 0===t?void 0:t.uri)||void 0,children:e})}}):(0,T.jsx)(Ee.R,{requestId:p.requestId,index:E,uri:L,uid:L,size:v,images:p.images.map((function(e){return{url:e.url,width:e.width||(e.label?Oe[e.label]:null),height:e.height||(e.label?Oe[e.label]:null)}})),isPaywalled:J,isUserSubscribed:$,name:p.name,highlightText:Z,showName:null===(c=p.show)||void 0===c?void 0:c.name,showUri:null===(d=p.show)||void 0===d?void 0:d.uri,description:p.description,isPlayable:M,fullyPlayed:m,durationMs:p.duration.milliseconds,releaseDate:p.release.date||"",resumePositionMs:C.current,handleDragStart:G,handlePlaybackClick:X,handleClick:Q,isCurrentlyPlaying:te,isPlaying:N?w:z,position:te?W:void 0,episodeSharingInfo:null,onMarkAsPlayed:q,badges:(0,T.jsxs)(T.Fragment,{children:[ee.explicit&&(0,T.jsx)(ye.g,{}),ee.paid&&(0,T.jsx)(fe.K,{}),ee.nineteen&&(0,T.jsx)(he.q,{size:16})]}),playButtonWrapper:function(e){var t;return(0,T.jsx)(pe.f,{enabled:J&&!$,showUri:(null===(t=p.show)||void 0===t?void 0:t.uri)||void 0,children:e})}})})]}):null}));function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=a.memo((function(e){var t=e.contextUri,r=e.usePlayContextItem,i=(0,a.useContext)(x.Z),l=(0,a.useContext)(m).sortState,o=(0,a.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),s=(0,re.A)(o,2),u=s[0],c=s[1],d=(0,a.useRef)(!1),E=(0,a.useRef)(0),g=(0,a.useRef)(0),p=(0,a.useContext)(A.g).filter,f=(0,a.useCallback)((function(){g.current++}),[]),D=(0,ue.x)((0,n.A)((0,n.A)({},oe.E.MEDIUM,0),oe.E.LARGE,600)),C=D.ref,L=D.breakpoint,y=(0,a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){var e=(0,te.A)(ne().mark((function e(t){var r;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getEpisodes({offset:t-g.current,limit:50,sort:G(l.option,l.order),filter:p});case 2:return r=e.sent,g.current=0,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=E.current;null!==r&&(d.current||(d.current=!0,t(Number(r)).then((function(t){c((function(i){var n=Number(t.offset)+t.items.length,a=e?[]:(0,ee.A)(i.items);return a.splice.apply(a,[Number(r),t.items.length].concat((0,ee.A)(t.items))),E.current=n<t.totalLength?n:null,Be(Be({},t),{},{items:a})})),d.current=!1}))))}),[p,i,l]);return(0,a.useEffect)((function(){E.current=0,y(!0)}),[y]),(0,T.jsx)(se.o.Provider,{value:L,children:(0,T.jsx)(le.pZ,{value:"track-list",children:(0,T.jsx)("div",{ref:C,children:(0,T.jsx)(ae._,{onReachBottom:y,triggerOnInitialLoad:!0,children:u.items.map((function(e,i){return(0,T.jsx)("div",{className:Ce,children:(0,T.jsx)(ve,{index:i,episode:e,contextUri:t,onRemove:f,usePlayContextItem:r},"".concat(e.uri,"/").concat(i))},"".concat(i).concat(e.uri))}))})})})})})),Me=r(54925),Ne=r(54212),ke=r(19968),we=r(78227),He=r(82930),Ue=r(58701),Ye=r(98849),We=r(73704),Fe=r(11182),ze=r(32995),Ke=function(e){var t=e.metadata,r=e.backgroundColor,i=e.isPlaying,n=e.isOnline,l=e.togglePlay,s=t.uri,u=t.name,c=t.images,A=t.totalLength,d=t.owner,E=(0,a.useMemo)((function(){return{id:d.username,uri:d.uri,name:d.username,displayName:d.displayName||void 0,images:d.images||[]}}),[d]);return(0,T.jsxs)(He.z,{backgroundColor:r,children:[(0,T.jsxs)(Ne.h,{children:[(0,T.jsx)(B.D,{size:"medium",onClick:function(){return l()},isPlaying:i,uri:s,disabled:!n,ariaPlayLabel:o.Ru.get("playlist.a11y.play",u),ariaPauseLabel:o.Ru.get("playlist.a11y.pause",u)}),(0,T.jsx)(ke.X,{text:u})]}),(0,T.jsx)(Ue.K,{images:c,name:u,shape:we.u.ROUNDED_CORNERS,renderImage:function(){return(0,T.jsx)(ze.b,{})}}),(0,T.jsxs)(Ye.Y,{children:[(0,T.jsx)(Me.E,{variant:"bodySmallBold",children:o.Ru.get("playlist")}),(0,T.jsx)(Fe.mm,{canEdit:!1,onClick:function(){},children:u}),(0,T.jsx)(We.t,{creators:[E],totalItems:A,hasEpisodes:!0})]})]})},Ve=function(e){var t=e.metadata,r=e.canSort,i=(0,b.z)("#006450"),u=(0,P.n)(),d=(0,a.useContext)(m).sortState,E=(0,a.useContext)(A.g).filter,g=(0,R.P)({uri:t.uri,metadata:(0,n.A)((0,n.A)({},S.W.SORTING_CRITERIA,Q(d.option,d.order)),S.W.FILTERING_PREDICATE,(0,c.ly)(E))},{featureIdentifier:"your_library",referrerIdentifier:"your_library"},{shuffle:!1,repeat:O.p.REPEAT_NONE}),p=g.isPlaying,f=g.togglePlay,D=g.usePlayContextItem;return(0,T.jsxs)("section",{className:Z,"data-testid":"your-episodes-page",children:[(0,T.jsx)(v.Q,{children:o.Ru.get("sidebar.your_episodes")}),(0,T.jsx)(Ke,{metadata:t,backgroundColor:i,isPlaying:p,isOnline:u,togglePlay:f}),(0,T.jsxs)("div",{className:X,children:[(0,T.jsx)($,{metadata:t,backgroundColor:i,isPlaying:p,isOnline:u,togglePlay:f,canSort:r}),(0,T.jsx)("div",{className:"contentSpacing",children:t.totalLength>0?(0,T.jsx)(je,{contextUri:t.uri,usePlayContextItem:D}):(0,T.jsx)(s.p,{message:o.Ru.get("collection.empty-page.episodes-subtitle"),title:o.Ru.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:o.Ru.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,T.jsx)(l.P,{"aria-hidden":"true"})})})]})]})};const qe=(0,a.memo)((function(){var e=(0,a.useContext)(x.Z).getCapabilities(),t=(0,I.u)();return t?(0,T.jsx)(_,{uri:t.uri,defaultSortOption:f.ADDED_AT,children:(0,T.jsx)(A.s,{uri:t.uri,children:(0,T.jsx)(Ve,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,T.jsx)(u.A,{hasError:!1,errorMessage:o.Ru.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map