"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{65485:(e,t,n)=>{n.d(t,{u:()=>p});var r=n(97500),i=n.n(r),a=n(78370),s=n(38641),l=n(43407),o=n(54509),c=n(91650),u=n(15514),d=n(12493),m=n(86070),p=function(e){var t=e.uri,n=e.src,r=e.playAriaLabel,p=e.onClick,f=e.isPlaying,v=e.isActive,b=e.isLocked,x=e.isEpisode,y=e.isVideo,h=e.spec,g=(0,o.W)(),j=(0,l.s)(),A=(0,a.YQ)((function(e){var n;if(g({type:"click",intent:f?"pause":"play"}),h){var r,i=h.playbackButtonFactory();r=v&&f?i.hitPause({itemToBePaused:t}):v&&!f?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),n=j.logInteraction(r)}p(e,n)}),s.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,m.jsx)(u.e,{src:n,isEpisode:x,isVideo:y}),(0,m.jsx)(c.x,{className:i()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:A,isPlaying:f,isLocked:b,playAriaLabel:r})]})}},14604:(e,t,n)=>{n.r(t),n.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>v});var r=n(54925),i=n(34848),a=n(59081),s=n(7104),l=n(43407),o=n(22865),c=n(12732),u=n(86070);const d=function(e){var t=e.artistImageUrl,n=e.artistName,d=e.artistConcertsUri,m=e.spec,p=(0,l.s)(),f=(0,o.t)(m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&n&&d?(0,u.jsxs)("section",{ref:f,className:"contentSpacing",children:[(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:a.Ru.get("concerts")}),(0,u.jsx)("div",{className:c.A.cards,children:(0,u.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,u.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,u.jsxs)("div",{className:c.A.cardContent,children:[(0,u.jsx)(r.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:a.Ru.get("concerts_on_tour")}),(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:n}),(0,u.jsx)(s.A,{to:d,className:c.A.cardLink,children:(0,u.jsx)(i.n,{as:"span",size:"small",onClick:function(){var e=m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});p.logInteraction(e)},className:c.A.cardButton,children:a.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=n(37686),p=n(28937),f=new m.l("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),v=function(e,t){return(0,p.I)(f,e,t)}},9982:(e,t,n)=>{n.r(t),n.d(t,{default:()=>qa});var r=n(93209),i=n(26017),a=(n(98168),n(94238),n(93752),n(6990),n(60850),n(67560),n(84008),n(21256),n(10459),n(83892),n(69645),n(39782),n(49932),n(9981),n(61689),n(36490),n(51168),n(88402),n(93902),n(7410),n(49604),n(50252),n(22081),n(13903),n(3794),n(92063),n(32440),n(52767),n(41859),n(4207),n(64334),n(9433),n(26308),n(84815),n(30758)),s=n(45976),l=n(61022),o=n(54925),c=n(1409),u=n(90059),d=n(51519),m=n(59081),p=n(77045),f=(n(54436),n(79443),n(64992),n(57703)),v=(n(60905),n(63619),n(41679),n(81443),n(74457),n(6844),n(77458),n(50247),n(88190),n(81226)),b=(n(11141),n(2264),n(86070)),x=function(e,t,n){return{event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(n),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}},y=function(e){var t=e.clickTracking,n=e.clickThrough,r=e.thirdPartyImpression,l=e.impression,c=e.logoUrl,u=e.advertiserName,d=e.creativeId,p=e.lineItemId,v=(0,s.wA)(),y=(0,a.useState)(!1),h=(0,i.A)(y,2),g=h[0],j=h[1];return(0,a.useEffect)((function(){return v((0,f.tb)()),v((0,f.i2)(x("event_viewed",d,p))),function(){v((0,f.zV)())}}),[v,d,p]),(0,b.jsxs)("div",{className:"sponsor-container",children:[(0,b.jsx)(o.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:m.Ru.get("playlist.presented_by",u)}),(0,b.jsxs)("div",{className:"sponsor-logo",children:[(0,b.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:n,onClick:function(){v((0,f.i2)(x("event_clicked",d,p))),j(!0)},children:(0,b.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:c,alt:u,"data-ta-id":"sponsor-logo"})}),(0,b.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),r&&(0,b.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:r,alt:""}),g&&(0,b.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:t,alt:""})]})]})};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.playlistUri,n=(0,s.wA)(),r=(0,s.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(t)}));return(0,a.useEffect)((function(){r||n((0,f.uP)(t))}),[n,t,r]),r?(0,b.jsx)("div",{children:(0,b.jsx)(y,g({},r))}):null},A=function(e){var t=e.playlistUri,n=(0,s.wA)(),r=(0,s.d4)((function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")})),i=(0,s.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd}));(0,a.useEffect)((function(){r||n((0,f.uU)())}),[n,r]);var l=i||r&&function(e,t){var n=Date.now()/1e3,r=e.split(":"),i=r[r.length-1];return t.some((function(e){var t=e.playlistId,r=e.endTime,a=e.startTime;return t===i&&n>=a&&n<(r||n+1)}))}(t,r);return l?(0,b.jsx)(j,{playlistUri:t}):null},R=n(91297),k=n(85107),C=n(10203),O=n(32303),T=n(179);const P="hOOwEKqNuXrNvOCB1SgZ",S="csEdkIN9z2LjJIuZraqz";var E=function(e){var t=e.uri,n=(0,T.A)(t),r=(0,i.A)(n,2),s=r[0],c=r[1],u=(0,l.Zp)(),d=(0,a.useCallback)((function(){c(!1),u("/",{replace:!0})}),[u,c]);return(0,b.jsxs)("div",{className:P,children:[(0,b.jsx)(C.b,{size:"xxlarge"}),(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(o.E,{as:"p",variant:"titleSmall",children:m.Ru.get("forbidden-page.title")}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",children:m.Ru.get("forbidden-page.description")})]}),s&&(0,b.jsx)(O.$,{colorSet:"invertedLight",onClick:d,children:m.Ru.get("remove_from_your_library")})]})},w=n(46317),I=n(48716),N=n(79260),L=n(52786),_=n(60120),U=n(35960),D=n(88212),M=n(14604),B=n(89077),F=n(69760),V=n(54509),z=n(73576),q=n(66959),W=n(78370),$=n(43724),H=n(74530),K=n(83451),Q=n(48719),G=["meta+v"];var Y=n(59767),J=n(19919),X=n(13147),Z=n(10397),ee=n(71658),te=n(17941),ne=n(28937),re=n(97150),ie=(n(38858),n(62172),n(2489)),ae=n(83602),se=n(84838),le=(0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)({},se.n.TITLE,["title","original_index"]),se.n.ADDED_BY,["added_by","original_index"]),se.n.ADDED_AT,["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"]),se.n.ARTIST,["artist_name","album_title","album_disc_number","album_track_number","original_index"]),se.n.ALBUM,["album_title","album_disc_number","album_track_number","original_index"]),se.n.DURATION,["duration","album_title","album_disc_number","album_track_number","original_index"]);function oe(e,t){void 0!==t&&(e.metadata||(e.metadata={}),e.metadata[ie.W.SORTING_CRITERIA]=function(e){var t=e.field,n=e.order,r=le[t];if(void 0===r||n!==ae.x.ASC&&n!==ae.x.DESC)throw new Error("Invalid sort params!");return r.map((function(e,t){return n?"".concat(e," ").concat(t>0?ae.x.ASC:n):e})).join(",")}(t))}var ce=n(27112),ue=(0,v.A)({},ce.H.TEXT,"text"),de=(0,v.A)({},ce.t.CONTAINS,"=^#");function me(e,t){void 0!==(null==t?void 0:t.value)&&(e.metadata||(e.metadata={}),e.metadata[ie.W.FILTERING_PREDICATE]=function(e){var t=e.field,n=e.operator,r=e.value;if(t!==ce.H.TEXT||n!==ce.t.CONTAINS)throw new Error("Invalid filter params!");var i=ue[t],a=de[n];return"".concat(i," ").concat(a,' "').concat(r,'"')}(t))}var pe=n(84791);var fe=n(21746),ve=n(51097),be=n(28480),xe=n(82035),ye=n(17175),he=n(95514),ge=n(16247),je=n.n(ge),Ae=n(48291),Re=n(30278);n(85367),n(96358),n(5280);function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ce=[],Oe=function(e){var t,n=(null===(t=Ce.find((function(t){return t.key===e})))||void 0===t?void 0:t.heights)||{},r=(0,a.useCallback)((function(t){if(e){var n=Ce.findIndex((function(t){return t.key===e}));-1===n?Ce.push({key:e,heights:t}):(Ce[n].heights=t,Ce.push(Ce.splice(n,1)[0])),Ce.length>10&&Ce.shift()}}),[e]),i=(0,a.useRef)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n));return(0,a.useEffect)((function(){return function(){r(i.current)}}),[r]),i.current},Te=function(e,t){for(var n=[],r=e,i=t;r>0;){var a=Math.ceil(r/i);n.push({first:e-r,nrItems:a}),r-=a,i--}return n};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function e(t){var n,r,i=t.itemsInNode,a=t.renderItem,s=t.renderPlaceholder,l=t.estimatedHeight,o=t.scrollNodeRef,c=t.nrRowsOverscan,u=void 0===c?10:c,d=t.nrInitialInView,m=void 0===d?0:d,p=t.firstIndex,f=t.heights,v=t.fanOut,x=void 0===v?2:v,y=(0,Re.Wx)({root:o.current,rootMargin:"".concat(u*l,"px 0px"),initialInView:p<m}),h=y.ref,g=y.inView,j=y.entry,A="".concat(p,"-").concat(i);null!==(n=f[A])&&void 0!==n||(f[A]=l*i),null!=j&&null!==(r=j.boundingClientRect)&&void 0!==r&&r.height&&(f[A]=j.boundingClientRect.height);var R=f[A];return 0===i?null:g?1===i?(0,b.jsx)("div",{ref:h,role:"presentation",children:a(p,R)}):(0,b.jsx)("div",{ref:h,role:"presentation",children:Te(i,x).map((function(n,r){var i=n.first,a=n.nrItems;return(0,b.jsx)(e,Se(Se({},t),{},{itemsInNode:a,firstIndex:p+i}),r)}))}):(0,b.jsx)("div",{ref:h,role:"presentation",children:s("".concat(R,"px"))})},we=function(e){var t=Oe(e.persistanceKey);return(0,b.jsx)(Ee,Se(Se({},e),{},{itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView}))},Ie=n(39049),Ne=n(33093),Le=n(9867),_e=n(17450),Ue=n(88666),De=n(21581),Me=(n(51725),n(61369),n(23099),n(97500)),Be=n.n(Me),Fe=n(61429),Ve=n(34848),ze=n(56142),qe=n(76558),We=n(11156),$e=n(60828),He=n(36092),Ke=n(83800),Qe=n(7104),Ge=n(51372),Ye=n(31332),Je=n(29729),Xe=n(10681),Ze=n(55074),et=n(98111),tt=n(9800),nt=n(84747),rt=n(53313),it=n(66301),at=n(43407),st=n(21132),lt=n(12074),ot=n(74030),ct=n(78041),ut=n(80049),dt=n(21560),mt=n(39418),pt=n(81260),ft="small";const vt="ci11tAmTK1LnxThQkXPy",bt="_2sJPwAAp1wY1Ftke6iFe",xt="yuNzasMLs7hvemHI4d8Q",yt="abYR6tZoE7BdzThmWTb0",ht="GOcKQxqNMhGzbGiAXBig",gt="yFQjuDAhri_egM1pwn70";var jt=["breakpoint","className","showSeparator"];function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rt=(0,a.memo)((function(e){var t=e.breakpoint,n=e.className,r=e.showSeparator,i=(0,_e.A)(e,jt);return(0,b.jsx)(dt.v,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:Be()(n,vt,(0,v.A)({},gt,r)),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===ft?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===ft?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px"},i))})),kt=n(49674),Ct=n(8218),Ot=function(e){var t=e.description,n=e.children;return(0,b.jsxs)("div",{className:yt,children:[t&&(0,b.jsx)(kt.v,{lineClamp:2,as:"div",dir:"auto",children:(0,b.jsx)(Ct.q,{asTextContent:!0,html:t})}),n]})},Tt=n(23401),Pt=function(e){var t=e.isPlaying,n=e.onClickPlay,r=e.name,i=e.authorName,a=e.isLocked,s=e.children;return(0,b.jsxs)("div",{className:ht,children:[(0,b.jsx)("div",{className:bt,children:s}),(0,b.jsx)(Tt.R,{size:"small",version:Tt.H.secondary,onClick:n,isPlaying:t,ariaPlayLabel:m.Ru.get("tracklist.a11y.play",r,i),ariaPauseLabel:m.Ru.get("tracklist.a11y.pause",r,i),locked:a})]})},St=n(78227),Et=n(85262),wt=n(34757),It=function(e){var t=e.images,n=e.breakpoint,r=e.type,i=e.name,a=(0,wt._)(),s=n===ft?Et.Qe.SIZE_64:Et.Qe.SIZE_112;return(0,b.jsx)(St.b,{fadeIn:!0,images:a(t,Et.BZ[s]),shape:St.u.ROUNDED_CORNERS,size:s,iconSize:n===ft?"medium":"xlarge",type:r,title:i,loadingMode:"eager"})},Nt=n(93482),Lt=function(e){var t=e.children;return(0,b.jsx)(Nt.d,{lineClamp:2,as:"div",dir:"auto",children:t})},_t=n(34293);const Ut="dK79XxAEu3SEKJ2jS_Qy",Dt="guiUbDD6Ga8Qpatq2jQ8";var Mt=function(e){var t=e.isExplicit,n=e.children;return(0,b.jsxs)("div",{className:Ut,children:[t&&(0,b.jsx)(_t.g,{}),(0,b.jsx)(o.E,{variant:"bodySmall",className:Dt,children:n})]})};const Bt="CFz0rei5rsfsZuplXVIQ",Ft="H9T7R8VeiGcSbjXU0ZRX",Vt="BppGH6orIYP2gVU_WhVG";var zt=["book","contextUri","featureIdentifier","sharingInfo","uid","rating","isRecommendation","canRemove","showSeparator"];function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $t=(0,a.memo)((function(e){var t,n,r=e.book,s=e.contextUri,c=e.featureIdentifier,u=e.sharingInfo,p=e.uid,f=e.rating,x=e.isRecommendation,y=void 0!==x&&x,h=e.canRemove,g=void 0!==h&&h,j=e.showSeparator,A=void 0!==j&&j,R=(0,_e.A)(e,zt),k=r.name,C=r.description,O=r.isLocked,P=r.isExplicit,S=r.images,E=r.type,w=r.uri,I=r.authorName,N=r.consumptionCapExplanation,L=r.durationMs,_=r.topics,U=void 0===_?[]:_,D=r.signifierText,M=(0,at.s)(),B=(0,xe.r)(We.m,{data:{position:0,uri:w}}).spec,F=(0,re.P)({uri:w},{featureIdentifier:c}),V=F.isPlaying,z=F.isActive,q=F.togglePlay,W=(0,l.Zp)(),$=(0,d.o_)(w).toURLPath(!0),H=(0,Xe.x)(s).addItems,K=(0,pt.y)()===mt.E.SMALL?"small":"large",Q=function(e){var t,n=(0,tt.L)(),r=(0,Ze.jE)(),s=(0,a.useRef)(null),l=(0,a.useRef)(0),o=(0,nt.o)((function(t){var n,r;return(null==t?void 0:t.context.uri)===e&&null!==(n=null==t||null===(r=t.item)||void 0===r?void 0:r.uri)&&void 0!==n?n:null})),c=(0,rt.S)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===o})),u=(0,i.A)(c,1)[0],d=(0,et.I)({queryKey:["useShowPlayedState",e],queryFn:(t=(0,he.A)(je().mark((function t(){var r;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.getShowPlayedState(e),l.current=u,t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),refetchOnWindowFocus:!1}),m=d.data;return(0,a.useEffect)((function(){s.current&&o!==s.current&&r.invalidateQueries({queryKey:["useShowPlayedState",e]}),s.current=o}),[o,r,e]),(0,a.useMemo)((function(){return m&&n.capabilities.canGetShowPlayedState?{state:m.state,playPositionMilliseconds:m.playPositionMilliseconds+u-l.current}:null}),[m,n,u])}(w),G=(0,T.A)(w),J=(0,i.A)(G,2),X=J[0],Z=J[1],ee=(0,Ye.T)(w),te=K===ft?"small":"medium",ne=(0,a.useCallback)((function(){M.logInteraction(B.addButtonFactory().hitAddToPlaylist({playlist:s,itemToBeAdded:w})),H([w],{after:"end"})}),[M,B,s,w,H]),ie=(0,a.useCallback)((function(){if(O&&!N)W($);else{var e=(0,Y.$I)({isPlaying:V,isActive:z,spec:B.playButtonFactory(),logger:M,uri:w});q({loggingParams:e})}}),[N,z,O,V,M,W,B,q,w,$]),ae=(0,a.useCallback)((function(){var e,t;M.logInteraction(B.genreLinkFactory({uri:null!==(e=U[0].uri)&&void 0!==e?e:""}).hitUiNavigate({destination:null!==(t=U[0].uri)&&void 0!==t?t:""}))}),[M,B,U]),se=(0,b.jsx)(Lt,{children:k}),le=(0,b.jsx)(Ot,{description:C,children:(0,b.jsxs)(Mt,{isExplicit:!!P,children:[!0===(null==f?void 0:f.showAverage)&&void 0!==f.average&&(0,b.jsxs)("span",{children:[(0,b.jsx)(Fe.j,{size:"xsmall",className:Bt}),m.Ru.formatNumber(f.average,{maximumFractionDigits:1})]}),(null===(t=U.at(0))||void 0===t?void 0:t.title)&&(0,b.jsx)(Qe.N,{className:Ft,to:null!==(n=U[0].uri)&&void 0!==n?n:"",onClick:ae,children:U[0].title}),L&&(0,b.jsx)(st.j,{isPlaying:!1,fullyPlayed:(null==Q?void 0:Q.state)===it.H7.Completed,durationMs:L,position:null==Q?void 0:Q.playPositionMilliseconds})]})}),oe=(0,b.jsx)(Ke.p,{uri:w,uid:p,contextUri:s,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:g}),ce=!O&&!!!N,ue=y?null:(0,b.jsxs)(Pt,{isPlaying:V,onClickPlay:ie,isLocked:O&&!N,name:k,authorName:I,children:[(0,b.jsx)(lt.M,{className:Be()((0,v.A)({},xt,X)),isAdded:X,onClick:function(){X?M.logInteraction(B.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:w})):M.logInteraction(B.saveToLibraryButtonFactory().hitLike({itemToBeLiked:w})),Z(!X)},size:te,isAudiobook:!0,condensedAll:!0}),(0,b.jsx)(ot.I,{className:Be()((0,v.A)({},xt,(0,Ge.X)(ee))),uri:w,onClick:function(e,t){t===Je.NV.ADD&&M.logInteraction(B.downloadButtonFactory().hitDownload({itemToDownload:w}))},size:te,canDownload:ce,condensedAll:!0}),(0,b.jsx)(ut.w,{uri:w,sharingInfo:null!=u?u:null,interactionData:{intent:"share",type:"click"},size:te,onClick:function(){var e;M.logInteraction(B.shareButtonFactory().hitShare({entityToBeShared:w,shareId:null!==(e=null==u?void 0:u.shareId)&&void 0!==e?e:""}))},condensedAll:!0}),(0,b.jsx)($e.b,{menu:oe,children:(0,b.jsx)(ct.e,{label:m.Ru.get("more.label.context",k),size:te,onClick:function(){M.logInteraction(B.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),de=(0,b.jsx)(It,{images:S,name:k,type:E,breakpoint:K}),me=D?(0,b.jsx)(o.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:D}):null,pe=y?(0,b.jsx)(Ve.n,{size:"small",onClick:ne,children:m.Ru.get("playlist.extender.button.add")}):null,fe=(0,b.jsxs)(ze.j,{hasTextSeparator:!0,children:[(0,b.jsxs)(b.Fragment,{children:[y&&O&&(0,b.jsx)(qe.u,{semanticColor:"textSubdued",title:m.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:Vt}),m.Ru.get("card.tag.audiobook")]}),I]});return(0,b.jsx)(He.h,{menu:oe,onShow:function(){M.logInteraction(B.secondaryHitUiReveal())},children:(0,b.jsx)(Rt,Wt({breakpoint:K,id:"book-".concat(w),media:de,pretitle:me,title:se,body:le,subtitle:fe,footer:ue,trailing:pe,onClick:function(){M.logInteraction(B.hitUiNavigate({destination:w})),W($)},showSeparator:A},R))})})),Ht=n(55089),Kt=n(94810),Qt=n(96792),Gt=(0,a.createContext)({getReference:function(){return null},setReference:function(){}}),Yt=function(e){var t=e.children,n=(0,a.useRef)(null),r=(0,a.useCallback)((function(){return n.current}),[]),i=(0,a.useCallback)((function(e){n.current=e}),[]);return(0,b.jsx)(Gt.Provider,{value:{getReference:r,setReference:i},children:t})};function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=function(e,t,n){var r=e.name,i=e.uri,l=e.uid,o=(0,a.useContext)(_.cL).sortState.order!==Qt.H.NONE,c=(0,F.P)({itemIds:[l],itemUris:[i],itemMimeTypes:[Ht.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),u=c.draggable,d=c.onDragStart,m=(0,a.useContext)(Gt),f=m.setReference,b=m.getReference,x=(0,a.useCallback)((function(e){f({uri:i,uid:l}),d(e)}),[d,f,l,i]),y=(0,s.wA)(),h=(0,a.useContext)(fe.w),g=(0,a.useCallback)((function(e,n){var r=e[Ht.fl.AUDIOBOOKS];if(r){var a=b();a?n===De.Nz.BEFORE?h.move(t,[a],{before:{uri:i,uid:l}}):h.move(t,[a],{after:{uri:i,uid:l}}):n===De.Nz.BEFORE?y((0,p.io)(t,r,{before:{uri:i,uid:l}})):y((0,p.io)(t,r,{after:{uri:i,uid:l}})),f(null)}}),[t,y,b,h,f,l,i]),j=n&&!o?[Ht.fl.AUDIOBOOKS]:[];return Xt(Xt({},(0,Kt.A)({uri:i,id:l,allowedMimeTypesByDropPosition:(0,v.A)((0,v.A)({},De.Nz.BEFORE,j),De.Nz.AFTER,j),onDrop:g})),{},{onDragStart:x,draggable:u})};const en="bg5inM_sdkHpYWiFf7Id",tn="DyW2LAm9YDcCkcdM0eeP";var nn=["className","dropPosition","draggable"];function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=function(){return(0,b.jsx)("div",{className:tn})},ln=(0,a.memo)((function(e){var t=e.item,n=e.contextUri,r=e.canEdit,i=void 0!==r&&r,a=e.canRemove,s=void 0!==a&&a,l=e.index,o=Zt(t,n,i),c=o.className,u=o.dropPosition,d=o.draggable,m=(0,_e.A)(o,nn);return(0,b.jsxs)(Ue.W,{className:c,"aria-posinset":l,reRunOnDOMUpdate:!0,children:[u===De.Nz.BEFORE&&(0,b.jsx)(sn,{}),(0,b.jsx)($t,an({book:t,contextUri:n,featureIdentifier:"playlist",sharingInfo:t.sharingInfo,uid:t.uid,rating:t.rating,canRemove:s,className:c,draggable:d,showSeparator:0!==l},m)),u===De.Nz.AFTER&&(0,b.jsx)(sn,{})]})})),on=n(56023);function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dn=function(e){var t=e.contextUri,n=e.initialItems,r=e.nrItems,s=e.canEdit,o=e.canRemove,c=e.ariaLabel,u=(0,a.useContext)(fe.w),d=(0,Z.v7)(),m=(0,a.useContext)(L.g).filter,p=(0,a.useContext)(_.cL).sortState,f=(0,on.$)(p,m).contentsOptions,v=(0,U.z1)(),x=(0,i.A)(v,2)[1],y=(0,a.useCallback)(function(){var e=(0,he.A)(je().mark((function e(n,r){var i,a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getContents(t,un(un({},f),{},{offset:n,limit:r}));case 2:return i=e.sent,a=i.items.map((function(e){return null===e?null:(0,Ne.pW)(e)?e:null})),e.abrupt("return",un(un({},i),{},{items:a}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[u,f,t]),h=(0,Ie.E)({nrItems:r,fetch:y,limit:50,initialItems:n}),g=h.getItem,j=h.nrValidItems,A=h.invalidateCache;(0,a.useLayoutEffect)((function(){x(j)}),[j,x]),(0,Le.H)(t,A);var R=(0,a.useCallback)((function(e){return(0,b.jsx)("div",{style:{height:e}})}),[]),k=(0,a.useCallback)((function(e,n){var r=g(e);return r?(0,b.jsx)(ln,{contextUri:t,item:r,canEdit:s,canRemove:o,index:e},r.uri):R("".concat(n,"px"))}),[s,o,t,g,R]),C="POP"===(0,l.wQ)()?0:10;return(0,b.jsx)("div",{className:en,children:(0,b.jsx)(Ae.R,{firstInteractiveIsWrapper:!0,"aria-label":c,"aria-rowcount":j,"aria-colcount":6,children:(0,b.jsx)(Yt,{children:(0,b.jsx)(we,{totalCount:j,estimatedHeight:200,renderItem:k,renderPlaceholder:R,scrollNodeRef:d,nrRowsOverscan:10,persistanceKey:t,nrInitialInView:C})})})})},mn=n(1619),pn=n(54839),fn=n(24003),vn=n(44090),bn=n(57431),xn=n(46824),yn=n(23235),hn=n(19269),gn=n(34478),jn=n(41485),An=n(93928),Rn=n(30710),kn=n(87440),Cn=n(2856),On=n(29833),Tn=n(82323),Pn=n(95597),Sn=n(33204),En=n(5811),wn=n(75266),In=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({}),Nn=n(12493),Ln=(0,v.A)((0,v.A)((0,v.A)((0,v.A)({},In.DOWN,(function(){return(0,b.jsx)(Sn.y,{size:"small",className:Nn.A.statusChangeDown})})),In.UP,(function(){return(0,b.jsx)(En.J,{size:"small",className:Nn.A.statusChangeUp})})),In.NEW,(function(){return(0,b.jsx)(wn.Z,{className:Nn.A.notificationDot})})),In.EQUAL,(function(){return null})),_n=function(e){var t=e.status,n=e.number,r=Ln[t];return(0,b.jsxs)("div",{className:Be()(Nn.A.rowChartStatus),children:[(0,b.jsx)(o.E,{variant:"bodyMedium",children:n}),(0,b.jsx)(r,{})]})},Un=n(18001),Dn=n(15514),Mn=n(70403),Bn=n(86637),Fn=n(46241),Vn=n(35509),zn=n(17649),qn=n(27317),Wn=n(59133),$n=n(35805),Hn=n(7183),Kn=n(91080),Qn=a.memo((function(e){var t=e.uri,n=e.name,r=e.duration_ms,i=e.artists,a=e.album,s=e.isMOGEFRestricted,l=e.isExplicit,o=e.isPlayable,c=e.uid,u=e.index,d=e.contextUri,p=e.imgUrl,f=e.statusChange,v=e.playCount,x=e.usePlayContextItem,y=e.isCompactMode,h=(0,xe.r)(pn.i,{data:{position:u,reason:"",uri:t}}).spec,g=(0,mn.w)(),j=(0,xn.c)(),A=x({uid:c,uri:t,index:u}),R=A.isActive,k=A.isPlaying,C=A.triggerPlay,O=A.togglePlay,T=(0,Ye.T)(t),P=(0,kn.g)(t,o),S=(0,An.b)({downloadAvailability:T,isExplicit:l,isMOGEFRestricted:s}),E=S.badges,w=S.hasBadges,I=(null==i?void 0:i.map((function(e){return e.name})).join(m.Ru.getSeparator()))||"";return(0,b.jsx)(gn.pZ,{value:"row",index:u,children:(0,b.jsx)(He.h,{menu:(0,b.jsx)(Cn.P,{uri:t,albumUri:null==a?void 0:a.uri,artists:i}),children:(0,b.jsx)(Kn.w,{uri:t,contextUri:d,index:u,onTriggerPlay:function(e,t){C({loggingParams:t})},isActive:R,ariaRowIndex:u+1,isPlayable:P,ageRestricted:s,dragMetadata:{name:n,createdBy:I},allowedDropTypes:[],spec:h,isCompactMode:y,children:g.map((function(e,s){var l=e.columnType,o=e.options,c=(0,vn.y)(s,l,g);return(0,b.jsx)(c,{ariaColIndex:s,children:function(){var e;switch(l){case Qt.$.INDEX:return(0,b.jsx)(Fn.$,{uri:t,className:Nn.A.rowMarkerChartStatus,playAriaLabel:m.Ru.get("tracklist.a11y.play",n,I),onClick:function(e,t){O({loggingParams:t})},isPlaying:k,isActive:R,spec:h,children:f?(0,b.jsx)(_n,{number:u+1,status:f}):(0,b.jsx)(zn.a,{children:u+1})});case Qt.$.TITLE_AND_ARTIST:case Qt.$.TITLE_AND_AUTHOR:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Dn.e,{src:p}),(0,b.jsxs)(Mn.l,{children:[(0,b.jsx)(Hn.p,{titleText:n,children:n}),w&&(0,b.jsxs)(Pn.P,{children:[E.download&&(0,b.jsx)(yn._,{}),E.explicit&&(0,b.jsx)(_t.g,{}),E.nineteen&&(0,b.jsx)(hn.q,{className:Nn.A.nineteen,size:16})]}),(0,b.jsx)(Wn.p,{children:(0,b.jsx)(Tn.l,{artists:i,spec:h})})]})]});case Qt.$.TITLE:return(0,b.jsxs)(Bn.q,{children:[j?(0,b.jsx)(Qe.A,{to:t,className:Nn.A.rowTitle,"data-testid":"internal-track-link",children:(0,b.jsx)(Hn.p,{titleText:n,children:n})}):(0,b.jsx)(Hn.p,{titleText:n,children:n}),w&&(0,b.jsxs)(Pn.P,{children:[E.download&&(0,b.jsx)(yn._,{}),E.explicit&&(0,b.jsx)(_t.g,{}),E.nineteen&&(0,b.jsx)(hn.q,{className:Nn.A.nineteen,size:16}),E.hasAssociatedVideo&&(0,b.jsx)(bn.l,{})]})]});case Qt.$.ARTIST:case Qt.$.AUTHOR:return(0,b.jsx)($n.Y,{children:i&&(0,b.jsx)(fn.E,{artists:i,spec:h})});case Qt.$.PLAYS:return(0,b.jsx)(qn.Y,{playcount:v});case Qt.$.ALBUM_OR_PODCAST:case Qt.$.ALBUM:return(0,b.jsx)(On.g,{uri:a.uri,name:a.name,creatorUri:null==i||null===(e=i[0])||void 0===e?void 0:e.uri,spec:h,children:a.name});case Qt.$.DURATION:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Rn.d,{uri:t,spec:h}),!(null!=o&&o.hideDuration)&&(0,b.jsx)(Un.P,{duration:r}),(0,b.jsx)(Vn.Y,{menu:(0,b.jsx)(Cn.P,{uri:t,albumUri:null==a?void 0:a.uri,artists:i}),label:m.Ru.get("more.label.track",n,I),spec:h})]});case Qt.$.ADDED_BY:case Qt.$.ADDED_AT:case Qt.$.RELEASE_DATE:case Qt.$.ACTIONS:case Qt.$.ALBUM_OR_SHOW:case Qt.$.EVENT_DATE:case Qt.$.EVENT_INFO:case Qt.$.CONCERT_DATE:case Qt.$.CONCERT_VENUE:case Qt.$.ADD:return null;default:(0,jn.d)(l)}return null}()},"column-".concat(s))}))})})})}),(function(e,t){return e.uri===t.uri&&e.isCompactMode===t.isCompactMode})),Gn=n(99517),Yn=n(39437),Jn={column:null,order:Qt.H.NONE},Xn=a.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,r=e.playlistUri,i=e.scrollToUid,s=e.usePlayContextItem,l=e.tracklistDomRef,o=e.sortableColumns,c=e.isCompactMode,u=void 0!==c&&c,d=(0,a.useContext)(fe.w),m=(0,a.useContext)(L.g),p=m.filter,f=m.setFilter,v=(0,a.useRef)(null),x=(0,a.useCallback)((function(){v.current&&v.current.update()}),[]);(0,Le.H)(r,x);var y=(0,a.useContext)(_.cL),h=y.sortState,g=y.setSortState,j=(0,a.useCallback)((function(e){g((0,N.So)(e,h))}),[h,g]);(0,a.useEffect)((function(){g(Jn),f("")}),[r,f,g]),(0,a.useEffect)((function(){v.current&&i&&v.current.scrollToItem({uid:i})}),[i]);var A=(0,a.useCallback)(function(){var e=(0,he.A)(je().mark((function e(t,n){var i;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getContents(r,{offset:t,limit:n,sort:(0,N.Xt)(h),filter:p,decorateFormatListData:!0});case 2:return i=e.sent,e.abrupt("return",{items:i.items,totalLength:i.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r,d,h,p]),R=(0,a.useCallback)((function(e,t){var n,i,a,l=(0,Yn.g)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,b.jsx)(Qn,{index:t,contextUri:r,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==l?void 0:l.url)||"",statusChange:null===(i=e.formatListAttributes)||void 0===i?void 0:i.status,playCount:parseInt((null===(a=e.formatListAttributes)||void 0===a?void 0:a.rank)||"0",10),usePlayContextItem:s,isCompactMode:u},t+e.uri)}),[r,s,u]),k=(0,mn.w)(),C=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.uid}}),[]);return(0,b.jsx)(gn.pZ,{value:"chart-tracklist",children:(0,b.jsx)(Gn.S4,{ariaLabel:t,hasHeaderRow:!0,columns:k,sortableColumns:o,sortState:h,onSort:j,renderRow:R,resolveItem:C,nrTracks:n,fetchTracks:A,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:v,outerDomRef:l,columnPersistenceKey:"chart-tracklist",isCompactMode:u,className:Nn.A.chartTrackList},r)})})),Zn=n(94331),er=n(4906),tr=n(26697),nr=n(67693);function rr(e,t){return e.build().withHost(tr.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:"playlistURI:".concat(t),limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var ir=n(22030),ar=n(42715);const sr="BagEpNps_J8R2QuHRZMa",lr="bjB8WZd0Ev30ZFbiScDm";var or=(0,a.memo)((function(e){var t=e.uri,n=(0,a.useContext)(Z.bi).scrollNodeRef,r=(0,Re.Wx)({initialInView:!1,rootMargin:"128px 100%",root:n.current}),s=r.ref,l=function(e,t){var n,r=(0,nr.Z)(rr,[e],{enabled:t,staleTime:36e5,gcTime:72e5}).data;return null==r||null===(n=r.body.content)||void 0===n?void 0:n.items}(t,r.inView),o=(0,a.useRef)(null),c=function(e){var t=(0,ar.x)("mlt-height",300),n=(0,i.A)(t,2),r=n[0],s=n[1],l=(0,a.useCallback)((function(){var t,n=null===(t=e.current)||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height;n&&s(n)}),[e,s]);return(0,ir.w)({refOrElement:e,observeOnly:"height",onResize:l,observeOnMount:!0}),r}(o);return 0===(null==l?void 0:l.length)?null:(0,b.jsx)("div",{className:sr,style:{"--last-height":"".concat(c,"px")},ref:s,children:l&&(0,b.jsx)(er.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:m.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:l.length,elementRef:o,className:lr,children:l.map((function(e,t){var n,r;return(0,b.jsx)(Zn.B,{index:t,uri:e.uri,name:e.name,authorName:null!==(n=null===(r=e.owner)||void 0===r?void 0:r.display_name)&&void 0!==n?n:null,description:null,images:e.images},e.uri)}))})})})),cr=n(87238),ur=n(27672),dr=n(35138),mr=n(93187),pr=n(43909),fr=n(45462),vr=n(73690),br=n(77700),xr=n(51995),yr=function(){return null},hr=function(){return!1},gr=n(530),jr=n(90997),Ar=n(13234),Rr=n(63713),kr=n(81874),Cr=n(82737),Or=n(19006),Tr=n(42552),Pr={bottomEnd:Tr.dw.topStart,top:Tr.dw.bottom},Sr=function(e){var t=e.visible,n=e.onHide,r=e.placement,i=e.children,a=e.label,s=(0,c.NC)(ye.rW);return(0,b.jsx)(Cr.W,{placement:r,withPortal:!0,overlay:t&&(0,b.jsx)("div",{className:Be()({"circular-sp-vietnamese":s}),children:(0,b.jsx)(Or.A,{arrow:Pr[r],colorSet:"announcement",onClose:n,children:a})}),children:i})},Er=n(50047),wr=n(35699),Ir=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(Ir||{}),Nr=function(e){var t=e.uri,n=e.label,r=e.onClick,i=e.size,a=void 0===i?Ir.md:i,s=(0,wr.J)({uri:t,permissionLevel:"CONTRIBUTOR"}).onCopyLink,l=(0,Er.R)(),o=l.toggleActivationVisible,c=l.setToggleActivationVisible;return(0,b.jsx)(Sr,{visible:o,onHide:function(){return c(!1)},label:m.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,b.jsx)(kr.Zp,{label:n,children:(0,b.jsx)(Ar.H,{onClick:function(e){null==r||r(e),null==s||s()},iconOnly:Rr.h,size:a,"aria-hidden":"true","aria-label":n,condensed:!0})})})},Lr=n(78028),_r=n(19008),Ur=n(64299),Dr=a.memo((function(e){var t=e.metadata,n=e.tracklistDomRef,i=e.sortableColumns,s=t.hasSpotifyAudiobooks||!1,l=(0,xe.r)(Lr.E,{}),o=l.spec,c=l.logger,u=(0,a.useCallback)((function(){c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),d=(0,a.useCallback)((function(){c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]);return(0,b.jsxs)("div",{className:I.A.searchBoxContainer,children:[(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(_r.S,{placeholder:m.Ru.get("playlist.search_in_playlist"),onFilter:u,onClear:d,clearOnEscapeInElementRef:n})}),(0,b.jsx)(Ur.d,{columns:(0,r.A)(i),isBooklist:s})]})})),Mr=n(29767),Br=n(48575),Fr=a.memo((function(e){var t=e.playlist,n=e.capabilities,r=e.spec,s=e.isPlaying,l=e.isActive,o=e.togglePlay,u=e.isBooklist,d=e.isConcert,p=void 0!==d&&d,f=e.backgroundColor,v=e.tracklistDomRef,x=e.sortableColumns,y=t.metadata,h=y.uri,g=y.name,j=y.unfilteredTotalLength,A=y.isOwnedBySelf,R=y.canPlay,k=y.isPublished,C=y.totalLength,O=(0,z.n)(),P=(0,at.s)(),S=(0,a.useMemo)((function(){return r.shuffleButtonContainerFactory()}),[r]),E=n.canFilter&&j>0,w=n.canSort&&j>0,N=j>0,L=(0,c.NC)(J.McC,{loadingValue:!1}),_=(0,Br.X)(),U=hr({isOwnedBySelf:A,numberOfTracks:C}),D=(0,T.A)(h),M=(0,i.A)(D,2),B=M[0],F=M[1],q=(0,V.W)(),W=(0,a.useCallback)((0,he.A)(je().mark((function e(){return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q({targetUri:h,intent:B?"unsave":"save",type:"click"}),e.prev=1,e.next=4,F(!B);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))),[B,q,F,h]),$=(0,a.useCallback)((function(){var e=r.shareButtonFactory().hitShare({entityToBeShared:h,shareId:""});P.logInteraction(e)}),[r,P,h]),H=(0,a.useCallback)((function(){var e,t=r.heartButtonFactory();e=B?t.hitUnfollow({itemToBeUnfollowed:h}):t.hitFollow({itemToBeFollowed:h}),P.logInteraction(e),W()}),[r,W,B,P,h]),K=(0,gr.j)(),Q=E&&w;return(0,b.jsx)(cr.E,{backgroundColor:f,children:(0,b.jsxs)(ur.S,{children:[R&&!u?(0,b.jsx)(vr.D,{onClick:o,isPlaying:s,size:K,uri:h,ariaPlayLabel:m.Ru.get("playlist.a11y.play",g),ariaPauseLabel:m.Ru.get("playlist.a11y.pause",g)}):null,_&&C>0&&!u&&(0,b.jsx)(jr.r,{spec:S,children:(0,b.jsx)(xr.Y,{shuffleContext:Mr.b.playlistActionBar,entityName:g,contextUri:h,isActive:l,activationPlacement:"bottomEnd",size:K})}),A?null:(0,b.jsx)(pr.e,{children:(0,b.jsx)(lt.M,{isAdded:!!B,onClick:H,size:K})}),!u&&(0,b.jsx)(dr.f,{uri:h,isFollowing:!!B,canDownload:N,onClick:function(e,t){return(0,Y.Qv)(t,r.downloadButtonFactory(),P,h)},onFollow:W,size:K}),(0,b.jsx)(fr.u,{property:J.G6N,renderNewExperience:function(){var e;return null!==(e=t.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions&&O&&(!u||L)?(0,b.jsx)(Nr,{onClick:$,label:m.Ru.get("permissions.invite-collaborators",g),uri:h,size:K}):null}}),(p||u)&&(0,b.jsx)(ut.w,{uri:h,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:p?"concerts-near-you/share":"booklist/share"},onClick:$,size:K}),U&&(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(yr,{uri:h})}),(0,b.jsx)($e.b,{onShow:function(){return(0,Y.R2)(r,P)},menu:(0,b.jsx)(mr.W,{uri:h,isPublished:k}),children:(0,b.jsx)(ct.e,{label:m.Ru.get("more.label.context",g),size:K})}),Q?(0,b.jsx)(jr.r,{spec:r,children:(0,b.jsx)(Dr,{metadata:t.metadata,tracklistDomRef:v,sortableColumns:x})}):(0,b.jsx)("div",{className:I.A.leadingSlot,children:(0,b.jsx)(fr.u,{property:J.mA2,renderNewExperience:function(){return(0,b.jsx)(br.g,{options:[],onSelect:function(){},selected:null,enableViewModeMenu:!0})}})})]})})})),Vr=n(14124),zr=n(22865),qr=function(e){var t=(0,at.s)(),n=(0,a.useMemo)((function(){return e.spec.promoCardFactory()}),[e.spec]),r=(0,zr.t)(n);return(0,b.jsxs)("div",{className:I.A.concertsFooter,children:[(0,b.jsx)(Qe.A,{to:"/concerts",className:I.A.ctaLink,onClick:function(){var e=n.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,b.jsxs)("div",{className:I.A.promoRow,ref:r,children:[(0,b.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:I.A.promoTitle,children:m.Ru.get("concerts.find_more")}),(0,b.jsx)(Vr.v,{as:"span",selected:!0,children:m.Ru.get("concerts.find_nearby")}),(0,b.jsx)("img",{className:I.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,b.jsx)("div",{className:I.A.disclaimerContainer,children:(0,b.jsx)(o.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:m.Ru.get("concerts_near_you.playlist_disclaimer")})})]})},Wr=n(74319),$r=n(13360),Hr=n(84140),Kr=(n(48224),n(53921)),Qr="multiUserAttributionDisplayNamesV2";function Gr(e){return(0,Ne.Jy)(e)||(0,Ne.xp)(e)}function Yr(e){return(0,Ne.Jy)(e)||(0,Ne.xp)(e)||(0,Ne.pW)(e)}var Jr=a.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,l=e.playlistUri,o=e.playlistName,u=e.isMixedMedia,f=e.isLive,v=e.isBlend,x=e.isConcert,y=e.isBooklist,h=e.canEdit,g=e.scrollToUid,j=e.feedbackPath,A=e.deleteFeedbackPath,R=e.usePlayContextItem,k=e.tracklistRef,C=e.tracklistDomRef,O=e.canRemove,T=e.spec,P=e.initialItems,S=e.isCompactMode,E=void 0!==S&&S,w=e.sortableColumns,I=e.hasSpotifyAudiobooks,D=(0,at.s)(),M=(0,c.NC)(J.LX5),B=(0,a.useContext)(fe.w),F=(0,a.useContext)(L.g).filter,V=(0,a.useContext)(_.cL),z=V.sortState,q=V.setSortState,W=(0,a.useRef)((function(){})),$=(0,a.useState)([]),H=(0,i.A)($,2),K=H[0],Q=H[1],G=(0,s.wA)(),Y=(0,mn.w)(),X=(0,a.useCallback)((function(){null!=k&&k.current&&k.current.update()}),[k]);(0,Le.H)(l,X);var Z=(0,a.useCallback)((function(e,t){q((0,N.So)(e,z)),D.logInteraction(T.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[q,z,D,T]),ee=(0,a.useCallback)((function(e){W.current(),B.remove(l,e)}),[B,l]),te=(0,a.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O&&(W.current=t,e.length>1&&!n?Q(e):ee(e))}),[O,ee]);(0,a.useEffect)((function(){null!=k&&k.current&&g&&k.current.scrollToItem({uid:g})}),[g,k]);var ne=(0,a.useCallback)(function(){var e=(0,he.A)(je().mark((function e(t,n){var r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getContents(l,{offset:t,limit:n,sort:(0,N.Xt)(z),filter:F,decorateFormatListData:!!j||f||v});case 2:return r=e.sent,e.abrupt("return",{items:r.items,totalLength:r.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[l,B,z,F,j,f,v]),re=(0,a.useCallback)((function(e,t,n){if(null!=k&&k.current){var r=k.current.getRows()[t];r&&(D.logInteraction(T.dragSort()),n===Kn.Y.Before?B.move(l,e,{before:r}):B.move(l,e,{after:r}))}}),[k,D,T,B,l]),ie=(0,a.useCallback)((function(e,t,n){if(null!=k&&k.current){var r=k.current.getRows()[t];r&&(D.logInteraction(T.dragAddToPlaylist({playlist:l,itemToBeAdded:e[0]})),n===Kn.Y.Before?G((0,p.io)(l,e,{before:{uri:r.uri,uid:r.uid}})):G((0,p.io)(l,e,{after:{uri:r.uri,uid:r.uid}})))}}),[k,D,T,l,G]),ae=(0,a.useCallback)((function(e,t){var n,i,a,s,c,m,p,f,g,k,C,T,P,S=null;if((0,Ne.xp)(e))S=e.show,T=e.images.concat((null===(P=e.show)||void 0===P?void 0:P.images)||[]);else if((0,Ne.Jy)(e)){var w;S=e.album,T=null===(w=e.album)||void 0===w?void 0:w.images}else(0,Ne.pW)(e)&&(T=e.images);var N=(0,Yn.g)(T,{desiredSize:40,desiredLabel:"small"}),L=[];h&&z.order===Qt.H.NONE&&(L=y?[Ht.fl.AUDIOBOOKS]:[Ht.fl.TRACKS,Ht.fl.LOCAL_TRACKS,Ht.fl.EPISODES].concat((0,r.A)(I?[Ht.fl.AUDIOBOOKS]:[])));var _="1"===(null==e||null===(n=e.formatListAttributes)||void 0===n?void 0:n["dislike-feedback-selected"]),U=!!(0,Ne.xp)(e)&&e.podcastSubscription.isUserSubscribed,D=!1;(0,Ne.xp)(e)&&e.podcastSubscription.isPaywalled&&!U?D=!0:Gr(e)?D=e.isPlayable&&!_:(0,Ne.pW)(e)&&(D=!0);var F=!1;(0,Ne.xp)(e)&&e.podcastSubscription.isPaywalled?F=!0:(0,Ne.pW)(e)&&(F=e.isLocked&&!e.isOutOfMarket);var V=v&&function(e,t){var n,r,i,a,s=[];if(!t)return s;var l=t[Qr]?Qr:"multiUserAttributionDisplayNames",o=null==t||null===(n=t[l])||void 0===n?void 0:n.split(","),c=null==t||null===(r=t.multiUserAttributionImages)||void 0===r?void 0:r.split(",");if(!o||!c)return s;for(var u,m=(null==t||null===(i=t.multiUserAttributionUsernamesV2)||void 0===i?void 0:i.split(","))||[],p=(null==t||null===(a=t.multiUserAttributionType)||void 0===a?void 0:a.split(","))||[],f=o.length,v=0;v<f;v++){var b=m[v],x=b&&(0,d.Qj)(b).toURI();s.push({username:b,uri:x,displayName:o[v],images:(u=c[v],u.length>1?[{url:u}]:[]),recsplanation:p[v]})}return s.sort((function(t,n){return t.username?t.username===(null==e?void 0:e.username)?-1:n.username===(null==e?void 0:e.username)?1:0:0}))}(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[],q=0;Gr(e)?q=e.duration.milliseconds:(0,Ne.pW)(e)&&(q=e.durationMs||0);var W="";return Yr(e)&&(W=e.name),(0,b.jsx)(Hr.W,{isCompactMode:E,index:t,playIndex:null!==(i=e.playIndex)&&void 0!==i?i:void 0,contextUri:l,uri:e.uri,uid:e.uid,isPlayable:D,duration_ms:q,isPaywalled:F,isUserSubscribed:U,name:W,artists:(0,Ne.Jy)(e)?e.artists:void 0,albumOrShow:S,isExplicit:null!==(a=Yr(e)&&e.isExplicit)&&void 0!==a&&a,hasAssociatedVideo:null!==(s=(0,Ne.Jy)(e)&&e.hasAssociatedVideo&&M)&&void 0!==s&&s,isMixedMedia:u,isLocal:(0,Ne.Jy)(e)&&e.isLocal,addedBy:V,hasDecoratedAddedBy:B.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ne.xp)(e)&&e.release.date||"",isMOGEFRestricted:((0,Ne.Jy)(e)||(0,Ne.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==N?void 0:N.url)||"",onMove:re,onInsert:ie,usePlayContextItem:R,allowedDropTypes:L,feedbackPath:j,feedbackUri:null==e||null===(c=e.formatListAttributes)||void 0===c?void 0:c.feedback_uri,deleteFeedbackPath:A,isDisliked:_,isBlend:v,ticketingSiteURL:null==e||null===(m=e.formatListAttributes)||void 0===m?void 0:m.ticketingSite,eventDate:null==e||null===(p=e.formatListAttributes)||void 0===p?void 0:p.eventDate,canRemove:O,playlistName:o,isConcert:x,concertsCount:null===(f=e.formatListAttributes)||void 0===f?void 0:f.concerts_count,concertURI:null===(g=e.formatListAttributes)||void 0===g?void 0:g.target_uri,concertDate:null===(k=e.formatListAttributes)||void 0===k?void 0:k.first_concert_date,concertVenue:null===(C=e.formatListAttributes)||void 0===C?void 0:C.first_concert_venue,authorName:(0,Ne.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Ne.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ne.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h},t+e.uri)}),[h,y,z.order,v,E,l,M,u,B,re,ie,R,j,A,O,o,x,I]),se=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.uid,type:e.type}}),[]),le=(0,U.z1)(),oe=(0,i.A)(le,2)[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(gn.pZ,{value:"playlist-tracklist",children:(0,b.jsx)(Gn.S4,{isCompactMode:E,testID:"playlist-tracklist",ariaLabel:t,hasHeaderRow:!0,columns:Y,sortableColumns:w,sortState:z,onSort:Z,onRemove:te,renderRow:ae,resolveItem:se,nrTracks:n,fetchTracks:ne,limit:100,canFetchAllTracks:B.getCapabilities().canFetchAllTracks,outerRef:k,outerDomRef:C,tracks:P,isConcertPlaylist:x,onNrValidItemsChange:oe,columnPersistenceKey:"playlist-tracklist"},l)}),(0,b.jsx)($r.F,{title:m.Ru.get("playlist.remove_from_playlist",o),isOpen:K.length>0,tracks:K,onClose:function(e){e.stopPropagation(),Q([])},onRemove:ee})]})})),Xr=n(61868),Zr=n(88728),ei=n(82367),ti=n(58618),ni=n(51148),ri=n(70084),ii=n(37686),ai=new ii.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),si=new ii.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),li=new ii.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),oi=new ii.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null),ci=n(30142);function ui(e){var t,n,r,i,a,s,l,o,c,u,d,p,f;return{type:Kr.c.AUDIOBOOK,uri:e.uri,name:e.name,description:null!==(t=e.htmlDescriptionPlain)&&void 0!==t?t:"",authorName:(null===(n=e.authors)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.name})).join(m.Ru.getSeparator()))||"",images:null!==(r=null===(i=e.coverArt)||void 0===i?void 0:i.sources)&&void 0!==r?r:[],isLocked:(0,ci.e$)(e.accessInfo),isExplicit:(null===(a=e.contentRating)||void 0===a?void 0:a.label)===it.x7.Explicit,durationMs:null!==(s=null===(l=e.duration)||void 0===l?void 0:l.totalMilliseconds)&&void 0!==s?s:0,topics:(null===(o=e.genres)||void 0===o?void 0:o.map((function(e){return{uri:e.destinationUri,title:e.contextualName}})))||[],signifierText:null!==(c=null===(u=e.accessInfo)||void 0===u||null===(u=u.signifier)||void 0===u?void 0:u.text)&&void 0!==c?c:"",rating:{average:null!==(d=null===(p=e.rating)||void 0===p||null===(p=p.averageRating)||void 0===p?void 0:p.average)&&void 0!==d?d:0,showAverage:!(null===(f=e.rating)||void 0===f||null===(f=f.averageRating)||void 0===f||!f.showAverage)},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var di=n(68067),mi=n(68135),pi=n(77593),fi=n(99665);function vi(e,t){var n,r,i,a,s,l,o,c,u,d,m,p,f,v,b,x;return{albums:null!==(b=e.albumsV2,x=null==b?void 0:b.items.filter((function(e){return"AlbumResponseWrapper"===e.__typename})),n=(null!=x?x:[]).map((function(e){return xi(e)})).filter(fi.P)||[])&&void 0!==n?n:[],artists:null!==(f=e.artists,r=(null!==(v=null==f?void 0:f.items)&&void 0!==v?v:[]).map((function(e){return yi(e)})).filter(fi.P)||[])&&void 0!==r?r:[],episodes:null!==(m=e.episodes,i=(null!==(p=null==m?void 0:m.items)&&void 0!==p?p:[]).map((function(e){return hi(e)})).filter(fi.P)||[])&&void 0!==i?i:[],tracks:null!==(u=e.tracksV2,a=(null!==(d=null==u?void 0:u.items)&&void 0!==d?d:[]).map((function(e){return ji(e.item)})).filter(fi.P)||[])&&void 0!==a?a:[],topResults:null!==(l=e.topResultsV2,c=null!==(o=null==l?void 0:l.itemsV2)&&void 0!==o?o:[],s=c.map((function(e){var t=(0,mi.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return xi(t);case"ArtistResponseWrapper":return yi(t);case"EpisodeResponseWrapper":return hi(t);case"TrackResponseWrapper":return ji(t);default:return(0,jn.k)(t),null}})).filter(fi.P)||[])&&void 0!==s?s:[],query:t}}function bi(e){return{type:Kr.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,pi.r)(e.coverArt)}}function xi(e){return"Album"!==e.data.__typename?null:bi(e.data)}function yi(e){if("Artist"!==e.data.__typename)return null;var t=e.data;return{type:Kr.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,pi.r)(t.visuals.avatarImage)}}function hi(e){var t,n;if("Episode"!==e.data.__typename)return null;var r=e.data,i=r.podcastV2.data;return"Podcast"!==i.__typename?null:{type:Kr.c.EPISODE,uri:r.uri,id:r.id,name:r.name,images:(0,pi.r)(r.coverArt),isExplicit:(null===(t=r.contentRating)||void 0===t?void 0:t.label)===di.x7.Explicit,is19PlusOnly:(null===(n=r.contentRating)||void 0===n?void 0:n.label)===di.x7.NineteenPlus,podcast:{id:i.id,uri:i.uri,name:i.name},isPlayable:r.playability.playable}}function gi(e){var t,n,r,i,a,s,l,o=(0,pi.r)((null===(t=e.albumOfTrack)||void 0===t?void 0:t.coverArt)||null);return{type:Kr.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(n=e.albumOfTrack)||void 0===n?void 0:n.name)||"",uri:(null===(r=e.albumOfTrack)||void 0===r?void 0:r.uri)||"",imgUrl:(null===(i=o.at(0))||void 0===i?void 0:i.url)||"",id:(null===(a=e.albumOfTrack)||void 0===a?void 0:a.id)||""},artists:e.artists.items.map((function(e){return{id:e.id,name:e.profile.name,uri:e.uri}})),isPlayable:e.playability.playable,isExplicit:(null===(s=e.contentRating)||void 0===s?void 0:s.label)===di.x7.Explicit,is19PlusOnly:(null===(l=e.contentRating)||void 0===l?void 0:l.label)===di.x7.NineteenPlus}}function ji(e){return"Track"!==e.data.__typename?null:gi(e.data)}function Ai(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((function(e){return gi(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,jn.k)(t),null}}function Ri(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((function(e){return bi(e)}))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((function(e){return gi(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,jn.k)(t),null}}function ki(e,t){var n,r,i,a;return{albums:[],artists:[],episodes:[],tracks:[],topResults:null!==(r=e.topResultsV2,a=null!==(i=null==r?void 0:r.itemsV2)&&void 0!==i?i:[],n=a.map((function(e){var t=(0,mi.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?ui(t.data):null})).filter(fi.P)||[])&&void 0!==n?n:[],query:t}}var Ci=function(){var e=(0,he.A)(je().mark((function e(t,n,r){var i,a,s,l,o,c,u,d=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={term:n,offset:d.length>3&&void 0!==d[3]?d[3]:0,limit:d.length>4&&void 0!==d[4]?d[4]:10,numberOfTopResults:d.length>5&&void 0!==d[5]?d[5]:10},!r){e.next=12;break}return e.next=7,t(si,a);case 7:if(l=e.sent,o=null==l||null===(s=l.data)||void 0===s?void 0:s.searchV2){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",ki(o,n));case 12:return e.next=14,t(ai,a);case 14:if(c=e.sent,u=null==c||null===(i=c.data)||void 0===i?void 0:i.searchV2){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",vi(u,n));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Oi=function(){var e=(0,he.A)(je().mark((function e(t,n){var r,i,a,s,l=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:l.length>2&&void 0!==l[2]?l[2]:50,offset:l.length>3&&void 0!==l[3]?l[3]:0},e.next=5,t(li,i);case 5:if(a=e.sent,s=null==a||null===(r=a.data)||void 0===r?void 0:r.albums){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",Ai(s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ti=function(){var e=(0,he.A)(je().mark((function e(t,n){var r,i,a,s,l=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:l.length>2&&void 0!==l[2]?l[2]:50,offset:l.length>3&&void 0!==l[3]?l[3]:0},e.next=5,t(oi,i);case 5:if(a=e.sent,s=null==a||null===(r=a.data)||void 0===r?void 0:r.artists){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",Ri(s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ei=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({}),wi=function(e,t){return"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e=Si(Si({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===t.type?e=Si(Si({},e),{},{breadcrumbs:[].concat((0,r.A)(e.breadcrumbs),[t.level])}):("NAV_TO_RESULTS"===t.type?e=Si(Si({},e),{},{breadcrumbs:[].concat((0,r.A)(e.breadcrumbs),[t.level])}):"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:Ei.SEARCH,term:t.term,title:""}]}),e)},Ii=n(46522);const Ni="playlist-inlineSearchBox-filterInputContainer",Li="playlist-inlineSearchBox-filterInput",_i="playlist-inlineSearchBox-overlay",Ui="playlist-inlineSearchBox-searchIconContainer",Di="playlist-inlineSearchBox-searchIcon",Mi="playlist-inlineSearchBox-clearButton";var Bi=a.memo((function(e){var t=e.placeholder,n=e.onChange,r=void 0===n?function(){}:n,s=e.onFocus,l=void 0===s?function(){}:s,c=(0,a.useState)(""),u=(0,i.A)(c,2),d=u[0],p=u[1],f=(0,a.useRef)(null),v=(0,W.YQ)((function(e){r(e)}),200),x=(0,a.useCallback)((function(e){var t=e.currentTarget.value;p(t),v(t)}),[p,v]),y=(0,a.useCallback)((function(){f.current&&f.current.focus(),p(""),r("")}),[p,r]),h=(0,a.useCallback)((function(e){"Escape"===e.key&&d&&y()}),[d,y]);return(0,b.jsxs)("div",{className:Ni,role:"search",children:[(0,b.jsx)(o.E,{as:"input",variant:"bodySmall",ref:f,className:Be()(Li),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:t,onChange:x,onKeyDown:h,onFocus:l,value:d}),(0,b.jsxs)("div",{className:_i,children:[(0,b.jsx)("span",{className:Ui,children:(0,b.jsx)(Ii.C,{size:"small",className:Di,"aria-hidden":"true"})}),d&&(0,b.jsx)("button",{className:Mi,onClick:y,"aria-label":m.Ru.get("search.a11y.clear-input"),children:(0,b.jsx)(Zr.M,{size:"small"})})]})]})})),Fi=(n(66230),n(84341)),Vi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD]})},zi=function(e){var t=e.renderRow,n=e.searchResults,r=n.filter((function(e){return e.type===Kr.c.TRACK})),i=n.filter((function(e){return e.type===Kr.c.ALBUM}));return(0,b.jsxs)("div",{children:[(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:I.A.artistResultListTitle,children:m.Ru.get("playlist.curation.popular_songs")}),(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("playlist.curation.popular_songs"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:r.length,tracks:r,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD]}),(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:I.A.artistResultListTitle,children:m.Ru.get("playlist.curation.albums")}),(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("playlist.curation.albums"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD]})]})},qi=function(e){var t=e.renderRow,n=e.searchResults,r=e.renderSeeAllRow,i=e.seeAllXList;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("search.title.all"),renderRow:r,rowPlaceholder:Fi.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD],testID:"playlist-inline-curation-see-all-options"})]})},Wi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD]})},$i=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD]})},Hi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Fi.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADD]})},Ki=n(66403),Qi=n(22171);const Gi="G2t3w2AAeb5OXp0_GeWs",Yi="saVjTFMyWYUz975_tkQm",Ji="thi8fNCkEhutRkDC90c0",Xi="pHVlkChuJpEnBQyU3ADv",Zi="ENWs3JxcqtD98_8fbPz2",ea="L8IUKEJL6JiTyE_qUVCc",ta="XcyjdXgsNX0DBt72tfiD",na="VhJnuS7UcUPfIlzD8dlU",ra="He29vQ5anFj_bJ5iEaI2";var ia=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,s=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,b.jsx)(Qi.$,{className:Zi,rowIndex:r,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":"".concat(m.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:ra,onClick:a,children:[(0,b.jsxs)(Ki.T,{columnIndex:0,className:ea,children:[void 0!==s?(0,b.jsx)("img",{className:Ji,src:s,alt:n.name}):null,(0,b.jsxs)("div",{className:ta,children:[(0,b.jsx)(o.E,{as:"p",className:Xi,variant:"bodyMedium",children:n.name}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("album")})]})]}),(0,b.jsx)(Ki.T,{columnIndex:1}),(0,b.jsx)(Ki.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:na,onClick:a,children:i?(0,b.jsx)(ti.g,{}):(0,b.jsx)(ei.V,{})})})]})})},aa=n(73351),sa=function(e){var t=e.size;return(0,b.jsx)("div",{className:Yi,children:(0,b.jsx)(aa.r,{size:t})})},la=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,s=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,b.jsx)(Qi.$,{className:Zi,rowIndex:r,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":"".concat(m.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:ra,onClick:a,"data-testid":"playlist-inline-curation-artist",children:[(0,b.jsxs)(Ki.T,{columnIndex:0,className:ea,children:[void 0!==s?(0,b.jsx)("img",{className:Gi,src:s,alt:n.name}):(0,b.jsx)(sa,{size:"small"}),(0,b.jsxs)("div",{className:ta,children:[(0,b.jsx)(o.E,{as:"p",className:Xi,variant:"bodyMedium",children:n.name}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("artist")})]})]}),(0,b.jsx)(Ki.T,{columnIndex:1}),(0,b.jsx)(Ki.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:na,onClick:a,children:i?(0,b.jsx)(ti.g,{}):(0,b.jsx)(ei.V,{})})})]})})},oa=n(84470),ca=n(65485),ua=n(24009),da=n(98593),ma=n(31625),pa=a.memo((function(e){var t=e.uid,n=e.uri,r=e.isPlayable,i=e.isMOGEFRestricted,s=e.isExplicit,l=e.contextUri,o=e.name,c=e.imgUrl,u=e.index,d=e.podcast,p=e.usePlayContextItem,f=(0,a.useMemo)((function(){return l.replace("internal:recs:","")}),[l]),v=(0,V.W)(),x=(0,Xe.x)(f).addItems,y=p({uid:t,uri:n,index:u}),h=y.isActive,g=y.isPlaying,j=y.triggerPlay,A=y.togglePlay,R=(0,a.useCallback)((function(){x([n],{after:"end"}),v({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:f})}),[x,n,v,f]),k=(0,Ye.T)(n),C=(0,kn.g)(n,r),O=(0,An.b)({downloadAvailability:k,isExplicit:s,isMOGEFRestricted:i}),T=O.badges,P=O.hasBadges;return(0,b.jsx)(gn.pZ,{value:"row",index:u,children:(0,b.jsx)(He.h,{menu:(0,b.jsx)(oa.b,{uri:n,contextUri:l}),children:(0,b.jsxs)(Kn.w,{uri:n,contextUri:n,isPlayable:C,onTriggerPlay:function(){j()},isActive:h,ageRestricted:i,index:u,ariaRowIndex:u,dragMetadata:{name:o,createdBy:d.name},children:[(0,b.jsxs)(da.U,{ariaColIndex:0,children:[(0,b.jsx)(ca.u,{uri:n,src:c,onClick:function(){A()},isLocked:!1,isPlaying:g,isActive:h,isEpisode:!0,playAriaLabel:m.Ru.get("tracklist.a11y.play",o,d.name)}),(0,b.jsxs)(Mn.l,{children:[(0,b.jsx)(Hn.p,{titleText:o,children:o}),P&&(0,b.jsxs)(Pn.P,{children:[T.download&&(0,b.jsx)(yn._,{}),T.explicit&&(0,b.jsx)(_t.g,{}),T.nineteen&&(0,b.jsx)(hn.q,{className:Nn.A.nineteen,size:16})]})]})]}),(0,b.jsx)(ma.o,{ariaColIndex:1,children:(0,b.jsx)(On.g,{uri:d.uri,name:d.name,children:d.name})}),(0,b.jsx)(ua.l,{ariaColIndex:2,children:(0,b.jsx)(Ve.n,{size:"small",onClick:R,children:m.Ru.get("playlist.extender.button.add")})})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),fa=function(e){var t,n,r=e.episode,i=e.contextUri,a=e.index,s=e.usePlayContextItem;return(0,b.jsx)(pa,{uid:r.id,uri:r.uri,isPlayable:r.isPlayable,isMOGEFRestricted:r.is19PlusOnly,isExplicit:r.isExplicit,contextUri:i,name:r.name,imgUrl:null!==(t=null===(n=r.images.at(0))||void 0===n?void 0:n.url)&&void 0!==t?t:"",index:a,podcast:r.podcast,usePlayContextItem:s})},va=function(e){var t=e.label,n=e.index,r=e.isRTL,i=e.onClick;return(0,b.jsx)(Qi.$,{className:Zi,rowIndex:n,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":t,className:ra,onClick:i,children:[(0,b.jsx)(Ki.T,{columnIndex:0,className:ea,children:(0,b.jsx)(o.E,{as:"p",className:Xi,variant:"bodyMedium",children:t})}),(0,b.jsx)(Ki.T,{columnIndex:1}),(0,b.jsx)(Ki.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":t,className:na,onClick:i,children:r?(0,b.jsx)(ti.g,{}):(0,b.jsx)(ei.V,{})})})]})})},ba=a.memo((function(e){var t,n=e.uid,r=e.uri,i=e.name,s=e.imgUrl,l=e.artists,o=e.isExplicit,c=e.index,u=e.album,d=e.contextUri,p=e.isPlayable,f=e.isMOGEFRestricted,v=e.usePlayContextItem,x=e.durationMs,y=e.shouldRenderDuration,h=e.internalLink,g=(0,xe.r)(pn.i,{data:{position:c,reason:"",uri:r}}),j=g.spec,A=g.logger,R=(0,a.useMemo)((function(){return d.replace("internal:recs:","")}),[d]),k=(0,V.W)(),C=(0,Xe.x)(R).addItems,O=v({uid:n,uri:r,index:c}),T=O.isActive,P=O.isPlaying,S=O.triggerPlay,E=O.togglePlay,w=(0,a.useCallback)((function(){A.logInteraction(j.addButtonFactory().hitAddToPlaylist({playlist:R,itemToBeAdded:r})),C([r],{after:"end"}),k({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:R})}),[A,j,R,r,C,k]),I=(0,Ye.T)(r),N=(0,kn.g)(r,p),L=l.map((function(e){return e.name})).join(m.Ru.getSeparator()),_=(0,An.b)({downloadAvailability:I,isExplicit:o,isMOGEFRestricted:f}),U=_.badges,D=_.hasBadges,M=y&&x,B=l.map((function(e){return e.name})).join(m.Ru.getSeparator()),F=(0,xn.c)();return(0,b.jsx)(gn.pZ,{value:"row",index:c,children:(0,b.jsx)(He.h,{menu:(0,b.jsx)(Cn.P,{uri:r,albumUri:u.uri,artists:l,contextUri:d}),children:(0,b.jsxs)(Kn.w,{uri:r,contextUri:d,isPlayable:N,onTriggerPlay:function(e,t){S({loggingParams:t})},isActive:T,ageRestricted:f,index:c,ariaRowIndex:c,dragMetadata:{name:i,createdBy:L},spec:j,className:Nn.A.isRecommendedTrackListRow,children:[(0,b.jsxs)(da.U,{ariaColIndex:0,children:[(0,b.jsx)(ca.u,{uri:r,src:s,onClick:function(e,t){E({loggingParams:t})},isLocked:!1,isPlaying:P,isActive:T,playAriaLabel:m.Ru.get("tracklist.a11y.play",i,L),spec:j}),(0,b.jsxs)(Mn.l,{children:[h&&F?(0,b.jsx)(Qe.A,{to:r,className:Nn.A.rowTitle,"data-testid":"internal-track-link",children:(0,b.jsx)(Hn.p,{titleText:i,children:i})}):(0,b.jsx)(Hn.p,{titleText:i,children:i}),D&&(0,b.jsxs)(Pn.P,{children:[U.explicit&&(0,b.jsx)(_t.g,{}),U.download&&(0,b.jsx)(yn._,{}),U.nineteen&&(0,b.jsx)(hn.q,{className:Nn.A.nineteen,size:16})]}),(0,b.jsx)(Wn.p,{children:(0,b.jsx)(Tn.l,{artists:l,spec:j})})]})]}),(0,b.jsx)(ma.o,{ariaColIndex:1,children:(0,b.jsx)(On.g,{uri:u.uri,name:u.name,creatorUri:null==l||null===(t=l[0])||void 0===t?void 0:t.uri,spec:j,children:u.name})}),(0,b.jsx)(ma.o,{ariaColIndex:2,children:(0,b.jsx)("span",{})}),(0,b.jsxs)(ua.l,{ariaColIndex:3,children:[M?(0,b.jsx)(Rn.d,{uri:r}):null,M?(0,b.jsx)(Un.P,{duration:x,dataTestId:"render-duration"}):(0,b.jsx)(Ve.n,{size:"small",onClick:w,"aria-label":m.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:m.Ru.get("playlist.extender.button.add")}),M?(0,b.jsx)(Vn.Y,{menu:(0,b.jsx)(Cn.P,{uri:r,albumUri:u.uri,contextUri:d,artists:l}),label:m.Ru.get("more.label.track",i,B)}):null]})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),xa=function(e){var t=e.track,n=e.contextUri,r=e.index,i=e.usePlayContextItem;return(0,b.jsx)(ba,{uid:t.id,uri:t.uri,isPlayable:t.isPlayable,isMOGEFRestricted:t.is19PlusOnly,isExplicit:t.isExplicit,contextUri:n,name:t.name,imgUrl:t.album.imgUrl,index:r,album:t.album,artists:t.artists,usePlayContextItem:i})},ya=function(e){var t,n=e.resultList,r=e.level,i=e.isRTL,s=e.playlistUri,l=e.navToResults,c=e.navToEntity,u=e.term,p=e.isBooklist,f=n,v=function(e){return e.map((function(e){if(e.type===Kr.c.TRACK||e.type===Kr.c.EPISODE){var t=e.uri,n=e.id;return{type:(0,d.U_)(t)?Kr.c.TRACK:Kr.c.EPISODE,uri:t,uid:n,provider:null}}return null})).filter(fi.P)}(n),x=(0,F.P)(),y=x.draggable,h=x.onDragStart,g=(0,re.P)({uri:"".concat(s.replace("spotify:","spotify:internal:recs:"),":").concat(encodeURIComponent(u),":").concat(null!==(t=null==r?void 0:r.navType)&&void 0!==t?t:0),pages:[{items:v}]},{featureIdentifier:"search"}).usePlayContextItem,j=(0,a.useCallback)((function(e,t){return(0,b.jsx)(va,{isRTL:i,index:t,label:e.label,onClick:function(){l({navType:e.type,term:u,title:e.label})}},e.uri)}),[i,l,u]),A=(0,a.useCallback)((function(e,t){return e.type===Kr.c.ARTIST?(0,b.jsx)(la,{isRTL:i,index:t,searchResult:e,onClick:function(){c({navType:Ei.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Kr.c.EPISODE?(0,b.jsx)(fa,{index:t,episode:e,contextUri:s.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Kr.c.TRACK?(0,b.jsx)(xa,{index:t,track:e,contextUri:s.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Kr.c.ALBUM?(0,b.jsx)(ia,{index:t,isRTL:i,searchResult:e,onClick:function(){c({navType:Ei.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,b.jsx)($t,{book:e,featureIdentifier:"playlist_recommendations",contextUri:s,isRecommendation:!0,showSeparator:0!==t},e.uri)}),[i,c,s,g]);if(""===u)return(0,b.jsx)("div",{className:I.A.emptySearchTermContainer});if(!n||0===(null==n?void 0:n.length))return(0,b.jsxs)("div",{className:I.A.emptyStateContainer,children:[(0,b.jsx)(o.E,{as:"h1",variant:"titleSmall",children:m.Ru.get("search.empty-results-title",u)}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",children:m.Ru.get("search.empty-results-text")})]});if((null==r?void 0:r.navType)===Ei.SEARCH){var R=[{type:Ei.ARTISTRESULTS,label:m.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Ei.ALBUMRESULTS,label:m.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Ei.TRACKRESULTS,label:m.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return f=n,p?(0,b.jsx)(b.Fragment,{children:f.map((function(e,t){return e&&e.type===Kr.c.AUDIOBOOK?(0,b.jsx)($t,{contextUri:s,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:y,onDragStart:function(t){h(t,{itemUris:[e.uri],itemMimeTypes:[Ht.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null}))}):(0,b.jsx)(qi,{renderRow:A,searchResults:f,renderSeeAllRow:j,seeAllXList:R})}return(null==r?void 0:r.navType)===Ei.ALBUM?(0,b.jsx)(Vi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ei.ARTIST?(0,b.jsx)(zi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ei.ALBUMRESULTS?(0,b.jsx)(Wi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ei.TRACKRESULTS?(0,b.jsx)(Hi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ei.ARTISTRESULTS?(0,b.jsx)($i,{renderRow:A,searchResults:f}):null},ha=function(e){var t=e.playlistUri,n=e.onCurationModeChange,s=e.isBooklist,l=(0,a.useState)([]),c=(0,i.A)(l,2),u=c[0],d=c[1],p=(0,a.useState)(),f=(0,i.A)(p,2),v=f[0],x=f[1],y=(0,ni.W)(),h=function(){var e=(0,a.useReducer)(wi,{term:"",breadcrumbs:[]}),t=(0,i.A)(e,2),n=t[0],r=t[1],s=n.breadcrumbs,l=n.term;return{changeTerm:function(e){r({type:"CHANGE_TERM",term:e})},level:s[s.length-1]||null,goBack:function(){r({type:"GO_BACK"})},navToEntity:function(e){r({type:"NAV_TO_ENTITY",level:e})},navToResults:function(e){r({type:"NAV_TO_RESULTS",level:e})},term:l}}(),g=h.level,j=h.changeTerm,A=h.goBack,R=h.navToEntity,k=h.navToResults,C=h.term,O=(0,a.useContext)(ri.j).request;return(0,a.useEffect)((function(){var e=!0,t=function(){var t=(0,he.A)(je().mark((function t(){var n,i,a;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=2;break}return t.abrupt("return");case 2:t.t0=g.navType,t.next=t.t0===Ei.SEARCH?5:t.t0===Ei.ARTISTRESULTS?21:t.t0===Ei.ALBUMRESULTS?23:t.t0===Ei.TRACKRESULTS?25:t.t0===Ei.EPISODERESULTS?27:t.t0===Ei.ALBUM?29:t.t0===Ei.ARTIST?40:51;break;case 5:if(t.prev=5,v&&(v.query===C||""===C)){t.next=13;break}return t.next=9,Ci(O,C,s);case 9:n=t.sent,e&&x(n),t.next=14;break;case 13:""===C&&d([]);case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(5),d([]);case 19:return v&&d(v.topResults),t.abrupt("break",52);case 21:return v&&d(null==v?void 0:v.artists),t.abrupt("break",52);case 23:return v&&d(null==v?void 0:v.albums),t.abrupt("break",52);case 25:return v&&d(null==v?void 0:v.tracks),t.abrupt("break",52);case 27:return v&&d(null==v?void 0:v.episodes),t.abrupt("break",52);case 29:return t.prev=29,t.next=32,Oi(O,g.uri,100,0);case 32:i=t.sent,e&&i&&d(i.tracks),t.next=39;break;case 36:t.prev=36,t.t2=t.catch(29),d([]);case 39:return t.abrupt("break",52);case 40:return t.prev=40,t.next=43,Ti(O,g.uri,100,0);case 43:a=t.sent,e&&a&&d([].concat((0,r.A)(a.albums),(0,r.A)(a.tracks))),t.next=50;break;case 47:t.prev=47,t.t3=t.catch(40),d([]);case 50:case 51:return t.abrupt("break",52);case 52:case"end":return t.stop()}}),t,null,[[5,16],[29,36],[40,47]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[g,C,v,O,s]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("section",{className:I.A.playlistInlineCurationSection,children:[(0,b.jsxs)("div",{className:I.A.playlistInlineCurationWrapper,children:[(0,b.jsx)(o.E,{as:"h1",className:I.A.playlistInlineCurationTitle,variant:"titleSmall",children:m.Ru.get("playlist.curation.title")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Bi,{placeholder:s?m.Ru.get("playlist.curation.search_placeholder-booklists"):m.Ru.get("playlist.curation.search_placeholder"),onFocus:function(){n(!0)},onChange:function(e){j(e)}})})]}),(0,b.jsx)("button",{className:I.A.playlistInlineCurationCloseButton,onClick:function(){return n(!1)},children:(0,b.jsx)(Zr.M,{"aria-label":m.Ru.get("close")})})]}),null!==g&&g.navType!==Ei.SEARCH?(0,b.jsxs)("button",{className:I.A.playlistInlineCurationBackButton,onClick:function(){return A()},children:[y?(0,b.jsx)(ei.V,{"aria-label":m.Ru.get("navbar.go-back"),className:I.A.icon}):(0,b.jsx)(ti.g,{"aria-label":m.Ru.get("navbar.go-back"),className:I.A.icon}),(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",children:g.title})]}):null,(0,b.jsx)("div",{className:I.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,b.jsx)(ya,{playlistUri:t,term:C,level:g,resultList:u,navToEntity:R,navToResults:k,isRTL:y,isBooklist:s})})]})},ga=n(71128);n(3521),n(32693),n(63222);function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Aa={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},Ra=function(e){var t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};for(var n,r,i=t[1],a=/([^:]+):([^:]+)/g,s=[],l=[];n=a.exec(i);){var o=n[1],c=n[2];o===Aa.USER&&(r=void 0,r=c.replace(/\+/g,"%20"),c=decodeURIComponent(r)),s.push(o),l.push(c)}if(0===s.length)return{type:null,id:null};var u=s.reduce((function(e,t,n){return e[s[n]]=l[n],e}),{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:s[s.length-1],id:l[l.length-1]},u)},ka=n(11244),Ca=n(84828),Oa=new ii.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),Ta=3e5;function Pa(e,t){return["list-extender",e,t]}var Sa=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3?arguments[3]:void 0,l=2*n,o=3*n,c=(0,Ze.jE)(),d=(0,a.useRef)(0),m=(0,a.useState)(e),p=(0,i.A)(m,2),f=p[0],v=p[1],b=(0,a.useState)((function(){var n,r;return null!==(n=null===(r=c.getQueriesData({queryKey:Pa(e,t),stale:!1}).at(0))||void 0===r?void 0:r[1])&&void 0!==n?n:[]})),x=(0,i.A)(b,2),y=x[0],h=x[1],g=(0,a.useRef)(y.map((function(e){var t;return null!==(t=e.uri)&&void 0!==t?t:""}))),j=(0,xe.r)(u.K,{data:{uri:e}}),A=j.spec,R=j.logger,k=(0,a.useMemo)((function(){return A.recommendedFactory()}),[A]);(0,Ca.e)(ka.Lj.OPERATION_COMPLETE,(function(n){var r=n.data;r.uri===e&&(r.operation===ka.sP.ADD?h((function(e){return e.filter((function(e){return r.uris.every((function(t){return t!==e.uri}))}))})):r.operation===ka.sP.REMOVE&&h((function(e){return e.filter((function(e){return r.items.every((function(t){return t.uri!==e.uri}))}))})),r.operation!==ka.sP.ADD&&r.operation!==ka.sP.REMOVE||c.invalidateQueries({queryKey:Pa(e,t)}))}));var C=(0,a.useRef)(!0);(0,a.useEffect)((function(){return C.current||(h([]),v(e),g.current=[],d.current=d.current+1),C.current=!0,function(){d.current=d.current+1}}),[e]),(0,a.useEffect)((function(){if(y.length<l){var e=Math.min(l,o-y.length),n=d.current,i=Pa(f,t),a=C.current&&0===g.current.length;(a?c.fetchQuery({queryKey:i,queryFn:function(){return s(f,[],e)},staleTime:Ta,gcTime:Ta}):s(f,g.current,e)).then((function(t){if(n===d.current&&t){var s=t.map((function(e){return(null==e?void 0:e.uri)&&e.uri})).filter((function(e){return null!==e}));t.length<e&&g.current.length?g.current=[]:g.current=[].concat((0,r.A)(g.current),(0,r.A)(s)),h((function(e){return[].concat((0,r.A)(e),(0,r.A)(t))})),a&&c.setQueryData(i,t)}}))}C.current=!1}),[l,o,f,y.length,c,s,t]);var O=(0,a.useCallback)((function(){if(A){var e=k.refreshButtonFactory().hitRefreshContent();R.logInteraction(e)}h((function(e){return e.slice(n)}))}),[R,k,A,n]);return{recommendations:y.slice(0,n),_bufferedRecommendations:y.slice(n),refresh:O}},Ea=a.memo((function(e){var t=e.uri,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.useContext)(fe.w),r=(0,a.useContext)(ri.j).request,i=(0,a.useCallback)(function(){var e=(0,he.A)(je().mark((function e(t,i,a){var s,l,o,c;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRecommendedBookUris(t,i,a);case 2:return o=e.sent,e.next=5,r(Oa,{uris:o});case 5:return c=e.sent,e.abrupt("return",null!==(s=null==c||null===(l=c.data)||void 0===l?void 0:l.podcasts.map((function(e){return"Audiobook"===e.__typename?ui(e):null})).filter(fi.P))&&void 0!==s?s:[]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n,r]);return Sa(e,"book",t,i)}(t),r=n.recommendations,i=n.refresh,s=(0,F.P)(),l=s.draggable,c=s.onDragStart,u=(0,ga.p)();return u?null!=r&&r.length&&r.length>0?(0,b.jsxs)("div",{className:I.A.recommendedTrackList,children:[(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:m.Ru.get("playlist.extender.songs.in.playlist")})]})}),u&&(0,b.jsxs)(b.Fragment,{children:[r.map((function(e,n){return e?(0,b.jsx)($t,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,sharingInfo:e.sharingInfo,isRecommendation:!0,draggable:l,onDragStart:function(t){c(t,{itemUris:[e.uri],itemMimeTypes:[Ht.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==n},n):null})),(0,b.jsx)(Ar.H,{className:I.A.refreshButton,onClick:i,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,b.jsx)("div",{className:I.A.recommendedTrackList,children:(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),wa=n(46534);function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var La=a.memo((function(e){var t=e.playlistUri,n=e.canEdit,r=e.tracks,i="1"===(0,wa.$)("filter-age-restricted-content"),s=(0,re.P)({uri:t.replace("spotify:","spotify:internal:recs:"),pages:[{items:r.map((function(e){return Na(Na({},e),{},{provider:null,type:Kr.c.TRACK,uid:null})}))}]},{featureIdentifier:"playlist_recommendations"}).usePlayContextItem,l=(0,a.useCallback)((function(e,r){var a=e.duration;return(0,b.jsx)(ba,{index:r,imgUrl:e.album.imageUrl,contextUri:t.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!(i&&e.isMOGEFRestricted),name:e.name,artists:e.artists,album:Na(Na({},e.album),{},{imgUrl:e.album.imageUrl}),isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:s,durationMs:a,shouldRenderDuration:!n,internalLink:!0},"".concat(r,"-").concat(e.uri))}),[t,i,s,n]),o=(0,a.useMemo)((function(){return[Qt.$.TITLE_AND_ARTIST,Qt.$.ALBUM,Qt.$.ADDED_AT,Qt.$.ADD]}),[]),c=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.id}}),[]),u=(0,a.useMemo)((function(){return r.slice(0,Math.min(r.length,10))}),[r]);return(0,b.jsx)(Gn.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(r.length,10),rowPlaceholder:Fi.qq,tracks:u,renderRow:l,resolveItem:c,columns:o},"".concat(t,"-recommended"))})),_a=a.memo((function(e){var t=e.playlistUri,n=e.playlistLength,r=e.canEdit,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.useContext)(fe.w),r=(0,a.useCallback)(function(){var e=(0,he.A)(je().mark((function e(t,r,i){var a;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.map((function(e){var t;return null!==(t=Ra(e).id)&&void 0!==t?t:""})),e.abrupt("return",n.getRecommendedTracks(t,a,i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n]);return Sa(e,"track",t,r)}(t),s=i.recommendations,l=i.refresh,c=!n||0===n,u=(0,ga.p)(),d=c?m.Ru.get("playlist.extender.title.in.playlist"):m.Ru.get("playlist.extender.songs.in.playlist");return u?s.length>0?(0,b.jsxs)("div",{className:I.A.recommendedTrackList,children:[(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:d})]})}),u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(La,{playlistUri:t,canEdit:r,tracks:s}),(0,b.jsx)(Ar.H,{className:I.A.refreshButton,onClick:l,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,b.jsx)("div",{className:I.A.recommendedTrackList,children:(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Ua=a.lazy((function(){return n.e(4789).then(n.bind(n,53129))})),Da=a.lazy((function(){return Promise.resolve().then(n.bind(n,14604))})),Ma=a.lazy((function(){return n.e(3632).then(n.bind(n,93081))})),Ba=a.lazy((function(){return n.e(9718).then(n.bind(n,31577))})),Fa=new Set([]),Va=a.memo((function(e){var t,n,f,v,x,y,h,g=e.playlist,j=e.capabilities,C=g.metadata,O=C.uri,T=C.name,P=C.images,S=C.totalLength,E=C.unfilteredTotalLength,w=C.isOwnedBySelf,ee=C.hasEpisodes,te=C.canAdd,ie=C.canRemove,ae=C.formatListData,se=C.hasDateAdded,le=C.collaborators,ce=C.isPublished,ue=C.hasSpotifyAudiobooks,de=C.hasSpotifyTracks,ve=g.contents.items,he=(0,xe.r)(u.K,{data:{uri:O}}),ge=he.spec,je=he.logger,Ae=he.UBIFragment,Re=(0,z.n)(),ke=(0,c.NC)(ye.Cf,{loadingValue:!1}),Ce=(0,c.NC)(ye.Mc,{loadingValue:!1}),Oe=(0,c.NC)(J.FQE,{loadingValue:!1}),Te=(0,B.a)().isCompactMode,Pe=a.useMemo((function(){return ge.headerFactory()}),[ge]),Se=a.useMemo((function(){return ge.tracklistFactory()}),[ge]),Ee=a.useMemo((function(){return ge.actionBarFactory()}),[ge]),we="chart"===(null==ae?void 0:ae.type),Ie="concerts-near-you"===(null==ae?void 0:ae.type)&&ke,Ne="live-streams"===(null==ae?void 0:ae.type),Le=["blend","celebrity-blend","friends-mix"].indexOf((null==ae?void 0:ae.type)||"")>-1,_e=[de,ee,ue].filter(Boolean).length>1,Ue=!_e&&!!ue&&(0,Xr.R)(ve),De="artistsets"===(null==ae?void 0:ae.type)||"this-is"===(null==ae?void 0:ae.attributes["editorial.series"]),Me=(null==ae?void 0:ae.attributes)||{},Be=Me.header_image_url_desktop||Me.image_url||null,Fe=te&&ie,Ve=function(e,t){var n=(0,a.useState)(e&&0===t),r=(0,i.A)(n,2),s=r[0],l=r[1],o=(0,a.useContext)(Z.bi).scrollNodeChildRef,c=(0,a.useRef)(s);return(0,a.useEffect)((function(){var e,t=!c.current;o&&t&&s&&(null===(e=o.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})),c.current=s}),[o,s]),{inlineCurationModeIsOn:s,handleInlineCurationModeChange:function(e){l(e)}}}(Fe&&(!Ue||Ce&&Oe),E),ze=Ve.inlineCurationModeIsOn,qe=Ve.handleInlineCurationModeChange,We=(0,s.d4)(X.Ht).productState,$e=!(null==We||!We.ads)&&parseInt(We.ads,10)>0,He="spotify"===g.metadata.owner.username,Ke=(0,s.wA)(),Qe=(0,l.wQ)(),Ge=(0,l.zy)(),Ye=(0,c.NC)(J.vQ3,{loadingValue:!1}),Je=(0,c.NC)(J.UPi,{loadingValue:!1}),Xe=null===(t=(0,M.useThisisPlaylistExtensionQuery)({uri:O},{gcTime:5*ne.i,enabled:De}).data)||void 0===t?void 0:t.playlistV2,Ze="Playlist"===(null==Xe?void 0:Xe.__typename)?null===(n=Xe.artistsOnTour)||void 0===n?void 0:n[0]:null,et=Je&&"Playlist"===(null==Xe?void 0:Xe.__typename)?null===(f=Xe.concerts)||void 0===f?void 0:f.items.map((function(e){return e.data})):null,tt=null==et?void 0:et.flatMap((function(e){return"ConcertV2"===e.__typename?[e]:[]})).map((function(e){var t,n=[e.location.name,e.location.city].join(m.Ru.getSeparator()),r=e.artists.items.flatMap((function(e){return"Artist"===e.data.__typename?[e.data]:[]}));return{venue:n,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:null===(t=r[0])||void 0===t||null===(t=t.visuals.avatarImage)||void 0===t||null===(t=t.sources[0])||void 0===t?void 0:t.url}})),nt="POP"!==Qe?new URLSearchParams(Ge.search).get("uid"):null,rt=(0,V.W)(),it=(0,a.useContext)(L.g).filter,at=(0,a.useContext)(_.cL).sortState,st=(0,a.useContext)(fe.w),lt=(0,a.useRef)(null),ot=(0,a.useRef)(null),ct=(0,i.A)(P,1)[0],ut=(0,q.H)(null!==Be?Be:(null==ct?void 0:ct.url)||null),dt=(0,re.P)(function(e,t,n){var r={uri:e};return oe(r,t),me(r,(0,pe.H)(n)),r}(O,(0,N.Xt)(at),it),{featureIdentifier:"playlist"}),mt=dt.isPlaying,pt=dt.isActive,ft=dt.togglePlay,vt=dt.usePlayContextItem,bt=(0,a.useCallback)((function(){var e=(0,Y.$I)({isPlaying:mt,isActive:pt,spec:Ee.playButtonFactory(),logger:je,uri:O});ft({loggingParams:e})}),[mt,pt,ft,Ee,je,O]),xt=(0,a.useCallback)((function(e){var t=e.split(/[\r\n]+/g).map((function(e){return(0,d.o_)(e)})).filter((function(e){return null!==e&&((0,d.U_)(e)||(0,d.gH)(e)||(0,d.Pk)(e))}));if(t.length>0&&te){var n,r=t.map((function(e){return e.toURI()})),i=null===(n=lt.current)||void 0===n||null===(n=n.getSelected())||void 0===n||null===(n=n.slice(-1))||void 0===n?void 0:n[0],a={after:null!=i?i:"end"};Ke((0,p.io)(O,r,a))}}),[te,Ke,O]);x=xt,y=(0,a.useContext)(H.A),h=(0,W.YQ)((function(){y.paste().then((function(e){return x(e)}))}),500,{leading:!0,trailing:!1}),(0,$.f)(G,h),(0,Q.x)(K.W.PASTE,h);var yt=(0,a.useCallback)((function(e,t){var n=[].concat((0,r.A)(t[F.O[d.NQ.TRACK]]||[]),(0,r.A)(t[F.O[d.NQ.LOCAL_TRACK]]||[]),(0,r.A)(t[F.O[d.NQ.EPISODE]]||[]),(0,r.A)(t[F.O[d.NQ.ALBUM]]||[]));n.length>0&&te&&(je.logInteraction(ge.dragAddToPlaylist({playlist:O,itemToBeAdded:n[0]})),Ke((0,p.io)(O,n)),rt({targetUri:O,intent:"add",type:"drop"}))}),[te,je,ge,O,Ke,rt]),ht=!He&&0!==E,gt=!Ue&&Re&&(Fe&&!ze||ht),jt=Ue&&Ce&&Oe&&Re&&(Fe&&!ze||ht),At=(!Ue||Ce&&Oe)&&w&&Re,Rt=!Fe&&!Ue&&!ht&&Re,kt=null!==(v=null==le?void 0:le.count)&&void 0!==v?v:1,Ct=(0,U.z1)(),Ot=(0,i.A)(Ct,1)[0],Tt="plays"===Me.rank_type,Pt=(0,a.useMemo)((function(){return(0,N.Ey)({isMixedMedia:_e,hasEpisodes:ee,hasSpotifyAudiobooks:ue,hasDateAdded:se,isLive:Ne,isConcert:Ie,isBlend:Le,nrCollaborators:kt,isBooklist:Ue,isCompactMode:Te,isChart:we,showPlayCount:Tt})}),[_e,ee,ue,se,Ne,Ie,Le,kt,Ue,Te,we,Tt]),St=(0,a.useMemo)((function(){return st.getCapabilities().canSort?Ue?new Set(_.dh):new Set((0,N.zq)(Pt)):Fa}),[Pt,Ue,st]),Et=Oe&&Ue&&!Te;return(0,b.jsxs)(a.Suspense,{fallback:null,children:[(0,b.jsx)(k.Q,{children:(0,be.Q2)({playlistName:T,userName:g.metadata.owner.displayName||"",isSpotifyOwned:He})}),(0,b.jsx)(R.A,{types:te&&!Ue?[F.O[d.NQ.TRACK],F.O[d.NQ.LOCAL_TRACK],F.O[d.NQ.EPISODE],F.O[d.NQ.ALBUM]]:[],onDrop:yt,children:(0,b.jsxs)("section",{role:"presentation",className:I.A.playlist,"data-testid":"playlist-page","data-test-uri":O,children:[(0,b.jsx)(Wr.x,{metadata:g.metadata,isPlaying:mt,isPublished:ce,totalItems:Ot,togglePlay:bt,backgroundColor:ut,spec:Pe}),(0,b.jsxs)("div",{className:I.A.playlistContent,children:[(0,b.jsx)(Fr,{playlist:g,capabilities:j,spec:Ee,isPlaying:mt,isActive:pt,togglePlay:bt,isBooklist:Ue,backgroundColor:ut,tracklistDomRef:ot,isConcert:Ie,sortableColumns:St}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ua,{formatListData:g.metadata.formatListData})}),!Je&&null!=Ze&&Ze.upcomingEventsCount?(0,b.jsx)(Da,{artistConcertsUri:Ze.uri||"",artistImageUrl:Ze.imageUrl||"",artistName:Ze.title||"",spec:ge}):null,Je&&!!Ze&&tt&&tt.length>0&&(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ma,{liveEvents:tt,artistConcertsUri:Ze.uri||"",artistName:Ze.title||"",spec:ge})}),(0,b.jsxs)("div",{className:"contentSpacing",children:[$e?(0,b.jsx)(A,{playlistUri:O}):null,$e&&He?(0,b.jsx)(Ba,{uri:O,playlistName:T}):null,g.metadata.hasSpotifyAudiobooks&&Ye&&(0,b.jsxs)("div",{className:I.A.noBooklistSupportContainer,children:[(0,b.jsx)(o.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:m.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,b.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:m.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),S>0&&(0,b.jsx)(a.Suspense,{fallback:null,children:Et?(0,b.jsx)(dn,{initialItems:ve,contextUri:O,nrItems:S,canEdit:Fe,canRemove:ie,ariaLabel:T}):(0,b.jsx)(Ae,{spec:Se,children:(0,b.jsx)(D.a,{columns:Pt,children:we?(0,b.jsx)(Xn,{ariaLabel:T,nrTracks:S,playlistUri:O,scrollToUid:nt,usePlayContextItem:vt,tracklistDomRef:ot,sortableColumns:St,isCompactMode:Te},O):(0,b.jsx)(Jr,{ariaLabel:T,nrTracks:S,playlistUri:O,playlistName:T,isMixedMedia:_e,isLive:Ne,isConcert:Ie,isBlend:Le,isBooklist:Ue,canEdit:Fe,scrollToUid:nt,feedbackPath:Me["dislike-endpoint"],deleteFeedbackPath:Me["delete-endpoint"],usePlayContextItem:vt,tracklistRef:lt,tracklistDomRef:ot,canRemove:ie,spec:Se,initialItems:ve,isCompactMode:Te,sortableColumns:St,hasSpotifyAudiobooks:null!=ue&&ue},O)})})}),At&&(0,b.jsx)(a.Suspense,{fallback:null,children:ze?(0,b.jsx)(ha,{playlistUri:O,onCurationModeChange:qe,isBooklist:Ue}):(0,b.jsx)("button",{className:I.A.seeMore,onClick:function(){qe(!0)},children:(0,b.jsx)(o.E,{as:"div",variant:"bodySmallBold",children:m.Ru.get("playlist.curation.find_more")})})}),gt?(0,b.jsx)("div",{"data-testid":"recommended-track",children:(0,b.jsx)(_a,{playlistUri:O,playlistLength:g.metadata.unfilteredTotalLength,canEdit:Fe})}):null,jt?(0,b.jsx)(Ea,{uri:O}):null,Rt&&(0,b.jsx)(or,{uri:O})]})]}),Ie&&(0,b.jsx)(qr,{spec:ge.footerSectionFactory()})]})})]})})),za=a.memo((function(e){var t=e.uri,n=(0,a.useContext)(fe.w).getCapabilities(),r=(0,a.useContext)(L.g).filter,i=(0,a.useContext)(_.cL).sortState,s=(0,on.$)(i,r),l=s.metadataOptions,o=s.contentsOptions,c=(0,ve.W)(t,l,o),u=c.data,d=c.isLoading,p=c.isError;return!u||d?(0,b.jsx)(w.A,{hasError:p,errorMessage:m.Ru.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline}):u.metadata.permissions&&!u.metadata.permissions.canView?(0,b.jsx)(E,{uri:t}):(0,b.jsx)(Va,{playlist:u,capabilities:n})}));const qa=function(){var e=(0,l.g)().playlistId,t=(0,d.Ps)((e||"").split("&")[0]).toURI();return(0,b.jsx)(te.P,{surface:ee.u.PLAYLIST,uris:[t],children:(0,b.jsx)(_.sn,{uri:t,children:(0,b.jsx)(L.s,{uri:t,children:(0,b.jsx)(U.S1,{children:(0,b.jsx)(za,{uri:t})})})})})}},12732:(e,t,n)=>{n.d(t,{A:()=>r});const r={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map