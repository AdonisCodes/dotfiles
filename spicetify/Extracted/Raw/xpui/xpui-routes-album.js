"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{56081:(e,r,n)=>{n.r(r),n.d(r,{default:()=>nr});var a=n(81226),i=(n(60905),n(94238),n(63619),n(60850),n(67560),n(84008),n(21256),n(83892),n(41679),n(81443),n(74457),n(6844),n(77458),n(69645),n(39782),n(49932),n(9981),n(36490),n(66230),n(51168),n(93902),n(7410),n(50247),n(50252),n(88190),n(4207),n(64334),n(9433),n(26308),n(84815),n(30758)),t=n(45976),l=n(61022),s=n(54925),o=n(5811),c=n(33204),u=n(1409),d=n(17124),m=n(59081),g=n(62579),h=n(70548),b=n(36092),p=n(88354),f=n(85107),x=n(54212),j=n(19968),v=n(46317),y=n(73690),k=n(88212),w=n(72459),C=n(37686),P=n(28937),A=new C.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null),R=n(78357),M=n(58686),O=n(86070),U=function(e){var r,n,a,i=e.albumName,t=e.albumURI,l=(n={uri:t},a={gcTime:5*P.i},(0,P.I)(A,n,a)).data,s=null!=l&&l.albumUnion&&"merch"in l.albumUnion?null==l||null===(r=l.albumUnion)||void 0===r||null===(r=r.merch)||void 0===r?void 0:r.items:[];return s&&(null==s?void 0:s.length)>0?(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsx)("div",{className:M.A.albumMerch,children:(0,O.jsx)(R.q,{id:i,uri:t,merchItems:s,merchVariant:"Album page merch items"})})}):null},N=n(89077),I=n(7396),L=n(92373),S=n(3205),D=n(71658),B=n(17941),F=n(97150),z=n(28480),T=n(82035),_=n(207),E=n(82930),V=n(58701),W=n(98849),J=n(73704),K=n(62472),q=n(11182),H=n(4906),G=n(66964),X=n(19919),Y=n(13147),Z=n(13234),Q=n(16655),$=n(694),ee=n(39437);const re="bhvAemcPYUmxOdBe1mVi",ne="hmgHdasWrZaA9tiXVw_u",ae="RmbxUFLb4j9KmgftJyk1",ie="boNCdFnbh9y0PBweIDUt",te="LfQtKa295FPgk8VuZRfD",le="Oytey9nANMtSDKSmZpJ6";var se=i.memo((function(e){var r=e.images,n=e.title,a=e.isOpen,t=e.onClose,l=(0,i.useMemo)((function(){return(0,ee.g)(r,{desiredSize:1e4})}),[r]);return l?(0,O.jsx)(Q.A,{className:re,isOpen:a,onRequestClose:t,animation:{modal:{base:ie,afterOpen:te,beforeClose:le}},animated:!0,children:(0,O.jsxs)("div",{style:{"--image-width":"".concat(l.width,"px"),"--image-height":"".concat(l.height,"px")},className:ne,children:[(0,O.jsx)($._,{loading:"eager",alt:n,src:l.url,className:ae}),(0,O.jsx)(Z.H,{onClick:t,semanticColor:"textBase",children:m.Ru.get("web-player.cover-art-modal.close")})]})}):null})),oe=n(26017),ce=n(15058),ue=n(10651),de=n(16069),me=n(95514),ge=n(16247),he=n.n(ge),be=n(60828),pe=n(45462),fe=n(77700),xe=n(78104),je=n(179),ve=n(90997),ye=n(17175),ke=n(87238),we=n(27672),Ce=n(12074),Pe=n(35138),Ae=n(78041),Re=n(64602),Me=n(530),Oe=n(54509),Ue=n(73576),Ne=n(59767),Ie=n(89629),Le=n(51995),Se=n(48575);const De="m2grVeuHNwfGLVpaSBle",Be="G7OjWzvskF402kPsqa63",Fe="T7nBFbNoLnHw4DVupvk8",ze="b5UUlVvADHdE3mY9J715",Te="GLKjAw6oM_egXztVxKKB",_e="MGZ4oJmGVPrWsx5cT5hN",Ee="DmrVJc9vWCbjU_DuRvfe",Ve="yLmA5f7x65en2MdKbIhX";var We=i.memo((function(e){var r,n=e.uri,a=e.togglePlay,t=e.isPlaying,l=e.isActive,s=e.spec,o=e.logger,c=e.backgroundColor,u=e.name,d=e.artists,g=e.isPlayable,h=e.sharingInfo,b=(0,Oe.W)(),f=(0,Ue.n)(),x=(0,xe.t)(),j=(0,i.useMemo)((function(){return s.actionBarFactory()}),[s]),v=(0,je.A)(n),k=(0,oe.A)(v,2),w=k[0],C=k[1],P=(0,i.useCallback)((function(){var e=(0,Ne.$I)({isPlaying:t,isActive:l,spec:j.playButtonFactory(),logger:o,uri:n});a({loggingParams:e})}),[t,l,a,j,o,n]),A=(0,i.useCallback)((0,me.A)(he().mark((function e(){var r,a;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.saveButtonFactory(),r=w?a.hitDislike({itemToBeDisliked:n}):a.hitLike({itemToBeLiked:n}),o.logInteraction(r),b({targetUri:n,intent:w?"unsave":"save",type:"click"}),e.prev=4,e.next=7,C(!w);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:case"end":return e.stop()}}),e,null,[[4,9]])}))),[b,n,w,C,j,o]),R=(0,Se.X)(),M=(0,Me.j)();return(0,O.jsx)(ke.E,{backgroundColor:c,children:(0,O.jsxs)(we.S,{children:[(0,O.jsx)(y.D,{onClick:P,disabled:!g,isPlaying:t,size:M,uri:n}),R&&(0,O.jsx)(ve.r,{spec:j,children:(0,O.jsx)(Le.Y,{entityName:u,contextUri:n,activationPlacement:"bottomEnd",size:M})}),(0,O.jsx)(Re.h,{uri:n,action:Ie.no.SAVE_ALBUM,children:(0,O.jsx)(Ce.M,{isAdded:!!w,onClick:A,disabled:!(f||null!=x&&x.getCapabilities().canModifyOffline),size:M})}),(0,O.jsx)(Pe.f,{uri:n,isFollowing:!!w,onClick:function(e,r){return(0,Ne.Qv)(r,j.downloadButtonFactory(),o,n)},onFollow:A,size:M}),(0,O.jsx)(be.b,{onShow:function(){return(0,Ne.R2)(j,o)},menu:(0,O.jsx)(p.h,{uri:n,artistUri:null==d||null===(r=d[0])||void 0===r?void 0:r.uri,sharingInfo:h}),children:(0,O.jsx)(Ae.e,{label:m.Ru.get("more.label.context",u),size:M})}),(0,O.jsx)("div",{className:Ve,children:(0,O.jsx)(pe.u,{property:ye.mA,renderNewExperience:function(){return(0,O.jsx)(fe.g,{options:[],onSelect:function(){},selected:null,enableViewModeMenu:!0})}})})]})})})),Je=n(67020),Ke=n(78221),qe=n(63336),He=n(89582),Ge=function(e){var r=e.releases;return(0,O.jsx)(qe.W,{children:r.map((function(e){return(0,O.jsx)(He.D,{role:"menuitem",to:(0,Ke.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)}))})},Xe=(n(66874),864e5),Ye=365.25*Xe;function Ze(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,a)}return n}function Qe(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ze(Object(n),!0).forEach((function(r){(0,a.A)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var $e=i.lazy((function(){return n.e(8243).then(n.bind(n,28243))}));function er(e){switch(e){case ue._.Single:return m.Ru.get("single");case ue._.Ep:return m.Ru.get("ep");case ue._.Compilation:return m.Ru.get("compilation");case ue._.Audiobook:return m.Ru.get("card.tag.audiobook");case ue._.Album:default:return m.Ru.get("album")}}var rr=function(e){var r,n,a,v,C,P,A,R,M,D,B,Z=e.uri,Q=e.album,$=(0,l.zy)(),ee=(0,T.r)(d.E,{data:{uri:Z}}),re=ee.spec,ne=ee.logger,ae=ee.UBIFragment,ie=(0,i.useMemo)((function(){return re.trackListFactory()}),[re]),te=(0,i.useMemo)((function(){return re.moreByArtistShelfFactory()}),[re]),le=Q.moreAlbumsByArtist,ce=parseInt(new URLSearchParams((0,l.zy)().search).get("index")||"0",10),ue=(0,I.J)(Z),me=(0,F.P)({uri:ue},{featureIdentifier:"album"}),ge=me.usePlayContextItem,he=me.togglePlay,be=me.isPlaying,pe=me.isActive,fe=(0,i.useCallback)((function(e,r){if(re){var n=re.headerFactory().artistNameFactory().hitUiNavigate({destination:r.creator.uri});ne.logInteraction(n)}}),[ne,re]),xe=function(){var e=(0,i.useState)(!1),r=(0,oe.A)(e,2),n=r[0],a=r[1];return{isOpen:n,openModal:(0,i.useCallback)((function(){return a(!0)}),[]),closeModal:(0,i.useCallback)((function(){return a(!1)}),[])}}(),je=xe.isOpen,ve=xe.openModal,ye=xe.closeModal,ke=(0,u.NC)(X.WJ1,{loadingValue:!1})?{onClick:ve,ariaLabel:m.Ru.get("web-player.album.open_coverart_modal")}:{},we=(0,i.useCallback)((function(){return new URLSearchParams($.search.slice(1)).get("highlight")||""}),[$.search]),Ce=Q.uri,Pe=Q.name,Ae=Q.albumType,Re=null===(r=Q.release)||void 0===r?void 0:r.date,Me=null===(n=Q.release)||void 0===n?void 0:n.precision,Oe=Q.nrTracks,Ue=Q.images,Ne=null===(a=Q.extractedColors)||void 0===a?void 0:a.colorRaw.hex,Ie=Q.artists,Le=Q.isPlayable,Se=Q.isCatalogueRestricted,Ve=Q.copyright.items,Ke=Q.courtesyLine,qe=Q.duration.durationMs,He=Q.duration.isEstimate,Ze=we(),rr=null!==(v=null===(C=(0,t.d4)(Y.Ht).overrides)||void 0===C?void 0:C.locale)&&void 0!==v?v:m.Ru.getLocaleForTranslation(),nr=(0,G.W)({uri:Z,type:"locale"}),ar=(0,z.qc)({albumName:Pe,albumType:Ae,albumArtists:Ie.map((function(e){return e.name})).join(m.Ru.getSeparator()),shouldLocalize:nr,i18n:m.Ru});(0,L.z)(Ne||null);var ir=function(e){return(0,i.useMemo)((function(){if(null==e||!e.date)return null;if("day"===e.precision){var r=new Date(e.date),n=(new Date).getTime()-r.getTime(),a=n%Ye;return a<3.5*Xe||a>312552e5?Math.round(n/Ye):null}return null}),[e])}(Q.release),tr=(0,N.a)().isCompactMode,lr=(0,w.t)();return(0,O.jsxs)("section",{className:De,"data-testid":"album-page",children:[(0,O.jsx)(f.Q,{children:ar}),null!==ir?(0,O.jsx)(i.Suspense,{fallback:null,children:(0,O.jsx)($e,{colorLight:null==Q||null===(P=Q.extractedColors)||void 0===P?void 0:P.colorLight.hex,colorDark:null==Q||null===(A=Q.extractedColors)||void 0===A?void 0:A.colorDark.hex,name:Pe,years:ir})}):null,(0,O.jsxs)(E.z,{backgroundColor:Ne,children:[(0,O.jsxs)(x.h,{children:[(0,O.jsx)(y.D,{size:"medium",onClick:function(){return he()},disabled:!Le,isPlaying:be,uri:Z}),(0,O.jsx)(j.X,{text:Pe,dragUri:Z,dragLabel:Pe})]}),(0,O.jsx)(b.h,{menu:(0,O.jsx)(p.h,{uri:Q.uri,artistUri:null==Ie||null===(R=Ie[0])||void 0===R?void 0:R.uri,sharingInfo:Q.sharingInfo}),children:(0,O.jsx)(V.K,Qe({dragUri:Ce,images:Ue,name:Pe,placeholderType:"album"},ke))}),(0,O.jsxs)(W.Y,{children:[(0,O.jsx)(K.B,{children:er(Ae)}),(0,O.jsx)(b.h,{menu:(0,O.jsx)(p.h,{uri:Q.uri,artistUri:null==Ie||null===(M=Ie[0])||void 0===M?void 0:M.uri,sharingInfo:Q.sharingInfo}),children:(0,O.jsx)(q.mm,{dragUri:Q.uri,dragLabel:Q.name,scaleAtMinWidth:q.tw,children:Pe})}),(0,O.jsx)(J.t,{creators:Ie,onCreatorClick:fe,releaseDate:Re,releaseDatePrecision:Me,totalItems:Oe,durationMilliseconds:qe,isEstimatedDuration:He,hasTracks:!0})]})]}),(0,O.jsx)(We,{backgroundColor:Ne,uri:Z,togglePlay:he,isPlaying:be,isActive:pe,spec:re,logger:ne,sharingInfo:Q.sharingInfo,name:Q.name,artists:Q.artists,isPlayable:Q.isPlayable}),Se?(0,O.jsxs)("div",{className:Be,children:[(0,O.jsx)(s.E,{as:"h2",variant:"bodyMediumBold",className:Fe,children:m.Ru.get("windowed.product-album-header")}),(0,O.jsx)("div",{className:ze,children:m.Ru.get("windowed.product-album-description")})]}):null,(0,O.jsxs)("div",{className:"contentSpacing",children:[(0,O.jsx)(ae,{spec:ie,children:(0,O.jsx)(k.a,{columns:lr,children:(0,O.jsx)(Je.F,{ariaLabel:Pe,nrTracks:(0,de.Y)(Q.discs)?Q.discs.totalCount+Oe:Oe,discs:Q.discs,albumUri:Ce,highlightUri:Ze,scrollToIndex:ce,usePlayContextItem:ge,initalTracks:Q.items,isCompactMode:tr})})}),(0,O.jsxs)("div",{className:Ee,children:[(0,O.jsxs)("div",{children:[Re&&(0,O.jsx)(s.E,{as:"p",variant:"bodySmall",children:(0,_.rh)((0,_.ad)(Re),rr,{year:"numeric",month:"long",day:"numeric"},Me)}),(0,O.jsx)(S.Z,{copyrights:Ve,courtesyLine:Ke})]}),Q.releases.items.length>0&&(0,O.jsx)(h.t,{menu:(0,O.jsx)(Ge,{releases:Q.releases.items}),children:function(e,r,n){return(0,O.jsxs)("button",{ref:n,className:_e,type:"button",onClick:r,children:[(0,O.jsx)(s.E,{variant:"bodySmall",children:m.Ru.get("album-page.more-releases",Q.releases.items.length)}),e?(0,O.jsx)(o.J,{size:"small"}):(0,O.jsx)(c.y,{size:"small"})]})}})]})]}),(0,O.jsx)(U,{albumName:Pe,albumURI:Ce}),(0,O.jsx)(O.Fragment,{children:(null==le?void 0:le.length)>0&&(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsx)(ae,{spec:te,children:(0,O.jsx)(H.p,{index:0,id:"more-albums",className:Te,title:m.Ru.get("album-page.more-by-artist",null==Ie||null===(D=Ie[0])||void 0===D?void 0:D.name),total:le.length,seeAllUri:"".concat(null==Ie||null===(B=Ie[0])||void 0===B?void 0:B.uri.replace("artist","app:artist"),":discography"),seeAllLabel:m.Ru.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:le.map((function(e,r){return(0,O.jsx)(g.R,{index:r,artists:Ie,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)}))})})})}),(0,O.jsx)(se,{title:ar,isOpen:je,onClose:ye,images:Ue})]})};const nr=i.memo((function(){var e=(0,l.g)().albumId,r="spotify:album:".concat(e),n=(0,ce.$)(r),a=n.loading,i=n.error,t=n.data,s=n.canLoadOffline;return a||!t?(0,O.jsx)(v.A,{hasError:null!==i,loadOffline:s,errorMessage:m.Ru.get("error.not_found.title.album")}):(0,O.jsx)(B.P,{surface:D.u.ALBUM,uris:[r],children:(0,O.jsx)(rr,{uri:r,album:t})})}))}}]);
//# sourceMappingURL=xpui-routes-album.js.map