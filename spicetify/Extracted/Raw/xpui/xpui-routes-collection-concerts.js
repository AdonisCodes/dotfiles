"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{73462:(e,t,n)=>{n.d(t,{A:()=>j});var o=n(30758),i=n(73351),a=n(54925),r=n(96855),c=n(7104),s=n(42799),l=n(69880);const u="MUiWCNTfb6FcSwVPvQ1V",d="_eSrMs5LTUjW7l0vfuBg",v="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",f="NXn5KjeUOjLGlAfS1Gao",g="N0wgFMDDvCiby4QB5kLJ",p="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",y="GR08E4L_rOGljyQQX30R";var x=n(86070);const j=(0,o.memo)((function(e){var t=e.uri,n=e.title,o=e.imageUrl,j=e.date,b=e.subTitle,_=e.firstParty,C=e.onClick,N=j?(0,l.l4)(j):void 0;return(0,x.jsx)(c.Link,{to:t,className:u,"data-testid":"concert-card",onClick:C,children:(0,x.jsxs)("div",{className:d,children:[(0,x.jsx)(s.b,{children:(0,x.jsx)("div",{role:"img",className:y,style:{backgroundImage:"url(".concat(o,")")},children:!o&&(0,x.jsx)(i.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),N&&(0,x.jsxs)("time",{className:v,dateTime:j,children:[(0,x.jsx)(a.E,{as:"div",variant:"bodySmall",children:(0,l.tj)(N)}),(0,x.jsx)(a.E,{as:"div",variant:"bodyMediumBold",children:(0,l.Py)(N)})]}),(0,x.jsxs)("div",{className:m,dir:"auto",children:[(0,x.jsx)(a.E,{as:"h2",variant:"bodyMedium",className:f,children:n}),(0,x.jsxs)("div",{className:g,children:[_&&(0,x.jsx)("span",{className:h,children:(0,x.jsx)(r.D,{size:"small"})}),(0,x.jsx)(a.E,{as:"span",className:p,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:b})]})]})]})})}))},53072:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ei});var o=n(1409),i=n(19919),a=n(26017),r=(n(98168),n(84008),n(9981),n(51168),n(50252),n(30758)),c=n(45976),s=n(61022),l=n(33054),u=n(2097),d=n(8376),v=n(60899),m=n(90995),f=n(13234),g=n(28209),p=n(10573),h=n(39274),y=n(71159),x=n(59081),j=n(12475),b=n(82930),_=n(98849),C=n(54212),N=n(19968),k=n(11182),R=n(13147),S=n(43407),I=n(22865),D=n(82035),w=n(17175),E=(n(62172),n(66874),n(69645),n(45991),n(54925)),A=n(34848),O=n(85107),F=n(27890),L=n(46317),U=n(7766),P=(n(83892),n(37068)),M=n(88728),T=n(16316),B=n(16655),z=(n(67560),n(71585)),G=n(78221),K=n(7104),H=n(69880);const V="Ig5vKQ7dYBd1EvrAFxNe",W="h_q319q68ujja24YIoXY",q="dFTQKQt3imsoOza3VE4G",X="M8LA1p3y53Qnge37zUmz",Z="HZi6Ziy6mVJMFZsPf4wk",Y="KNX0R2c0r90zNTPYZm6X",Q="JI0woT5IN6EnNKnilhcg",J="kAi1CfiOMYDExKkXuw44",$="Zwr6T4ceJI7KfyNxa4tS",ee="mW3O8RnDMDY6MfRJKqd5",te="raQK_4Eaqa5Zj06_aBm7",ne="AOuYgrCnrYvPKsyzxqVy",oe="P1dra4DUpn36RnCkuwa_",ie="zBCfaF04WlTsiUcov2oJ",ae="JxTPZX9AoptKanJg0zIw";var re=n(86070);const ce=(0,r.memo)((function(e){var t=e.concert,n=e.position,o=e.modalSpec,i=(0,H.l4)(e.concert.startDateIsoString),a=(0,G.o_)(e.concert.uri),c=(0,r.useMemo)((function(){return null==o?void 0:o.eventRowFactory({position:n,uri:t.uri})}),[o,n,t]),s=(0,S.s)();return(0,re.jsxs)(K.Link,{to:"/concert/".concat(null==a?void 0:a.id),className:J,onClick:function(){c&&s.logInteraction(c.hitUiNavigate({destination:"/concert/".concat(null==a?void 0:a.id)}))},children:[(0,re.jsxs)("div",{className:$,"aria-hidden":!0,children:[(0,re.jsx)(E.E,{as:"div",variant:"marginalBold",className:ee,children:(0,H.tj)(i)}),(0,re.jsx)(E.E,{as:"div",variant:"bodyMediumBold",className:te,children:(0,H.Py)(i)})]}),(0,re.jsxs)("div",{className:ne,children:[(0,re.jsx)(E.E,{as:"div",variant:"bodySmallBold",className:oe,"data-testid":"event-title",children:t.title}),(0,re.jsx)(z.s,{children:(0,H.Fn)(i)}),(0,re.jsxs)(E.E,{as:"div",variant:"bodySmall",className:ie,children:[(0,H.VJ)(i)," • ",(0,H.WB)(i)]}),(0,re.jsx)(E.E,{as:"div",variant:"bodySmall",className:ae,"data-testid":"event-venue",children:[t.location.venue,t.location.city].join(x.Ru.getSeparator())})]})]},t.uri)}));const se=function(e){var t=(0,r.useMemo)((function(){var t;return null===(t=e.feedSpec)||void 0===t?void 0:t.groupedEventModalFactory({uri:e.artist.uri||""})}),[e.feedSpec,e.artist]),n=(0,S.s)(),o=(0,I.t)(t),i=function(){t&&n.logInteraction(t.closeButtonFactory().hitUiHide()),e.onClose()};return(0,re.jsx)(B.A,{contentLabel:x.Ru.get("live_events.label"),isOpen:!0,className:V,onRequestClose:i,children:(0,re.jsxs)("section",{className:W,ref:o,children:[(0,re.jsx)("div",{className:q,children:(0,re.jsx)(le,{"aria-label":x.Ru.get("close"),iconOnly:M.M,size:"small",onClick:i})}),(0,re.jsxs)("div",{className:X,children:[(0,re.jsx)(T._,{height:"48",width:"48",className:Z,src:e.artist.imageUri}),(0,re.jsxs)("div",{className:Y,children:[(0,re.jsx)(E.E,{as:"h3",variant:"bodyMediumBold",className:Q,"data-testid":"event-venue",children:e.artist.name}),(0,re.jsx)(E.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:x.Ru.get("concerts.count_near_location",e.concerts.length,e.location.city)})]})]}),e.concerts.map((function(e,n){return(0,re.jsx)(ce,{concert:e,position:n,modalSpec:t},e.uri)}))]})})};var le=(0,P.Ay)(f.H).withConfig({displayName:"ConcertModal___StyledButtonTertiary",componentId:"sc-179c8vh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const ue=(0,r.memo)((function(e){var t,n=e.event,o=e.onClose,i=e.feedSpec,a=null==n||null===(t=n.concerts[0])||void 0===t?void 0:t.concert,c=null==a?void 0:a.artists[0],s=(0,r.useMemo)((function(){return null==i?void 0:i.groupedEventModalFactory({uri:(null==c?void 0:c.uri)||""})}),[i,c]),l=(0,S.s)();if(!n||!a||!c)return null;return(0,re.jsx)(se,{artist:{imageUri:c.imageUri,name:c.name,uri:c.uri},location:{city:a.location,venue:a.venue},concerts:n.concerts.map((function(e){return{uri:"spotify:concert:".concat(e.concert.id),title:e.concert.title,startDateIsoString:e.concert.date,location:{city:e.concert.location,venue:e.concert.venue}}})),onClose:function(){s&&l.logInteraction(s.closeButtonFactory().hitUiHide()),o()}})}));n(39782),n(86475),n(63624);var de=n(98111),ve=n(71174),me=n(84353),fe=n(95514),ge=n(16247),pe=n.n(ge),he=n(56761),ye=n(45701),xe=function(){var e=(0,fe.A)(pe().mark((function e(t,n){var o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.Ki)(he.n.getInstance(),t,n);case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=(0,fe.A)(pe().mark((function e(){var t,n,o,i,a,r,c,s=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,o=s.length>2?s[2]:void 0,i=(n=s.length>1?s[1]:void 0).geonameId,a=n.startDate,r=n.endDate,e.next=6,(0,ye.DX)(he.n.getInstance(),{page:t,geonameId:i,startDate:a,endDate:r,skipLocationUpdate:o});case 6:return c=e.sent,e.abrupt("return",c.body);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,fe.A)(pe().mark((function e(t,n){var o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.ZV)(he.n.getInstance(),void 0,t,n);case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=(0,fe.A)(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.oF)(he.n.getInstance());case 2:return t=e.sent,e.abrupt("return",t.body);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=6e5,Ne=/^(\d+)/,ke=function(e){var t,n=function(){var e=(0,s.g)().location,t=(null==e?void 0:e.match(Ne))||[],n=(0,a.A)(t,2)[1];if(n)try{return parseInt(n,10)}catch(e){return}}(),o=(0,l.ok)(),i=null===(t=(0,a.A)(o,1)[0].get("filter"))||void 0===t?void 0:t.trim();return e.isAnonymous&&!i||"all"===i?{type:"all",geonameId:n}:e.isInterestedEnabled&&"saved"===i?{type:"saved"}:{type:"foryou",geonameId:n}},Re=n(41628),Se=n(54509);const Ie="MVPegsivznZB6gdkcnkH",De="MlK79hskRbFrN2OBjMkl",we="VxaXFH9Uq1NU0LtsVhIu",Ee="vktIWsUczavLRrl4SkRt",Ae="Y1JeRPqrmHKXI1KcstYN",Oe="S667J_S5yumhYS1VoZyw",Fe="DbrdfLxSkMqLs3HHrKfo",Le="ofURwIKv0qEXJGTraIis",Ue="LOJZO2MnGW5dCIawF767",Pe="tyc7QRlEJigVFIAeLGOB",Me="PoljWhTLU3MKqIx2gSPY",Te="ajxCNAuBJSgYfKUUBWBT",Be="WR2h2Li5XTrBn_Rdme_k",ze="WNhsvOyu4doInF525pLE",Ge="qSR4imCvzdznIQ4F2kBO",Ke="jFxUCv1gagc6erXmpgYw",He="LNAJMvRlTPqWsmZvV7Kg",Ve="jP10ZUl0Jn2Ijue3fZux",We="ncN9bwTgIRk6xruAt5T8",qe="hKG8XDR5S00bjBAibgbI",Xe="XMhrCtHCVSPsNW67vM1m",Ze="vT0t_YE1HgmbnHLLhJD9";const Ye=(0,r.memo)((function(e){var t=e.geonameId,n=e.locationName,o=e.spec,i=(0,r.useState)(!1),c=(0,a.A)(i,2),s=c[0],l=c[1],u=(0,I.t)(o),d="https://concerts.spotifycdn.com/feed_city_images_1/".concat(t,".jpg");return(0,r.useEffect)((function(){var e=function(){l(!0)},t=function(){l(!1)},n=new Image;return n.addEventListener("load",e),n.addEventListener("error",t),n.src=d,function(){n.removeEventListener("load",e),n.removeEventListener("error",t)}}),[d]),(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)("div",{className:qe,ref:u,children:[s&&(0,re.jsx)(T._,{src:d,className:Xe,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,re.jsxs)("div",{children:[(0,re.jsx)(E.E,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:x.Ru.get("live_events.city_info_find_tickets",n)}),(0,re.jsx)(E.E,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:x.Ru.get("live_events.city_info_view_details")})]})]})})}));var Qe=n(49153),Je=n(96674),$e=n(73462);const et=(0,r.memo)((function(e){var t=e.concert,n=e.isVirtual,o=e.onClick,i=t.venue,a=t.location,r=t.artists[0];return(0,re.jsx)($e.A,{uri:(0,G.B4)(t.id).toURI(),title:(0,Je.a9)(t),imageUrl:r.imageUri,date:t.startDate.localDate,subTitle:n?i:[i,a].join(x.Ru.getSeparator()),firstParty:(0,Qe.he)(t),onClick:o})}));const tt=(0,r.memo)((function(e){var t=e.event,n=e.onClick,o=(0,r.useCallback)((function(e){e.preventDefault(),n(t)}),[t,n]),i=(0,H.l4)(t.openingDate),a=(0,H.l4)(t.closingDate),c=t.concerts[0].concert,s=c.artists[0];return(0,re.jsx)($e.A,{title:(0,Je.a9)(c),subTitle:"".concat((0,H.WZ)(i,a)," • ").concat(x.Ru.get("concerts.count",t.concerts.length)),onClick:o,imageUrl:s.imageUri,uri:(0,G.B4)(c.id).toURI()})}));const nt=(0,r.memo)((function(e){var t,n=e.event,o=e.position,i=e.sectionSpec,a=e.onOpenGroupedEvent,c=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,s=null==c?void 0:c.id,l=c&&(0,G.B4)(c.id).toURI(),u=(0,S.s)(),d=(0,r.useMemo)((function(){return null==i?void 0:i.eventCardFactory({identifier:null!=s?s:"",position:o,uri:null!=l?l:""})}),[i,s,l,o]),v=(0,I.t)(d);if(n.concerts.length>1)return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(tt,{event:n,onClick:function(e){a(e),d&&u.logInteraction(d.hitUiReveal())}})});return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(et,{concert:c,isVirtual:"online"===n.source,onClick:function(){d&&u.logInteraction(d.hitUiNavigate({destination:l}))}})})})),ot="D_V60ibMxH9Vy7kyvWvc",it="anRK1X9LKn5HxZQJB5Tl",at="shUifmqVle_F5ILRpCqe",rt="_WibGTg4OzGdsTf18zK1",ct="LHhL2094jqvK0MNwlGAu",st="yRQGIh3Y05BG51IHUW2b",lt="fT86P9Div4C8GXI9hZ36",ut="G8sU0RZZT_ZhaEv7B26V";const dt=(0,r.memo)((function(e){var t=e.date,n=e.image,o=e.title,i=e.subTitle,a=e.dateRange,r=e.uri,c=e.onClick,s=t?(0,H.l4)(t):void 0;return(0,re.jsxs)(K.Link,{to:r,className:ot,"data-testid":"concert-row",onClick:c,children:[(0,re.jsx)("time",{dateTime:t,className:it,children:s&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(E.E,{as:"div",variant:"bodySmall",children:(0,H.tj)(s)}),(0,re.jsx)(E.E,{variant:"bodyMediumBold",children:(0,H.Py)(s)})]})}),(0,re.jsx)(T._,{src:n,alt:"",role:"presentation",className:at}),(0,re.jsxs)("div",{className:ct,children:[(0,re.jsxs)("div",{className:st,children:[(0,re.jsx)(E.E,{variant:"bodyMedium",className:rt,children:o}),(0,re.jsx)(E.E,{variant:"bodySmall","data-testid":"event-venue",semanticColor:"textSubdued",children:i})]}),(0,re.jsx)(E.E,{as:"span",variant:"bodyMedium",semanticColor:"textSubdued",className:lt,children:a}),(0,re.jsx)("div",{className:ut,children:s&&(0,re.jsx)(E.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:(0,H.WB)(s)})})]})]})}));const vt=(0,r.memo)((function(e){var t=e.event,n=e.onClick,o=(0,r.useCallback)((function(e){e.preventDefault(),n(t)}),[t,n]),i=(0,H.l4)(t.openingDate),a=(0,H.l4)(t.closingDate),c=t.concerts[0].concert,s=c.artists[0];return(0,re.jsx)(dt,{image:null==s?void 0:s.imageUri,title:(0,Je.a9)(c),subTitle:x.Ru.get("concerts.count",t.concerts.length),dateRange:(0,H.WZ)(i,a),uri:null==c?void 0:c.id,onClick:o})}));const mt=(0,r.memo)((function(e){var t=e.concert,n=e.isVirtual,o=e.onClick,i=t.venue,a=t.location,r=t.artists[0],c=(0,H.l4)(t.startDate.localDate);return(0,re.jsx)(dt,{date:t.startDate.localDate,image:null==r?void 0:r.imageUri,title:(0,Je.a9)(t),subTitle:n?i:[i,a].join(x.Ru.getSeparator()),dateRange:(0,H.Y)(c),uri:(0,G.B4)(t.id).toURI(),onClick:o})}));const ft=(0,r.memo)((function(e){var t,n=e.event,o=e.position,i=e.sectionSpec,a=e.onOpenGroupedEvent,c=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,s=null==c?void 0:c.id,l=c&&(0,G.B4)(c.id).toURI(),u=(0,S.s)(),d=(0,r.useMemo)((function(){return null==i?void 0:i.eventRowFactory({identifier:null!=s?s:"",position:o,uri:null!=l?l:""})}),[i,s,l,o]),v=(0,I.t)(d);if(n.concerts.length>1)return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(vt,{event:n,onClick:function(e){a(e)}})});return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(mt,{concert:c,isVirtual:"online"===n.source,onClick:function(){d&&u.logInteraction(d.hitUiNavigate({destination:null!=l?l:""}))}})})}));var gt=function(e){var t=null==e?void 0:e.match(/(202\d)-([01]\d)-([0-3]\d)/);if(t){var n=(0,a.A)(t,4),o=n[1],i=n[2],r=n[3];return new Date(parseInt(o,10),parseInt(i,10)-1,parseInt(r,10))}},pt=function(){var e,t,n=(0,l.ok)(),o=(0,a.A)(n,1)[0],i=null===(e=o.get("startDate"))||void 0===e?void 0:e.trim(),r=null===(t=o.get("endDate"))||void 0===t?void 0:t.trim(),c=gt(i),s=gt(r);return c&&s&&{from:c,to:s}},ht=(n(60850),n(36490),n(4207),n(64334),n(9433),n(26308),n(84815),n(32303)),yt=n(65180),xt=n(14124),jt=n(73155),bt=(n(25367),n(51148)),_t=(n(51945),n(77458),n(39921),n(70043)),Ct=n(67017),Nt=n(91985),kt=n(3091),Rt=n(17176),St=n(6924),It=n(72653),Dt=n(94222),wt=n(96644),Et=n(87584),At=n(63514),Ot=n(16856),Ft=n(54869),Lt=n(96132),Ut=n(24808),Pt=n(47613),Mt=n(2283),Tt=n(88593),Bt=n(56708),zt=n(64416),Gt=n(79494),Kt=n(38408),Ht=n(62224),Vt=n(63240),Wt=n(45523),qt=n(10632),Xt=n(54701),Zt=n(80675),Yt=n(72861),Qt=n(76804),Jt=n(55128),$t=n(53406),en=n(15643),tn=n(1467),nn=n(24428),on=n(48199),an=n(61845),rn=n(83536),cn=n(70756),sn=n(63855),ln=n(23484),un=n(96344),dn=n(38903),vn=n(17530),mn=n(33140),fn=n(64741),gn=n(71418),pn=n(44135),hn=n(29110),yn=n(32409),xn=n(67031),jn=n(98045),bn=n(86111),_n=n(11554),Cn=n(61753),Nn=n(87318),kn=n(89949),Rn=n(22180),Sn=n(85428),In={af:_t.af,am:Ct.c,ar:Nt.ar,arEG:kt.m,arMA:Rt.E,arSA:St.G,az:It.az,bg:Dt.bg,bn:wt.bn,bho:Ct.c,bs:Et.bs,ca:At.ca,cs:Ot.cs,da:Ft.da,de:Lt.de,el:Ut.el,en:Ct.c,enGB:Pt.b,es419:Mt.es,es:Mt.es,esAR:Mt.es,esMX:Mt.es,et:Tt.et,eu:Bt.eu,fa:zt.$,fi:Gt.fi,fil:Ct.c,frCA:Kt.V,fr:Ht.fr,gl:Vt.gl,gu:Wt.gu,he:qt.he,hi:Xt.hi,hr:Zt.hr,hu:Yt.hu,id:Qt.id,is:Jt.is,it:$t.it,ja:en.ja,kn:tn.kn,ko:nn.ko,lt:on.lt,lv:an.lv,mk:rn.mk,ml:Ct.c,mr:Ct.c,ms:cn.ms,nb:sn.nb,ne:Ct.c,nl:ln.nl,or:Ct.c,paIN:Ct.c,paPK:Ct.c,pl:un.pl,ptBR:dn.F,ptPT:vn.pt,ro:mn.ro,ru:fn.ru,sk:gn.sk,sl:pn.sl,sr:hn.sr,sv:yn.sv,sw:Ct.c,ta:xn.ta,te:jn.te,th:bn.th,tr:_n.tr,uk:Cn.uk,ur:Ct.c,vi:Nn.vi,zhCN:kn.g,zhHK:Rn.a,zhTW:Sn.G,zu:Ct.c},Dn=function(e){return function(e){return Object.keys(In).includes(e)}(e)?In[e]:Ct.c},wn=n(12058),En=n(42534),An=function(e){var t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));var n=new Date(t);return n.setDate(t.getDate()+2),{from:t,to:n}},On=function(e){var t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));var n=new Date(t);n.setDate(t.getDate()+7);var o=new Date(n);return o.setDate(n.getDate()+2),{from:n,to:o}},Fn=function(e,t){return!!(null!=e&&e.from&&null!=e&&e.to&&null!=t&&t.from&&null!=t&&t.to)&&((0,wn.r)(e.from,t.from)&&(0,wn.r)(e.to,t.to))},Ln=function(e){return(0,En.x)(e,{representation:"date"})};const Un="C1USyigFSYyc22_BmsgB",Pn="Cwo5ZgH_QLzFbSjWjglf",Mn="iL7PRv0yTC9UFjHfDJDW",Tn="oxBa3kaduGMhYxc9I_Uu",Bn="x0xbkRE3CyGK_i406MSX",zn="zT6EzYpjnj9pMKhMFQB7",Gn="YOLVSXg5_gdh0VfL2oNl",Kn="ynXemVsankd4H506x8D2";var Hn={formatCaption:function(e){return x.Ru.formatDate(e,{month:"long",year:"numeric"})},formatDay:function(e){return x.Ru.formatDate(e,{day:"numeric"})},formatWeekdayName:function(e){return x.Ru.formatDate(e,{weekday:"short"})}};const Vn=(0,r.memo)((function(e){var t,n=e.onDone,o=e.onClose,i=e.spec,c=(0,r.useState)(e.dateRange),s=(0,a.A)(c,2),l=s[0],u=s[1],d=(0,bt.W)(),v=(0,I.t)(i),m=(0,S.s)(),g=new Date,p=An(g),h=On(g),y=Fn(l,p),j=Fn(l,h),b=new Date;return b.setFullYear(b.getFullYear()+1),(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(B.A,{isOpen:!0,children:(0,re.jsxs)("section",{className:Un,children:[(0,re.jsx)(f.H,{className:Pn,iconOnly:M.M,size:"small",onClick:o,"aria-label":x.Ru.get("close_button_action")}),(0,re.jsxs)("div",{className:Mn,children:[(0,re.jsx)(E.E,{as:"h3",variant:"bodyMediumBold",children:x.Ru.get("live_events.date_picker_dialog_title")}),(0,re.jsxs)("div",{className:Tn,children:[(0,re.jsx)(xt.v,{className:Bn,size:"md",selectedColorSet:"brightAccent",selected:y,onClick:function(){u(y?void 0:p),i&&m.logInteraction(i.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:x.Ru.get("live_events.this_weekend_preset")}),(0,re.jsx)(xt.v,{className:Bn,size:"md",selectedColorSet:"brightAccent",selected:j,onClick:function(){u(j?void 0:h),i&&m.logInteraction(i.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:x.Ru.get("live_events.next_weekend_preset")})]})]}),(0,re.jsx)(jt.hv,{mode:"range",selected:l,onSelect:u,numberOfMonths:2,defaultMonth:null===(t=e.dateRange)||void 0===t?void 0:t.from,fromDate:new Date,toDate:b,formatters:Hn,dir:d?"rtl":"ltr",modifiersClassNames:{today:zn},locale:Dn(x.Ru.getLocaleForFormatting())}),(0,re.jsxs)("div",{className:Gn,children:[(0,re.jsx)(f.H,{className:Kn,size:"small",onClick:function(){u(void 0)},disabled:!(null!=l&&l.from),children:x.Ru.get("live_events.date_picker_dialog_clear")}),(0,re.jsx)(ht.$,{size:"small",onClick:function(){if(null!=l&&l.from){var e=l.from,t=l.to;n({from:e,to:t||e})}else n()},children:x.Ru.get("live_events.date_picker_dialog_done")})]})]})})})})),Wn="WnIhxhr9MIQjVvkvUQTf",qn="ETRYfT8oEUJuUDLgOBUX";const Xn=function(e){var t=(0,r.useState)(!1),n=(0,a.A)(t,2),o=n[0],i=n[1],c=(0,l.ok)(),s=(0,a.A)(c,2)[1],u=(0,S.s)(),d=(0,r.useMemo)((function(){var t;return null===(t=e.spec)||void 0===t?void 0:t.datePickerModalFactory()}),[e.spec]),v=(0,r.useMemo)((function(){var t;return null===(t=e.spec)||void 0===t?void 0:t.headerFactory()}),[e.spec]),m=pt(),f=An(new Date),g=On(new Date),p=(0,r.useCallback)((function(e){var t={filter:"all"};if(e&&(t.startDate=Ln(e.from),t.endDate=Ln(e.to),d)){var n=new URLSearchParams(t).toString();u.logInteraction(d.doneButtonFactory({uri:n}).hitUiNavigate({destination:n}))}i(!1),s(t),d&&u.logInteraction(d.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[s,d,u]),h=(0,r.useCallback)((function(e){var t={filter:"all"};Fn(m,e)||(t.startDate=Ln(e.from),t.endDate=Ln(e.to)),s(t)}),[m,s]),y=m?ht.$:A.n;return(0,re.jsxs)("div",{className:Wn,children:[(0,re.jsx)("div",{children:(0,re.jsx)(y,{className:qn,iconLeading:yt.R,onClick:function(){i(!0),v&&u.logInteraction(v.datePickerButtonFactory().hitUiReveal())},size:"small",children:m?(0,H.tX)(m):x.Ru.get("live_events.date_picker_button_text")})}),o&&(0,re.jsx)(Vn,{onClose:function(){i(!1),d&&u.logInteraction(d.closeButtonFactory().hitUiHide())},onDone:p,dateRange:m,spec:d}),(0,re.jsxs)("div",{children:[(0,re.jsx)(xt.v,{size:"sm",selectedColorSet:"brightAccent",selected:Fn(m,f),onClick:function(){if(h(f),v){var e={startDate:Ln(f.from),endDate:Ln(f.to)},t=new URLSearchParams(e).toString();u.logInteraction(v.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},className:qn,children:x.Ru.get("live_events.this_weekend_preset")}),(0,re.jsx)(xt.v,{size:"sm",selectedColorSet:"brightAccent",selected:Fn(m,g),onClick:function(){if(h(g),v){var e={startDate:Ln(g.from),endDate:Ln(g.to)},t=new URLSearchParams(e).toString();u.logInteraction(v.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},className:qn,children:x.Ru.get("live_events.next_weekend_preset")})]})]})};var Zn=(0,r.memo)((function(e){var t=e.eventGroups,n=e.locationName,o=e.isLoading,i=e.feedSpec,a=e.onOpenGroupedEvent,c=e.layout,s=(0,r.useMemo)((function(){return null==i?void 0:i.eventSectionFactory({identifier:"all",position:1})}),[i]),l=(0,I.t)(s);return o?(0,re.jsx)(L.A,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,re.jsx)(F.p,{title:x.Ru.get("concerts.error.no_concerts_found_title"),message:x.Ru.get("concerts.error.no_concerts_found_message",n),renderInline:!0}):(0,re.jsx)("div",{ref:l,children:t.map((function(e){return(0,re.jsxs)("div",{className:ze,children:["grid"===c&&(0,re.jsx)(U.$,{total:e.events.length,title:x.Ru.formatDate(new Date("".concat(e.date,"T00:00:00")),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,withEncoreCards:!1,children:e.events.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(nt,{event:e,position:t,sectionSpec:s,onOpenGroupedEvent:a},null==o?void 0:o.id)}))}),"list"===c&&(0,re.jsxs)("div",{children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Ee,children:x.Ru.formatDate(new Date("".concat(e.date,"T00:00:00")),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(ft,{event:e,position:t,sectionSpec:s,onOpenGroupedEvent:a},null==o?void 0:o.id)}))]})]},e.date)}))}):null}));const Yn=(0,r.memo)((function(e){var t,n,c,u=e.geonameId,d=e.spec,v=e.layout,m=e.onLocationNameChange,f=pt(),g=(0,s.Zp)(),p=(0,l.ok)(),h=(0,a.A)(p,1)[0],y=(0,r.useState)(),j=(0,a.A)(y,2),b=j[0],_=j[1],C=(0,Se.W)(),N=(0,r.useMemo)((function(){return null==d?void 0:d.headerFactory()}),[d]),k=(0,r.useMemo)((function(){return null==d?void 0:d.cityInfoFactory()}),[d]),R=(n={geonameId:u,startDate:f&&(0,Qe.bU)(f.from),endDate:f&&(0,Qe.bU)(f.to)},c=(0,o.NC)(i.b3k),(0,me.q)({queryKey:["concerts","all",n],queryFn:function(e){var t=e.pageParam;return je(t,n,c)},staleTime:Ce,initialPageParam:1,placeholderData:ve.rX,getNextPageParam:function(e,t){if(!(t.length>=50)&&0!==e.events.length)return t.length+1}})),S=R.data,I=R.isLoading,D=R.hasNextPage,w=R.isFetchingNextPage,F=R.fetchNextPage,L=(0,r.useMemo)((function(){var e;return(0,Qe.fD)(null!==(e=null==S?void 0:S.pages)&&void 0!==e?e:[])}),[null==S?void 0:S.pages]),U=null==S||null===(t=S.pages[0])||void 0===t?void 0:t.userLocation;(0,r.useEffect)((function(){U&&(null==m||m(U))}),[U,m]);var P=U||x.Ru.get("concerts.default_location");return(0,re.jsxs)("div",{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("concerts_shows_in")," ").concat(P)}),(0,re.jsxs)("div",{className:Ke,children:[(0,re.jsx)(Re.A,{handleLocationChange:function(e){C({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&g({pathname:(0,Qe.nm)(e.geonameId,e.location),search:"?".concat(h.toString())})},locationStr:P,headerSpec:N}),(0,re.jsx)(Xn,{})]}),(0,re.jsx)(Zn,{isLoading:I,locationName:P,eventGroups:L,onOpenGroupedEvent:function(e){var t;_(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];C({type:"click",intent:"open-grouped-live-event",targetUri:n})},feedSpec:d,layout:v}),D&&(0,re.jsx)("div",{className:Ge,children:(0,re.jsx)(A.n,{disabled:w,onClick:function(){F()},children:x.Ru.get("concerts.load_more")})}),(0,re.jsx)(ue,{event:b,locationName:P,feedSpec:d,onClose:function(){return _(void 0)}}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),S&&S.pages[0]&&S.pages[0].userLocationGeonameId&&(0,re.jsx)(Ye,{geonameId:S.pages[0].userLocationGeonameId,locationName:P,spec:k})]})}));var Qn=n(9615),Jn=n(52746),$n=n(34478);const eo=(0,r.memo)((function(e){var t=e.title,n=void 0===t?"":t,o=e.identifier,i=e.position,a=e.events,c=e.feedSpec,s=e.onOpenGroupedEvent,l=e.layout,u=(0,r.useMemo)((function(){return null==c?void 0:c.eventSectionFactory({identifier:o,position:i})}),[c,o,i]),d=(0,I.t)(u);return 0===a.length?null:(0,re.jsxs)("div",{className:Ie,ref:d,children:["grid"===l&&(0,re.jsx)($n.pZ,{value:"headered-grid",index:i,children:(0,re.jsx)(U.$,{total:a.length,title:n,showAll:!0,withEncoreCards:!1,children:a.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(nt,{event:e,position:t,sectionSpec:u,onOpenGroupedEvent:s},null==o?void 0:o.id)}))})}),"list"===l&&(0,re.jsxs)("div",{children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Ee,children:n}),a.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(ft,{event:e,position:t,sectionSpec:u,onOpenGroupedEvent:s},null==o?void 0:o.id)}))]})]})}));const to=(0,r.memo)((function(e){var t,n,c,u,d=e.spec,v=e.layout,m=e.onLocationNameChange,f=(0,r.useState)(),g=(0,a.A)(f,2),p=g[0],h=g[1],y=(0,l.ok)(),j=(0,a.A)(y,1)[0],b=(c=e.geonameId,u=(0,o.NC)(i.b3k),(0,de.I)({queryKey:["concerts","popular",{geonameId:c}],queryFn:function(){return be(c,u)},staleTime:Ce,placeholderData:ve.rX})),_=(null===(t=b.data)||void 0===t?void 0:t.userLocation)||x.Ru.get("concerts.default_location"),C=(0,r.useMemo)((function(){return null==d?void 0:d.headerFactory()}),[d]),N=(0,s.Zp)();return(0,r.useEffect)((function(){var e;null!==(e=b.data)&&void 0!==e&&e.userLocation&&(null==m||m(b.data.userLocation))}),[null===(n=b.data)||void 0===n?void 0:n.userLocation,m]),(0,re.jsxs)("div",{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("concerts_shows_in")," ").concat(_)}),(0,re.jsx)("div",{className:Ke,"data-testid":"location-selector",children:(0,re.jsx)(Re.A,{handleLocationChange:function(e){(0,Qn.d)({action_type:"click",action_intent:"change-live-events-location",view_uri:"",item_id:""}),null!=e&&e.geonameId&&N({pathname:(0,Qe.nm)(e.geonameId,e.location),search:"?".concat(j.toString())})},locationStr:_,headerSpec:C})}),(0,re.jsxs)("div",{className:He,children:[(0,re.jsx)(E.E,{variant:"titleSmall",semanticColor:"textBase",children:x.Ru.get("live_events.for_you_anonymous_heading")}),(0,re.jsx)(E.E,{variant:"bodyMedium",className:Ve,semanticColor:"textSubdued",children:x.Ru.get("live_events.for_you_anonymous_subheading")}),(0,re.jsx)(ht.$,{colorSet:"invertedLight",className:We,onClick:function(){return(0,Jn.ie)()},children:x.Ru.get("live_events.sign_up_free")})]}),b.data&&(0,re.jsx)(eo,{title:x.Ru.get("concerts.popular_concerts_near",_),identifier:"popular",position:0,events:b.data.events,onOpenGroupedEvent:function(e){var t;h(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];(0,Qn.d)({action_type:"click",action_intent:"open-grouped-live-event",target_uri:n,view_uri:"",item_id:""})},feedSpec:d,layout:v}),(0,re.jsx)(ue,{event:p,locationName:_,feedSpec:d,onClose:function(){return h(void 0)}}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),b.data&&b.data.userLocationGeonameId&&(0,re.jsx)(Ye,{geonameId:b.data.userLocationGeonameId,locationName:_})]})}));n(63619),n(93902),n(50247),n(88190);const no=(0,r.memo)((function(e){var t=e.isLoading,n=e.events,o=e.locationName,i=e.spec,a=e.layout,r=e.onOpenGroupedEvent;if(t)return(0,re.jsx)(L.A,{hasError:!1,errorMessage:""});if(0===n.length)return(0,re.jsx)(F.p,{title:x.Ru.get("concerts.error.no_concerts_found_title"),message:x.Ru.get("concerts.error.no_concerts_found_message",o),renderInline:!0});var c=function(e){var t={popular:[],recommended:[],online:[]};return e.forEach((function(e){switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t}(n);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(eo,{title:x.Ru.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:c.online,onOpenGroupedEvent:r,feedSpec:i,layout:a}),(0,re.jsx)(eo,{title:x.Ru.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:c.recommended,onOpenGroupedEvent:r,feedSpec:i,layout:a}),(0,re.jsx)(eo,{title:x.Ru.get("concerts.popular_concerts_near",o),identifier:"popular",position:2,events:c.popular,onOpenGroupedEvent:r,feedSpec:i,layout:a})]})}));n(60905),n(51725);var oo=n(71526),io=n(694),ao=n(21746),ro=n(39437),co=n(37686),so=n(28937),lo=new co.l("promoCardPlaylist","query","ad0959194c2cec8bf10b87c74923628dd7c2ef2abbd217374279b0bc728c3cc2",null);const uo="Cot6ZntaldMo77XCx1dt",vo="vfWT92cAm89qtD3Lwfrc",mo="XyJgy3JOLfeFBo2CiltA",fo="UI2hGxMrqbScQtyg3FzT",go="mnwdEtmP084CWa7aUEzN";var po=function(){var e,t,n=(0,oo.V)(),o=(0,r.useContext)(ao.w),i=(0,de.I)({queryKey:["cny-resolve"],queryFn:function(){return o.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you")},enabled:!n,staleTime:1/0}).data,a=(e={uri:i},t={enabled:!!i},(0,so.I)(lo,e,t)).data;if("Playlist"===(null==a?void 0:a.playlistV2.__typename))return a.playlistV2};const ho=(0,r.memo)((function(e){var t,n=po();if(!n)return null;var o=(0,ro.g)(null===(t=n.images.items[0])||void 0===t?void 0:t.sources,{desiredSize:88});return(0,re.jsxs)(K.default,{to:n.uri,className:uo,children:[(0,re.jsx)(io._,{src:null==o?void 0:o.url,loading:"lazy",alt:"",ariaHidden:!0,className:vo}),(0,re.jsxs)("div",{className:mo,children:[(0,re.jsx)(E.E,{as:"h3",variant:"bodyMediumBold",className:fo,children:n.name}),(0,re.jsx)(E.E,{as:"p",variant:"bodySmall",className:go,children:n.description})]})]})}));const yo=(0,r.memo)((function(e){var t=e.geonameId,n=e.spec,c=e.layout,l=e.onLocationNameChange,u=(0,s.Zp)(),d=(0,r.useState)(),v=(0,a.A)(d,2),m=v[0],f=v[1],g=(0,Se.W)(),p=(0,r.useMemo)((function(){return n.headerFactory()}),[n]),h=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.NC)(i.b3k);return(0,de.I)({queryKey:["concerts",e],queryFn:function(){return xe(e.geonameId,t)},staleTime:Ce,placeholderData:ve.rX})}({geonameId:t}),y=h.data,j=h.isLoading;(0,r.useEffect)((function(){null!=y&&y.userLocation&&(null==l||l(y.userLocation))}),[null==y?void 0:y.userLocation,l]);var b=(0,o.NC)(i.P98,{loadingValue:!1}),_=(null==y?void 0:y.userLocation)||x.Ru.get("concerts.default_location");return(0,re.jsxs)("div",{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("concerts_shows_in")," ").concat(_)}),(0,re.jsx)("div",{className:Ke,"data-testid":"location-selector",children:(0,re.jsx)(Re.A,{handleLocationChange:function(e){g({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&u((0,Qe.nm)(e.geonameId,e.location))},locationStr:_,headerSpec:p})}),b&&(0,re.jsx)("div",{className:Ze,children:(0,re.jsx)(ho,{})}),(0,re.jsx)(no,{isLoading:j,events:(null==y?void 0:y.events)||[],locationName:_,spec:n,onOpenGroupedEvent:function(e){var t;f(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];g({type:"click",intent:"open-grouped-live-event",targetUri:n})},layout:c}),(0,re.jsx)(ue,{event:m,locationName:_,feedSpec:n,onClose:function(){return f(void 0)}}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),y&&y.userLocationGeonameId&&(0,re.jsx)(Ye,{geonameId:y.userLocationGeonameId,locationName:_})]})}));const xo=(0,r.memo)((function(e){var t,n,o,i=e.spec,c=e.layout,s=(0,r.useState)(),l=(0,a.A)(s,2),u=l[0],d=l[1],v=(0,de.I)({queryKey:["savedConcerts"],queryFn:_e}),m=(0,Se.W)(),f=(null===(t=v.data)||void 0===t?void 0:t.userLocation)||x.Ru.get("concerts.default_location");return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("live_events.label"))}),null!==(n=v.data)&&void 0!==n&&n.events.length?(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(eo,{title:x.Ru.get("concerts_upcoming"),identifier:"saved",position:0,events:null===(o=v.data)||void 0===o?void 0:o.events,feedSpec:i,onOpenGroupedEvent:function(e){var t;d(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];m({type:"click",intent:"open-grouped-live-event",targetUri:n})},layout:c})}):(0,re.jsxs)("div",{className:Ue,children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Te,children:x.Ru.get("concerts_interested_in_live_events")}),(0,re.jsx)(E.E,{as:"p",className:Be,children:x.Ru.get("concerts_no_events_description")}),(0,re.jsx)(K.default,{to:"/concerts",className:Pe,children:(0,re.jsx)(A.n,{as:"span",className:Me,children:x.Ru.get("concerts_browse_more_events")})})]}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),(0,re.jsx)(ue,{event:u,locationName:f,feedSpec:i,onClose:function(){return d(void 0)}})]})}));var jo=u.blueViolet100;const bo=function(){var e=(0,c.d4)(R.Ht).isAnonymous,t=(0,s.zy)(),n=t.pathname+t.search,i=(0,S.s)(),u=(0,o.NC)(w.oq),E=(0,r.useState)("grid"),A=(0,a.A)(E,2),O=A[0],F=A[1],L=(0,D.r)(y.s,{}).spec,U=(0,l.ok)(),P=(0,a.A)(U,2),M=(P[0],P[1]),T=ke({isAnonymous:e,isInterestedEnabled:u}),B=(0,r.useMemo)((function(){return L.headerFactory().liveEventsNavbarFactory({uri:n,reason:T.type})}),[L,T,n]),z=(0,I.t)(B),G=(0,r.useState)(),K=(0,a.A)(G,2),H=K[0],V=K[1],W=[{value:"foryou",label:x.Ru.get("live_events.for_you_tab"),content:e?(0,re.jsx)(to,{geonameId:T.geonameId,spec:L,layout:O,onLocationNameChange:V}):(0,re.jsx)(yo,{geonameId:T.geonameId,spec:L,layout:O,onLocationNameChange:V})},{value:"all",label:x.Ru.get("live_events.all_events_tab"),content:(0,re.jsx)(Yn,{geonameId:T.geonameId,spec:L,layout:O,onLocationNameChange:V})},{value:"saved",label:x.Ru.get("concerts_interested"),content:(0,re.jsx)(xo,{spec:L,layout:O})}],q=function(){var e=L.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:O,stateAfterToggle:"grid"===O?"list":"grid"});i.logInteraction(e),F("grid"===O?"list":"grid")},X=e&&H?x.Ru.get("live_events.location_concert_tickets",H):x.Ru.get("live_events.label");return(0,re.jsxs)("section",{className:De,children:[(0,re.jsxs)(b.z,{size:b.K.SMALL,backgroundColor:jo,children:[(0,re.jsx)(_.Y,{children:(0,re.jsx)(k.mm,{children:X})}),(0,re.jsx)(C.h,{children:(0,re.jsx)(N.X,{text:X})})]}),(0,re.jsxs)("div",{className:we,children:[(0,re.jsx)(j.K,{backgroundColor:jo}),(0,re.jsx)("div",{className:Oe,ref:z,children:(0,re.jsxs)(d.t,{currentTab:T.type,onTabChange:function(e,n){if(void 0!==n){var o=W[n].value,a="".concat(t.pathname,"?filter=").concat(o),r=L.headerFactory().liveEventsNavbarFactory({uri:a,reason:o}).hitUiNavigate({destination:a});i.logInteraction(r),M({filter:o})}},children:[(0,re.jsxs)("div",{className:Le,children:[(0,re.jsx)(v.w,{"aria-label":"live events navbar",children:W.map((function(e){return(0,re.jsx)(m.V,{value:e.value,id:e.value,label:e.label,className:Fe},e.value)}))}),"grid"===O&&(0,re.jsx)(f.H,{"aria-label":x.Ru.get("concerts.feed_list_layout"),iconOnly:g.N,className:Ae,onClick:q,size:"small"}),"list"===O&&(0,re.jsx)(f.H,{"aria-label":x.Ru.get("concerts.feed_grid_layout"),iconOnly:p.D,className:Ae,onClick:q,size:"small"})]}),W.map((function(e){return(0,re.jsx)(h.K,{value:e.value,children:e.content},e.value)}))]})})]})]})};var _o=n(87446),Co=(n(94238),n(7410),n(46384)),No=n(93209),ko=n(81226),Ro=(n(85367),n(96358),n(63222),n(41679),n(81443),n(74457),n(6844),n(78003),n(67626),n(70084)),So=n(2549),Io=new co.l("concertFeed","query","2c9fb8f35175a8a3f0bd4cbe9de95c3298228db153577f0492e54251c2f813bb",null);function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(n),!0).forEach((function(t){(0,ko.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Eo=function(e){var t,n,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.q,a=(0,r.useContext)(Ro.j).request,c=i({queryKey:["concert-feed",e.geoHash,e.geonameId,e.dateRange],queryFn:function(t){var n=t.pageParam;return(0,So.c)(a,Io,wo(wo({},e),{},{paginationKey:""===n?null:n}))},staleTime:6e4,gcTime:6e4,enabled:!!e.geoHash||!!e.geonameId,initialPageParam:"",getNextPageParam:function(e){var t,n;if(!(0,Co.Bw)(null==e||null===(t=e.data)||void 0===t?void 0:t.liveEventsFeed))return"";var o=null!==(n=e.data.liveEventsFeed.sections.find((function(e){return"AllEvents"===e.__typename})))&&void 0!==n?n:{};return(0,Co.dR)(o)?o.paginationKey:""}}),s=(n=null===(t=c.data)||void 0===t?void 0:t.pages,o=null==n?void 0:n.reduce((function(e,t){var n,o,i=null==e?void 0:e.liveEventsFeed,a=null==t||null===(n=t.data)||void 0===n?void 0:n.liveEventsFeed;if(!(0,Co.Bw)(a)||!(0,Co.Bw)(i))return e;var r=null!==(o=i.sections.find((function(e){return"AllEvents"===e.__typename})))&&void 0!==o?o:{},c=(0,Co.dR)(r)?r.sections:[];return{liveEventsFeed:{sections:a.sections.map((function(e){if("AllEvents"!==e.__typename&&!(0,Co.dR)(e))return e;var t=c.map((function(t){var n,o=t.key,i=e.sections.find((function(e){return e.key===o}));return wo(wo({},t),{},{concerts:[].concat((0,No.A)(t.concerts),(0,No.A)(null!==(n=null==i?void 0:i.concerts)&&void 0!==n?n:[]))})})),n=e.sections.filter((function(e){return t.findIndex((function(t){return t.key===e.key}))}));return wo(wo({},e),{},{sections:[].concat((0,No.A)(t),(0,No.A)(n))})}))}}}),{liveEventsFeed:{sections:[]}}),o);return wo(wo({},c),{},{data:s})};var Ao=function(e){var t,n,o=(0,a.A)(e,1)[0];if("visuals"in o.data){var i=null!==(t=null===(n=o.data.visuals.avatarImage)||void 0===n?void 0:n.sources)&&void 0!==t?t:[],r=(0,a.A)(i,1)[0];return null==r?void 0:r.url}};const Oo=function(e){var t=(0,r.useState)(!1),n=(0,a.A)(t,2),o=n[0],i=n[1],c=(0,r.useMemo)((function(){var t;if((0,Co.ys)(e)){var n=(0,a.A)(e.concerts,1)[0];if((0,Co.$V)(n)){var o=(0,G.o_)(n.data.uri);return null===(t=e.spec)||void 0===t?void 0:t.eventCardFactory({identifier:null==o?void 0:o.id,position:e.position,uri:n.data.uri})}}}),[e]),s=(0,S.s)(),l=(0,I.t)(c);if((0,Co.ys)(e)){var u=(0,a.A)(e.concerts,1)[0];if((0,Co.$V)(u)){var d=(0,a.A)(u.data.artists.items,1)[0],v=Ao(u.data.artists.items),m=(0,H.Vi)(e.concerts),f=m.startDate,g=m.endDate;return{isModalOpen:o,handleClick:function(e){e.preventDefault(),i(!0),c&&s.logInteraction(c.hitUiReveal())},handleClose:function(){return i(!1)},concert:{uri:u.data.uri,title:u.data.title,imageUrl:v,dateRange:(0,H.WZ)(f,g),startDateIsoString:u.data.startDateIsoString},artist:{uri:"uri"in d.data?d.data.uri:"",name:"profile"in d.data?d.data.profile.name:"",imageUri:null!=v?v:""},location:{city:u.data.location.city,venue:u.data.location.name},totalConcerts:e.concerts.length,concerts:e.concerts.map((function(e){return(0,Co.$V)(e)?{uri:e.data.uri,title:e.data.title,location:{city:e.data.location.city,venue:e.data.location.name},startDateIsoString:e.data.startDateIsoString}:null})).filter(Co.se),ref:l}}}};var Fo=function(e){var t,n=(0,S.s)(),o=(0,r.useMemo)((function(){var t,n,o=(0,G.o_)((0,Co.$V)(e)?e.data.uri:"");return null===(t=e.spec)||void 0===t?void 0:t.eventCardFactory({identifier:null==o?void 0:o.id,position:e.position,uri:null!==(n=null==o?void 0:o.toURI())&&void 0!==n?n:""})}),[e]);if((0,Co.$V)(e))return{imageUrl:null!==(t=Ao(e.data.artists.items))&&void 0!==t?t:"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(x.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,H.Y)(new Date(e.data.startDateIsoString)),handleClick:function(){return o&&n.logInteraction(o.hitUiNavigate({destination:e.data.uri}))}}};const Lo="V5SKycHF8ljKTRcTXM52",Uo="CzWhnZA1N50SUeRTGNXg",Po="kA_2O3KDNrREQ60CWtsH",Mo="eIRhBzZ6DVZOR5G3KjAQ",To="o9A1xL55C2qn_cIvXSfJ";function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var zo={ConcertGroup:function(e){var t,n=Oo(e);return n?(0,re.jsxs)("div",{ref:n.ref,children:[(0,re.jsx)(dt,{onClick:n.handleClick,uri:n.concert.uri,title:n.concert.title,image:null!==(t=n.concert.imageUrl)&&void 0!==t?t:"",subTitle:x.Ru.get("concerts.count",n.concerts.length),dateRange:n.concert.dateRange}),n.isModalOpen&&(0,re.jsx)(se,{onClose:n.handleClose,artist:n.artist,location:n.location,concerts:n.concerts})]}):null},ConcertV2ResponseWrapper:function(e){var t=Fo(e);return t?(0,re.jsx)(dt,{uri:t.uri,title:t.title,subTitle:t.subTitle,image:t.imageUrl,date:t.date,onClick:t.handleClick}):null}};const Go=function(e){var t=(0,r.useMemo)((function(){var t,n;return null===(t=e.spec)||void 0===t?void 0:t.eventSectionFactory({identifier:"all",position:null!==(n=e.position)&&void 0!==n?n:0})}),[e.spec,e.position]),n=(0,I.t)(t);return 0===e.concerts.length?null:(0,re.jsxs)("div",{ref:n,className:To,children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:e.title}),e.concerts.map((function(e,n){if(o=e.__typename,!Object.keys(zo).includes(null!=o?o:""))return null;var o,i=zo[e.__typename];return(0,re.jsx)(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){(0,ko.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:n,spec:t},e),n)})).filter(Co.se)]})};function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Ho={ConcertGroup:function(e){var t=Oo(e);return t?(0,re.jsxs)("div",{ref:t.ref,children:[(0,re.jsx)($e.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,imageUrl:t.concert.imageUrl,subTitle:"".concat(t.concert.dateRange," • ").concat(x.Ru.get("concerts.count",t.totalConcerts))}),t.isModalOpen&&(0,re.jsx)(se,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:function(e){var t=Fo(e);return t?(0,re.jsx)($e.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,imageUrl:t.imageUrl,date:t.date,onClick:t.handleClick}):null}};const Vo=function(e){var t=(0,r.useMemo)((function(){var t,n;return null===(t=e.spec)||void 0===t?void 0:t.eventSectionFactory({identifier:"all",position:null!==(n=e.position)&&void 0!==n?n:0})}),[e.spec,e.position]),n=(0,I.t)(t);return(0,re.jsx)("div",{ref:n,children:(0,re.jsx)(U.$,{total:e.concerts.length,title:e.title,showAll:!0,withEncoreCards:!1,children:e.concerts.map((function(e,n){if(o=e.__typename,!Object.keys(Ho).includes(null!=o?o:""))return null;var o,i=Ho[e.__typename];return(0,re.jsx)(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){(0,ko.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:n,spec:t},e),n)})).filter(Co.se)})})};var Wo=function(e){var t={"recommended-events":x.Ru.get("concerts_recommended_for_you"),"popular-events":x.Ru.get("concerts_popular")};return e in t?t[e]:x.Ru.get("concerts")};var qo={AllEvents:function(e){if(!(0,Co.dR)(e.data))return null;var t="grid"===e.layout?Vo:Go;return(0,re.jsxs)("div",{children:[e.data.sections.map((function(n,o){return(0,re.jsx)(t,{position:o,title:(i=n.key,null!=i&&i.match(/^(\d{4})-(\d{2})-(\d{2})$/)?(0,H.Fn)(new Date(i)):x.Ru.get("live_events.all_events_tab")),concerts:n.concerts,spec:e.spec},o);var i})),e.fetchNextPage&&(0,re.jsx)(A.n,{onClick:function(){return e.fetchNextPage&&e.fetchNextPage()},children:x.Ru.get("concerts.load_more")})]})},LiveEventSection:function(e){if(!(0,Co.eO)(e.data))return null;var t="grid"===e.layout?Vo:Go;return(0,re.jsx)(t,{title:Wo(e.data.key),concerts:e.data.concerts,spec:e.spec})}};const Xo=function(e){var t,n,o,i=Eo({geoHash:e.location.geoHash||null,geonameId:e.location.geonameId||null,dateRange:null!==(t=e.dateRange)&&void 0!==t&&t.from&&null!==(n=e.dateRange)&&void 0!==n&&n.to?{from:(0,Qe.bU)(null===(o=e.dateRange)||void 0===o?void 0:o.from),to:(0,Qe.bU)(e.dateRange.to)}:null}),a=i.data,r=i.isLoading,c=i.error,s=i.fetchNextPage;return r?(0,re.jsx)(L.A,{hasError:!1,errorMessage:""}):!(0,Co.Bw)(null==a?void 0:a.liveEventsFeed)||0===a.liveEventsFeed.sections.length||c?(0,re.jsx)(F.p,{title:x.Ru.get("concerts.error.no_concerts_found_title"),message:x.Ru.get("concerts.error.no_concerts_found_message",e.location.name),renderInline:!0}):(0,re.jsx)("div",{children:null==a?void 0:a.liveEventsFeed.sections.map((function(t,n){if(!(0,Co.w1)(t))return null;var o=qo[t.__typename];return(0,re.jsx)(o,{layout:e.layout,spec:e.spec,fetchNextPage:s,data:t},n)})).filter(Co.se)})};n(34318),n(66230),n(5464);var Zo=new co.l("concertLocationDetails","query","b13f195349f188fee25480ae889d782852d68663bf07743c654244454750d681",null),Yo=function(e){if(e&&"items"in e)return(0,a.A)(e.items,1)[0]},Qo=function(e,t){if(!e)return"/concerts";var n=null==t?void 0:t.normalize().replaceAll(/\W+/g,"-");return n?"/concerts/location/".concat(e,"-").concat(n):"/concerts/location/".concat(e)};const Jo=function(){var e,t,n,o,i,u,d,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.g,m=(0,Se.W)(),f=(0,c.d4)(R.Ht).isAnonymous,g=v().location,p=(0,l.ok)(),h=(0,a.A)(p,1)[0],y=(0,s.Zp)(),x=null!==(e=null==g?void 0:g.match(/^(\d+)/))&&void 0!==e?e:[],j=(0,a.A)(x,2)[1],b=(0,r.useState)(j?{geonameId:Number(j)}:void 0),_=(0,a.A)(b,2),C=_[0],N=_[1],k=(u={geonameId:null!=C&&C.geonameId?String(null==C?void 0:C.geonameId):null,isAnonymous:f},(0,so.I)(Zo,u,d)).data,S=function(e){var t;(N(e),m({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId)&&y({pathname:String(e.geonameId)===(null==k||null===(t=k.me)||void 0===t||null===(t=t.profile)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.geonameId)?"/concerts":Qo(e.geonameId,e.location),search:new URLSearchParams(h).toString()})};if(C){var I,D,w,E=Yo(null==k?void 0:k.concertLocations);return{location:{geonameId:null!==(I=C.geonameId)&&void 0!==I?I:Number(null==E?void 0:E.geonameId),geohash:null!==(D=C.geohash)&&void 0!==D?D:null==E?void 0:E.geoHash,name:null!==(w=C.name)&&void 0!==w?w:null==E?void 0:E.name},onChangeLocation:S}}var A=null==k||null===(t=k.me)||void 0===t||null===(t=t.profile)||void 0===t?void 0:t.location,O=Yo(null==k?void 0:k.concertLocations);return{location:null!=A&&A.geoHash||null!=O&&O.geonameId?{geohash:null!==(n=null==A?void 0:A.geoHash)&&void 0!==n?n:null==O?void 0:O.geoHash,geonameId:Number(null!==(o=null==A?void 0:A.geonameId)&&void 0!==o?o:null==O?void 0:O.geonameId),name:null!==(i=null==A?void 0:A.name)&&void 0!==i?i:null==O?void 0:O.name}:void 0,onChangeLocation:S}};const $o=function(){var e,t,n=(0,c.d4)(R.Ht).isAnonymous,o=(0,r.useState)("grid"),i=(0,a.A)(o,2),s=i[0],d=i[1],v=Jo(),m=v.location,h=v.onChangeLocation,I=pt(),w=(0,l.ok)(),E=(0,a.A)(w,2),A=E[0],O=E[1],F=(0,D.r)(y.s,{}).spec,L=(0,r.useMemo)((function(){return F.headerFactory()}),[F]),U=(0,S.s)(),P=n&&null!=m&&m.name?x.Ru.get("live_events.location_concert_tickets",m.name):x.Ru.get("live_events.label"),M=function(){var e=L.layoutToggleFactory().hitToggleState({stateBeforeToggle:s,stateAfterToggle:"grid"===s?"list":"grid"});U.logInteraction(e),d("grid"===s?"list":"grid")},T="interested"===A.get("filter"),B=T?ht.$:f.H;return(0,re.jsxs)("section",{children:[(0,re.jsxs)(b.z,{size:b.K.SMALL,backgroundColor:u.blueViolet100,children:[(0,re.jsx)(_.Y,{children:(0,re.jsx)(k.mm,{children:P})}),(0,re.jsx)(C.h,{children:(0,re.jsx)(N.X,{text:P})})]}),(0,re.jsxs)("div",{children:[(0,re.jsx)(j.K,{backgroundColor:u.blueViolet100}),(0,re.jsxs)("div",{className:Lo,children:[(0,re.jsxs)("div",{className:Uo,children:[T?(0,re.jsx)("div",{}):(0,re.jsxs)("div",{className:Po,children:[(0,re.jsx)(Re.A,{headerSpec:L,locationStr:null!==(e=null==m?void 0:m.name)&&void 0!==e?e:"",handleLocationChange:h}),(0,re.jsx)(Xn,{spec:F})]}),(0,re.jsxs)("div",{className:Mo,children:["grid"===s&&(0,re.jsx)(f.H,{"aria-label":x.Ru.get("concerts.feed_list_layout"),iconOnly:g.N,onClick:M,size:"small"}),"list"===s&&(0,re.jsx)(f.H,{"aria-label":x.Ru.get("concerts.feed_grid_layout"),iconOnly:p.D,onClick:M,size:"small"}),(0,re.jsx)(B,{size:"small",iconLeading:_o.E,onClick:function(){return O({filter:T?"":"interested"})},children:x.Ru.get("concerts_interested")})]})]}),T?(0,re.jsx)(xo,{layout:s,spec:F}):(0,re.jsx)(Xo,{spec:F,layout:s,location:{geoHash:null==m?void 0:m.geohash,geonameId:null!=m&&m.geonameId?String(m.geonameId):"",name:null!==(t=null==m?void 0:m.name)&&void 0!==t?t:""},dateRange:I})]})]})]})};const ei=function(){return(0,o.NC)(i.iNb)?(0,re.jsx)($o,{}):(0,re.jsx)(bo,{})}},49153:(e,t,n)=>{n.d(t,{bU:()=>u,fD:()=>s,he:()=>l,nm:()=>r});n(60905),n(51725),n(78381),n(38858),n(62172),n(98168),n(9332),n(21932),n(60850),n(21256),n(54436),n(66874),n(83892),n(69645),n(9981),n(31840),n(45991),n(36490),n(66230),n(5464),n(93902),n(64992),n(4207);var o=n(42534);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw r}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var r=function(e,t){if(!e)return"/concerts";var n=null==t?void 0:t.normalize().replaceAll(/\W+/g,"-");return n?"/concerts/location/".concat(e,"-").concat(n):"/concerts/location/".concat(e)},c=10;function s(e){if(0===e.length)return[];if(0===e[0].events.length)return[];var t,n=[],o={date:e[0].events[0].openingDate.slice(0,c),events:[]},a=i(e);try{for(a.s();!(t=a.n()).done;){var r,s=i(t.value.events);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.openingDate.slice(0,c);o.date!==u&&(n.push(o),o={date:u,events:[]}),o.events.push(l)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){a.e(e)}finally{a.f()}return n.push(o),n}var l=function(e){return e.ticketers.some((function(e){return"spotify"===e.partnerDisplayName.toLowerCase()}))},u=function(e){return(0,o.x)(e,{representation:"date"})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map