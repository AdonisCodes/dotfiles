"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5178],{52429:(e,t,r)=>{r.d(t,{p:()=>f});var n=r(95514),i=r(16247),a=r.n(i),o=r(30758),l=r(45976),s=r(54268),c=r(89582),u=r(73576),d=r(78104),p=r(56311),y=r(86070),f=o.memo((function(e){var t=e.uri,r=e.divider,i=e.removeLabel,f=(0,l.wA)(),g=!(0,u.n)(),m=(0,d.t)(),b=(0,o.useCallback)((0,n.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f((0,p.aw)(t,!0));case 1:case"end":return e.stop()}}),e)}))),[f,t]);return(0,y.jsx)(c.D,{role:"menuitem",divider:r,disabled:g&&!(null!=m&&m.getCapabilities().canModifyOffline),onClick:b,leadingIcon:(0,y.jsx)(s.k,{semanticColor:"textBrightAccent",size:"small"}),children:i})}))},99010:(e,t,r)=>{r.d(t,{P:()=>m});var n=r(30758),i=r(59081),a=r(63336),o=r(34478),l=r(47551),s=r(9064),c=r(53921),u=r(60103),d=r(11962),p=r(16007),y=r(13567),f=r(52429),g=r(86070),m=n.memo((function(e){var t=e.uri,r=e.artistUri,n=e.canPin,m=void 0===n?l.oT.NO:n,b=e.isPinned,v=void 0!==b&&b,x=e.canRemove,h=void 0!==x&&x,O=(0,s.o)(t).spec;return(0,g.jsx)(o.pZ,{value:"album",children:(0,g.jsxs)(a.W,{children:[h&&(0,g.jsx)(f.p,{uri:t,removeLabel:i.Ru.get("contextmenu.remove-from-library")}),r&&(0,g.jsx)(d.z,{spec:O,divider:"after",uri:r,displayText:i.Ru.get("contextmenu.go-to-artist-radio")}),m!==l.oT.NO&&(0,g.jsx)(y.k,{uri:t,canPin:m,isPinned:v,type:c.c.PRE_RELEASE_ALBUM,spec:O}),(0,g.jsx)(u.m,{uri:t,spec:O,displayText:i.Ru.get("context-menu.copy-album-link")}),(0,g.jsx)(p.q,{spec:O,divider:"before",uri:t})]})})}))},4910:(e,t,r)=>{r.d(t,{e:()=>d});r(60905),r(94238),r(63619),r(41679),r(81443),r(74457),r(6844),r(77458),r(69645),r(93902),r(7410),r(50247),r(88190);var n=r(81226),i=r(17450),a=r(4744);const o="k270skPbT7JOaSidSA2a";var l=r(86070),s=["iconSize"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){var t=e.iconSize,r=void 0===t?64:t,n=(0,i.A)(e,s);return(0,l.jsx)("div",{className:o,children:(0,l.jsx)(a.E,u(u({iconSize:r},n),{},{semanticColor:"textBrightAccent","aria-hidden":!0}))})}},75178:(e,t,r)=>{r.r(t),r.d(t,{CompactModeState:()=>rt,YourLibraryX:()=>Ws,useLibraryRowMode:()=>nt});var n=r(93209),i=r(81226),a=r(17450),o=r(26017),l=r(95514),s=r(16247),c=r.n(s),u=(r(60905),r(61369),r(98168),r(94238),r(63619),r(60850),r(84008),r(41679),r(81443),r(74457),r(6844),r(77458),r(69645),r(49932),r(23099),r(36490),r(93902),r(7410),r(50247),r(50252),r(88190),r(4207),r(30758)),d=r(97500),p=r.n(d),y=r(96131),f=r(45976),g=r(78370),m=r(61272),b=r(1409),v=r(52155),x=r(36092),h=r(63336),O=r(34478),j=r(47551),P=r(9064),w=r(51445),S=r(12356),A=r(59081),D=r(89582),C=r(62775),T=r(43407),R=r(54509),I=r(86070);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=function(e){var t=e.position,r=e.divider,n=e.onCreateCallback,i=void 0===n?function(){}:n,a=e.spec,o=(0,R.W)(),l=(0,C.A)().createPlaylist,s=(0,T.s)(),c=(0,u.useCallback)((function(){o({intent:"create-playlist",type:"click"});var e=a.createButtonFactory().hitCreatePlaylist();e&&s.logInteraction(e),l(A.Ru.get("playlist.default_playlist_name"),t),i()}),[o,a,s,l,t,i]);return(0,I.jsx)(D.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,I.jsx)(S.u,{semanticColor:"textSubdued",size:"small"}),children:A.Ru.get("contextmenu.create-playlist")})},N=u.memo((function(e){return(0,I.jsx)(O.pZ,{value:"create-playlist",children:(0,I.jsx)(L,E({},e))})})),F=u.memo((function(e){var t=e.folderUri,r=e.onCreateCallback,n=t?{after:{uri:t}}:{before:"start"},i=(0,P.o)(null!=t?t:j.gv).spec;return(0,I.jsx)(O.pZ,{value:"folder",children:(0,I.jsxs)(h.W,{children:[(0,I.jsx)(N,{position:n,onCreateCallback:r,spec:i}),(0,I.jsx)(w.j,{position:n,onCreateCallback:r,spec:i})]})})})),M=r(24427),B=r(86485),U=r(17074),_=r(28359),V=r(85187),H=r(51148),z=r(80380),W=r(53921),X=r(39049),Y=r(55730),K=r(82916),Z=r(36109),G=(r(38858),r(62172),r(21256),r(177),r(61689),r(22081),r(13903),r(3794),r(92063),r(32440),r(52767),r(41859),new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]));function J(e,t){var r=(0,u.useState)(""),n=(0,o.A)(r,2),i=n[0],a=n[1],l=(0,u.useRef)(i);l.current=i;var s=(0,u.useRef)(null);return(0,u.useEffect)((function(){var r=e.current;if(!r||!t)return a(""),function(){};var n=function(e){var t,r,n="Backspace"===e.key,i=" "===e.key,o=e.metaKey||e.ctrlKey,c=e.target instanceof HTMLElement&&(null===(t=e.target)||void 0===t?void 0:t.matches("input, textarea, [contenteditable]")),u=e.isComposing||229===e.keyCode,d=(r=e.key,G.has(r)&&!n),p=i&&!l.current,y=n&&!l.current;o||c||u||d||p||y||((n&&l.current||i)&&(e.preventDefault(),e.stopPropagation()),a((function(t){return n?t.slice(0,-1):t+e.key})),s.current&&clearTimeout(s.current),s.current=setTimeout((function(){return a("")}),1e3))};return r.addEventListener("keydown",n,!0),function(){r.removeEventListener("keydown",n,!0),s.current&&clearTimeout(s.current)}}),[e,t]),i}var q=(0,u.createContext)({setTypeaheadResult:function(e){var t=e.uid,r=e.str;if(t||r)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Q=function(e){var t=e.children,r=e.containerRef,n=e.findMatchingTypeaheadUid,i=e.isEnabled,a=void 0===i||i,l=(0,u.useState)({uid:null,str:""}),s=(0,o.A)(l,2),c=s[0],d=s[1],p=(0,u.useMemo)((function(){return{typeaheadResult:c,setTypeaheadResult:d}}),[c,d]),y=J(r,a),f=(0,u.useRef)(y);f.current=y;var g=(0,u.useRef)(n);return g.current=n,(0,u.useEffect)((function(){y&&a?g.current(y).then((function(e){y===f.current&&d({uid:e,str:y})})):d({uid:null,str:""})}),[a,y,d]),(0,I.jsx)(q.Provider,{value:p,children:t})};const $="Vf3ww2_My5QuwUnbpzhu";var ee=r(15527),te=function(){var e=(0,u.useContext)(q).typeaheadResult.str;return e?(0,I.jsx)(ee.qb,{className:$,children:e}):null},re=r(22865),ne=r(82035),ie=r(55089),ae=r(21581),oe=r(94810),le=r(27721),se=r(74797),ce=r(46103),ue=r(58607),de=r(43322),pe=r(45345),ye=r(37786),fe=r(92986),ge=r(19919),me=r(39740),be=r(28175),ve=r(18697),xe=r(97450),he=1248,Oe=800,je=(0,me.g)(pe.Z),Pe=(0,me.g)(ye.fX),we=function(){var e,t,r,n,i,a,o,l,s,c,d,p,f,g,m,b,v,x,h,O,j,P,w;return e=(0,ve.y)(),t=e.size,r=e.setSize,n=e.minWidth,i=e.maxWidth,a=e.ylxCollapsedStateNavbarWidth,o=e.ylxDefaultStateNavbarWidth,l=e.ylxExpandedStateNavbarWidth,s=(0,ye.$)(),c=s.ylxSidebarState,d=s.setYlxSidebarState,p=s.canCollapse,f=(0,de.XB)(),g=(0,de._Y)(),m=(0,de.Zf)(),b=m.min,v=m.max,x=m.size,h=m.setSize,O=(0,fe.H)(),j=(0,u.useRef)(null),P=(0,u.useRef)(null),w=(0,u.useRef)(null),(0,u.useLayoutEffect)((function(){var e=O-t-3*ue.KV-(f!==pe.Z.Disabled?x+ue.KV:0),s={leftSidebarWidth:t,leftSidebarMinWidth:n,leftSidebarMaxWidth:i,ylxSidebarState:c,ylxSidebarStateRestoreTarget:j.current,rightSidebarWidth:x,rightSidebarMinWidth:b,rightSidebarMaxWidth:v,rightSidebarPanel:f,rightSidebarPanelRestoreTarget:P.current,storedCollapsedYLXWidth:a,storedDefaultYLXWidth:o,storedExpandedYLXWidth:l,clientWidth:O,mainContentWidth:e,canCollapse:p},u=w.current;if(!(0,y.j)(s,u)){var m=function(e,t){if(!e)return{};var r=t.leftSidebarWidth,n=void 0===r?0:r,i=t.rightSidebarWidth,a=void 0===i?0:i,o=t.mainContentWidth,l=void 0===o?0:o,s=t.leftSidebarMinWidth,c=void 0===s?0:s,u=t.leftSidebarMaxWidth,d=void 0===u?0:u,p=t.ylxSidebarState,y=t.ylxSidebarStateRestoreTarget,f=t.rightSidebarMinWidth,g=void 0===f?0:f,m=t.rightSidebarMaxWidth,b=void 0===m?0:m,v=t.rightSidebarPanel,x=t.rightSidebarPanelRestoreTarget,h=t.storedCollapsedYLXWidth,O=void 0===h?0:h,j=t.storedDefaultYLXWidth,P=void 0===j?0:j,w=t.storedExpandedYLXWidth,S=void 0===w?0:w,A=t.clientWidth,D=void 0===A?0:A,C=t.canCollapse,T=void 0===C||C,R={},I=v!==pe.Z.Disabled,k=void 0!==e.leftSidebarWidth&&n>e.leftSidebarWidth,E=void 0!==e.rightSidebarWidth&&a>e.rightSidebarWidth,L=void 0===e.clientWidth?0:D-e.clientWidth,N=L<0,F=D>0,M=l<ue.ev?ue.ev-l:0,B=N?-1*L:0;l>he?B=Math.max(0,B-(l-he)):M&&(B=M);var U=p===ye.fX.EXPANDED&&e.ylxSidebarState!==ye.fX.EXPANDED,_=p===ye.fX.DEFAULT&&e.ylxSidebarState!==ye.fX.DEFAULT,V=n-c;k&&(V=U?n-be.ZU.EXPANDED_MIN:_?n-be.ZU.DEFAULT_MIN:0);var H=E?0:a-g,z=B<=V+H;if(l<ue.ev&&!z)I&&(k||N&&(p===ye.fX.COLLAPSED||!T))?(R.rightSidebarPanel=pe.Z.Disabled,R.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,B-=a,H=0):(p===ye.fX.EXPANDED&&l+(n-be.ZU.DEFAULT_MIN)>ue.ev?(R.ylxSidebarState=ye.fX.DEFAULT,B-=n-P,V=P-be.ZU.DEFAULT_MIN):(R.ylxSidebarState=ye.fX.COLLAPSED,B-=n-O,V=0),R.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(v===pe.Z.Disabled&&x!==pe.Z.Disabled&&je(x)&&v!==e.rightSidebarPanelRestoreTarget&&l-a-ue.KV>=ue.ev)R.rightSidebarPanel=x,R.rightSidebarPanelRestoreTarget=null;else if(p===ye.fX.DEFAULT&&y===ye.fX.EXPANDED&&l-(S-n)>=ue.ev)R.ylxSidebarState=ye.fX.EXPANDED,R.ylxSidebarStateRestoreTarget=null;else if(p===ye.fX.COLLAPSED&&y===ye.fX.DEFAULT&&l-(P-n)>=ue.ev)R.ylxSidebarState=ye.fX.DEFAULT,R.ylxSidebarStateRestoreTarget=null;else if(F&&l>=Oe)for(var W=d-n,X=b-a,Y=Math.min(L,W+X),K=0;K<Y;K++)n<a&&n<d&&W>0?(n++,W--):a<b&&X>0&&(a++,X--);if(p!==e.ylxSidebarState&&Pe(y)&&y===e.ylxSidebarStateRestoreTarget&&(R.ylxSidebarStateRestoreTarget=null),v!==e.rightSidebarPanel&&je(x)&&x===e.rightSidebarPanelRestoreTarget&&(R.rightSidebarPanelRestoreTarget=null),B>0&&B<=V+H)for(var Z=0;Z<B;Z++)n>a&&n>c&&V>0?(n--,V--):a>g&&H>0&&(a--,H--);return n&&n!==t.leftSidebarWidth&&(R.leftSidebarWidth=n),a&&a!==t.rightSidebarWidth&&(R.rightSidebarWidth=a),R}(u,s);void 0!==m.leftSidebarWidth&&r(m.leftSidebarWidth),Pe(m.ylxSidebarState)&&d(m.ylxSidebarState),void 0!==m.ylxSidebarStateRestoreTarget&&(j.current=m.ylxSidebarStateRestoreTarget),void 0!==m.rightSidebarWidth&&0!==(null==u?void 0:u.rightSidebarWidth)&&h(m.rightSidebarWidth),void 0!==m.rightSidebarPanel&&g((0,xe.MQ)(m.rightSidebarPanel)),void 0!==m.rightSidebarPanelRestoreTarget&&(P.current=m.rightSidebarPanelRestoreTarget),w.current=s}}),[t,n,i,r,c,x,b,v,h,f,a,o,l,d,g,O,p]),null},Se=function(){return(0,b.NC)(ge.Wfl,{loadingValue:!1})?(0,I.jsx)(we,{}):null};var Ae=r(52786),De=r(71128),Ce=r(87852),Te=function(){return null},Re=r(95259),Ie=r(54925),ke=r(51484),Ee=r(28811),Le=r(71526),Ne=r(24865);const Fe="rqGyIqd3Igk05BEB2ZC6",Me="WycFx_Gl2tUXbUJpZiD8";var Be=function(){var e=(0,u.useState)(!1),t=(0,o.A)(e,2),r=t[0],n=t[1],i=(0,Le.V)(),a=(0,f.d4)(Ne.JJ);(0,u.useEffect)((function(){var e=setTimeout((function(){n(!0)}),1100);return function(){n(!1),clearTimeout(e)}}),[]);var l=(0,f.d4)(Ne.mo);return i&&r?(0,I.jsx)(ke.t5,{language:A.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,I.jsxs)("div",{className:Fe,"data-testid":"left-sidebar-legal-links",children:[(0,I.jsx)(ke.JM,{}),(0,I.jsx)("a",{draggable:!1,href:Ee.Bl,target:"_blank",rel:"noopener",className:Me,children:(0,I.jsx)(Ie.E,{variant:"marginal",children:A.Ru.get("cookies")})}),l&&(0,I.jsx)("a",{draggable:!1,href:Ee.Vd,target:"_blank",rel:"noopener",className:Me,children:(0,I.jsx)(Ie.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null};const Ue="YNnobzGm5w3XKBniKdW9";var _e=(0,u.memo)((function(e){var t=e.isAnonymous;return(0,I.jsx)("div",{className:Ue,"data-testid":"left-sidebar-footer",children:t&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Be,{}),(0,I.jsx)(Re.X,{})]})})})),Ve=[ie.fl.TRACKS,ie.fl.LOCAL_TRACKS,ie.fl.ALBUMS,ie.fl.ARTISTS,ie.fl.PLAYLISTS_V2,ie.fl.SHOWS,ie.fl.AUDIOBOOKS,ie.fl.EPISODES,ie.fl.FOLDERS],He=[ie.fl.TRACKS,ie.fl.LOCAL_TRACKS,ie.fl.ALBUMS,ie.fl.EPISODES,ie.fl.PLAYLISTS_V2,ie.fl.FOLDERS],ze=[ie.fl.TRACKS,ie.fl.LOCAL_TRACKS,ie.fl.ALBUMS,ie.fl.EPISODES,ie.fl.PLAYLISTS_V2,ie.fl.FOLDERS],We=(r(51945),r(39921),r(73576));function Xe(){var e=(0,u.useContext)(se.O_),t=e.dropOriginUri,r=e.sectionId;return{dropOriginIsYLX:t===j.gv,entityIsInFolder:r>0}}var Ye=(0,u.createContext)(null);r(9332);var Ke=r(42715),Ze="",Ge=(0,u.createContext)({openedFolderUri:Ze,pushFolder:function(){},popFolder:function(){},resetFolder:function(){},change:"PUSH"}),Je=function(e){var t=e.children,r=(0,u.useContext)(Ae.g).setFilter,n=(0,Ke.x)("opened-folder-uri",Ze),i=(0,o.A)(n,2),a=i[0],l=i[1],s=(0,u.useRef)([null!=a?a:Ze]),c=(0,u.useRef)("PUSH"),d=(0,u.useCallback)((function(e){l(e),r(Ze)}),[l,r]),p=(0,u.useCallback)((function(e){s.current.push(e),c.current="PUSH",d(s.current.at(-1))}),[d]),y=(0,u.useCallback)((function(){s.current.pop();var e=s.current.at(-1);return c.current="POP",d(e),e}),[d]),f=(0,u.useCallback)((function(){s.current=[Ze],d(Ze)}),[d]);return(0,I.jsx)(Ge.Provider,{value:{openedFolderUri:a,pushFolder:p,popFolder:y,resetFolder:f,change:c.current},children:t})};function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(85367),r(6990),r(83892),r(78003);var $e=r(9187);function et(e,t,r,n){if(e){var i=e.scrollTop,a=e.offsetHeight,o=t&&e?t.getBoundingClientRect().top+i-e.getBoundingClientRect().top:0;if(o+r<i||o+r+n>i+a){var l=r-a/2+o+n/2;e.scrollTop=l}}}var tt=r(20485),rt=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({}),nt=function(){var e=(0,Ke.x)("library-row-mode",rt.DEFAULT),t=(0,o.A)(e,2),r=t[0],n=t[1],i=(0,V.vW)();return{libraryRowMode:r,setLibraryRowMode:n,rowHeight:r===rt.DEFAULT||i===V.fX.COLLAPSED?64:32}};r(54436),r(64992);var it=r(78104),at=r(71359),ot=r(19733),lt=function(e){var t=e.isConfirmationForPlaylist,r=e.onConfirm,n=e.onClose,i=t?A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,I.jsx)(ot.T,{"aria-label":i,titleText:i,descriptionText:t?A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:r,onClose:n,confirmText:A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:t?A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:A.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function st(e){var t,r=e.onApplyDrop,i=e.spec,a=e.isDropTargetPinned,s=(0,it.t)(),d=(0,at.p)("ylpin").contains,p=(0,u.useState)(null),y=(0,o.A)(p,2),f=y[0],g=y[1],m=(0,u.useCallback)(function(){var e=(0,l.A)(c().mark((function e(t,i){var o,l,s,u,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return r(t,i),e.abrupt("return");case 3:if(o=t[ie.fl.PLAYLISTS_V2],l=void 0===o?[]:o,s=t[ie.fl.FOLDERS],u=void 0===s?[]:s,p=[].concat((0,n.A)(l),(0,n.A)(u)),e.t0=!!p.length,!e.t0){e.next=10;break}return e.next=9,d.apply(void 0,(0,n.A)(p));case 9:e.t0=e.sent.some(Boolean);case 10:if(!e.t0){e.next=17;break}if(!(p.length>1)){e.next=14;break}throw new Error("Reordering multiple pinned items at once is not supported");case 14:g({dropData:t,dropPosition:i}),e.next=18;break;case 17:r(t,i);case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[a,d,r]),b=(0,T.s)();return{applyDropWithUnpinConfirmation:m,unpinConfirmationDialog:f?(0,I.jsx)(lt,{isConfirmationForPlaylist:!(null!==(t=f.dropData[ie.fl.FOLDERS])&&void 0!==t&&t.length),onClose:function(){return g(null)},onConfirm:(0,l.A)(c().mark((function e(){var t,a,o,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.dropData,a=t[ie.fl.PLAYLISTS_V2],o=void 0===a?[]:a,l=t[ie.fl.FOLDERS],u=void 0===l?[]:l,e.next=3,s.unpin([].concat((0,n.A)(o),(0,n.A)(u))[0]);case 3:null!=i&&i.dragUnpinItem&&b.logInteraction(i.dragUnpinItem({itemToUnpin:[].concat((0,n.A)(o),(0,n.A)(u))[0]})),r(f.dropData,f.dropPosition),g(null);case 6:case"end":return e.stop()}}),e)})))}):null}}function ct(){var e=(0,K.g)(),t=Xe().dropOriginIsYLX,r=(0,u.useCallback)(function(){var r=(0,l.A)(c().mark((function r(n,i){var a;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.contains(n);case 2:if(a=r.sent,1===new Set(a).size){r.next=5;break}throw new Error("Dropping a mix of newly added and moved playlists is not supported");case 5:if(!a[0]){r.next=18;break}if(!(n.length>1)){r.next=9;break}throw new Error("Moving multiple playlists at once is not supported");case 9:if(!t){r.next=14;break}return r.next=12,e.move({uri:n[0]},i);case 12:r.next=16;break;case 14:return r.next=16,e.move({uri:n[0]},i,!0);case 16:r.next=20;break;case 18:return r.next=20,e.add(n,i);case 20:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),[t,e]);return r}function ut(e,t){var r=(0,C.A)(),i=r.createPlaylistFromAlbum,a=r.createPlaylistFromTracks,o=(0,T.s)(),s=(0,K.g)(),d=ct(),p=st({onApplyDrop:(0,u.useCallback)((function(r){if(t){var n=r[ie.fl.PLAYLISTS_V2],i=void 0===n?[]:n,a=r[ie.fl.FOLDERS],l=void 0===a?[]:a,c={after:{uri:t}};i.length&&(d(i,c),o.logInteraction(e.dragSort())),l.length&&(s.moveFolder({uri:l[0]},c),o.logInteraction(e.dragSort()))}}),[d,o,s,e,t])}),y=p.unpinConfirmationDialog,f=p.applyDropWithUnpinConfirmation,g=(0,u.useCallback)(function(){var r=(0,l.A)(c().mark((function r(l){var s,u,d,p,y,g,m,b,v,x,h,O,j;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:s=l[ie.fl.TRACKS],u=void 0===s?[]:s,d=l[ie.fl.LOCAL_TRACKS],p=void 0===d?[]:d,y=l[ie.fl.ALBUMS],g=void 0===y?[]:y,m=l[ie.fl.EPISODES],b=void 0===m?[]:m,v=l[ie.fl.PLAYLISTS_V2],x=void 0===v?[]:v,h=l[ie.fl.FOLDERS],O=void 0===h?[]:h,j={after:{uri:t}},x.length||O.length?f(l,ae.Nz.ON):g.length?(i(g[0],j),o.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(u.length||p.length||b.length)&&(a([].concat((0,n.A)(u),(0,n.A)(p),(0,n.A)(b)),j),o.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[t,f,i,o,e,a]);return{unpinConfirmationDialog:y,handleDropOnFolder:g}}var dt=r(812),pt=r(89454),yt=r(77666),ft=r(41485);function gt(){var e=(0,u.useState)(null),t=(0,o.A)(e,2),r=t[0],n=t[1];if((0,yt.l)(pt.UV.UPDATE_PIN_ERROR,(function(e){n(e.data)})),void 0===(null==r?void 0:r.reason))return null;switch(r.reason){case pt.uL.TOO_MANY_PINS:return(0,I.jsx)(dt.x,{animated:!0,headingMessage:A.Ru.get("web-player.your-library-x.pin-error.title"),message:A.Ru.get("web-player.your-library-x.pin-error.message",r.maximumPinnedItems),buttonLabel:A.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:function(){return n(null)}});case pt.uL.NO_PIN_IN_FOLDER:return(0,I.jsx)(dt.x,{animated:!0,headingMessage:A.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:A.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:A.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:function(){return n(null)}});default:return(0,ft.k)(r),null}}function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt=r(15582),xt=r(75341),ht=r(7047),Ot=r(77159),jt=r(14853),Pt=r(59440),wt=function(e,t,r,n,i){var a=(0,Pt.Q)(),o=(0,u.useRef)(r),s=(0,u.useRef)(),d=(0,u.useRef)();s.current=n,d.current=i,(0,u.useEffect)((function(){var r,n,i={ident:e,isPrefix:t,onMessage:function(e){return o.current(e)},onSubscribe:(n=(0,l.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=s.current)||void 0===r?void 0:r.call(s,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),onCancel:(r=(0,l.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=d.current)||void 0===r?void 0:r.call(d,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},u=a.subscribe(i);return function(){u.cancel()}}),[e,t,a])},St=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},pt.Ir.ALBUMS,W.c.ALBUM),pt.Ir.ARTISTS,W.c.ARTIST),pt.Ir.BOOKS,W.c.AUDIOBOOK),pt.Ir.EPISODES,W.c.EPISODE),pt.Ir.SHOWS,W.c.SHOW),pt.Ir.TRACKS,W.c.TRACK);function At(e,t){var r=(0,u.useCallback)((function(r){var n=r.data.list,i=St[n];Dt(e,i)&&t()}),[e,t]);(0,yt.l)(pt.UV.UPDATE,r),(0,yt.l)(pt.UV.UPDATE_PIN,t);var n=(0,u.useCallback)((function(){Dt(e,W.c.PLAYLIST)&&t()}),[e,t]);(0,jt.L)(n),function(e){wt("hm://collection/ylpin/",!0,e)}(t),function(e){var t=(0,u.useContext)(Ot._),r=t.getEvents();(0,u.useEffect)((function(){return r.addListener(ht.T.UPDATE,e),function(){r.removeListener(ht.T.UPDATE,e)}}),[t,r,e])}(t),function(e){var t=(0,xt.l)().getEvents();(0,u.useEffect)((function(){var r=function(t){"prerelease"===t.data.set&&e()};return t.addListener(vt.ar.ADDED,r),t.addListener(vt.ar.REMOVED,r),function(){t.removeListener(vt.ar.ADDED,r),t.removeListener(vt.ar.REMOVED,r)}}),[e,t])}(t)}function Dt(e,t){switch(e){case W.c.ALBUM:case W.c.ARTIST:case W.c.AUDIOBOOK:case W.c.SHOW:return e===t;case W.c.PLAYLIST:switch(t){case W.c.TRACK:case W.c.PLAYLIST:case W.c.EPISODE:return!0;default:return!1}default:return!0}}var Ct=r(61957),Tt=r(13234),Rt=r(45755),It=r(81874),kt=r(71083);const Et="lvJXjYO7YXxGKHcgx5pe",Lt="yYGZUqSKJttCw_Z2JvPL",Nt="wkyebhrfwyJPCfDhQgbp";var Ft=function(){var e=(0,V.sy)(),t=(0,T.s)(),r=(0,f.wA)(),n=(0,ne.r)(Rt.V,{}).spec,i=A.Ru.get("web-player.your-library-x.dsa-message",A.Ru.get("web-player.your-library-x.dsa-message-link")),a=(0,u.useCallback)((function(){r(kt.r8.actions.open()),t.logInteraction(n.learnMoreButtonFactory().hitUiReveal())}),[r,t,n]);return(0,I.jsx)("div",{className:Et,children:e?(0,I.jsx)(It.Zp,{label:(0,I.jsx)(Ie.E,{children:i}),placement:"right",showDelay:0,children:(0,I.jsx)("div",{className:Lt,children:(0,I.jsx)(Ct.p,{"aria-label":i})})}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{children:(0,I.jsx)(Ct.p,{size:"small"})}),(0,I.jsx)(Ie.E,{as:"p",semanticColor:"textSubdued",children:A.Ru.get("web-player.your-library-x.dsa-message",(0,I.jsx)(Tt.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:a,className:Nt,children:(0,I.jsx)(Ie.E,{variant:"bodyMedium",children:A.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})};const Mt="AhNLpx0iVnlj4SuL_Gaw",Bt="JyZRugeRBHbUtS5ABOQ8";var Ut=function(e){var t=e.className;return(0,I.jsx)("section",{className:p()(Mt,t),children:(0,I.jsxs)("div",{className:Bt,children:[(0,I.jsx)(Ie.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:A.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,I.jsx)(Ie.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:A.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})})},_t=r(4587),Vt=r(55616);function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wt={getTitle:function(){return A.Ru.get("action-trigger.create-playlist")},getDescription:function(){return A.Ru.get("action-trigger.login-playlist")}},Xt=function(e){var t=e.children,r=e.renderInline;return(0,I.jsx)(_t.y,{id:Vt.x9,options:zt(zt({},Wt),{},{renderInline:r}),children:t})},Yt=r(32303),Kt=r(90940);const Zt="CfruGiDGW_FH4l65GMpb",Gt="fIgbQ9qpINdyy__tkaHi",Jt="wv308QWnPnkI8n0GdqYO";var qt=(0,u.memo)((function(e){var t=e.message,r=e.title,n=e.linkTitle,i=e.linkTo,a=e.onClick,o=e.className;return(0,I.jsxs)("section",{className:p()(Zt,o),children:[(0,I.jsxs)("div",{className:Gt,children:[(0,I.jsx)(Ie.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,I.jsx)(Ie.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,I.jsx)("div",{className:Jt,children:n&&(i||a)&&(0,I.jsx)(Yt.$,{className:Jt,as:a?"button":void 0,colorSet:"invertedLight",href:i,onClick:a,component:Kt.v,size:"small",children:n})})]})})),Qt=function(e){var t=e.className,r=(0,C.A)().createPlaylist,n=(0,u.useCallback)((function(){r()}),[r]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Xt,{renderInline:!1,children:(0,I.jsx)(qt,{onClick:n,linkTitle:A.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:A.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:A.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:t})}),(0,I.jsx)(qt,{linkTo:"/genre/podcasts-web",linkTitle:A.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:A.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:A.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:t})]})};const $t="NOXrKH_1anB9lsOlyv5g",er="FIARvjbv_YZKwz7yxNHw",tr="Fqrv8StT3DnEAfntIKCg",rr="JydI9ZzWnssPC899sOGP";var nr=function(e){var t=e.query,r=e.className;return(0,I.jsxs)("div",{className:p()($t,r),"data-testid":"no-search-results-view",children:[(0,I.jsx)(Ie.E,{as:"h1",variant:"bodyMediumBold",className:er,children:A.Ru.get("web-player.your-library-x.empty-results-title-short",(0,I.jsx)("span",{className:tr,children:(0,I.jsx)("span",{className:rr,children:t})}))}),(0,I.jsx)(Ie.E,{as:"h2",variant:"bodySmall",children:A.Ru.get("web-player.your-library-x.empty-results-text-short")})]})},ir=r(10203);const ar="vhOeYrTmSoea5vemsMpv",or="pCKhe1uJhYBUC4YVmz9B";var lr=function(e){var t=e.onClick;return(0,I.jsxs)("div",{className:ar,children:[(0,I.jsx)("div",{className:"icon",children:(0,I.jsx)(ir.b,{size:"xlarge",semanticColor:"textBase"})}),(0,I.jsxs)("div",{className:or,children:[(0,I.jsx)(Ie.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:A.Ru.get("web-player.your-library-x.error-title")}),(0,I.jsx)(Ie.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:A.Ru.get("web-player.your-library-x.error-body")})]}),(0,I.jsx)("div",{children:(0,I.jsx)(Yt.$,{onClick:t,colorSet:"invertedLight",size:"small",children:A.Ru.get("web-player.your-library-x.error-button")})})]})};var sr=function(e){var t=e.children,r=function(){var e=(0,Ke.x)("ylx-expanded-folders",[]),t=(0,o.A)(e,2),r=t[0],i=t[1],a=(0,u.useCallback)((function(e){return r.includes(e)}),[r]),l=(0,u.useCallback)((function(e,t){var a=r.indexOf(e);if(t){if(-1!==a)return;i([].concat((0,n.A)(r),[e]))}else{if(-1===a)return;i(r.filter((function(t){return t!==e})))}}),[r,i]);return{expandedFolders:r,getIsFolderExpanded:a,setIsFolderExpanded:l}}();return(0,I.jsx)(Ye.Provider,{value:r,children:t})};const cr="fYWNdY4zhj4OX_T2Xtg6",ur="BRX6aJUAuAsvHKD_fpbo",dr="ZZsPF3Sn4h7m0_5Clhk0",pr="IZq_xBKdh88HLD4QY90X",yr="PUipCs3_0Qott0Sru3pB",fr="XAOxFVWnd185_vZ5zPGu",gr="YsCa3XbOXEm79LH0B7do",mr="eC25_w41L83mXDCqdm_A",br="VyDwqqtx0153zD8a3TED",vr="rOgsguaurlHVlgCTY0P7",xr="zS8ATyQNwnAiEoPrCcIo",hr="Zwr4MoUVImDin82vBn4y",Or="lb8li6m8Zei4tr0zNKxX",jr="aK6vld0FgHGxjz6IiHyS",Pr="Xw1OibA6EkrU4F47EMw9",wr="_EFIA9HjgZxxgTSZzQcg",Sr="JUPaw8kZF94Coth4G88s",Ar="main-yourLibraryX-listItem",Dr="c1PJ2LHU0EnzyA0jDc1j";var Cr=function(e){var t=e.isScrolled;return(0,I.jsxs)("div",{className:p()(hr,jr,(0,i.A)({},Pr,t)),children:[(0,I.jsx)(Ie.E,{variant:"marginalBold",semanticColor:"textSubdued",children:A.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,I.jsx)(Ie.E,{variant:"marginalBold",semanticColor:"textSubdued",children:A.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,I.jsx)(Ie.E,{variant:"marginalBold",semanticColor:"textSubdued",children:A.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]})},Tr=r(98846),Rr=r(44073);function Ir(e){return function(e){return"object"===(0,Rr.A)(e)&&e&&"tagUri"in e}(e)?function(e){return{type:"tag",id:e.tagUri,name:e.name,count:e.entityCount}}(e):kr(e)}function kr(e){return{type:"contentType",id:e.id,name:e.name}}var Er=r(16287),Lr=r(14124);const Nr="mA1QNQx6oUXgQ8kMID2S",Fr="a2XwshgvydvJO9If_GzQ",Mr="aVLBGREPTnbTFhkSdUMV",Br="ViXEX4SVVU_NA7zcS9kd",Ur="pQvrkwXAqZnbSqJiiQuo";var _r=["filterId","isPrimaryFilter","isPlaceholder","resetFilterIds","toggleFilterId","allowedDropTargetMimeTypes","className","innerRef","index","spec"],Vr=["className","dropPosition"];function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wr={marginBlockEnd:0,willChange:"transform, opacity"},Xr=function(e){var t=e.filterId,r=e.isPrimaryFilter,n=e.isPlaceholder,o=e.resetFilterIds,l=e.toggleFilterId,s=e.allowedDropTargetMimeTypes,c=void 0===s?ae.Vp:s,d=e.className,y=e.innerRef,f=e.index,g=void 0===f?0:f,m=e.spec,b=(0,a.A)(e,_r),v=(0,T.s)(),x=(0,it.t)(),h=b.selected,O=t?x.getFilterLabel(t):"",j=(0,u.useCallback)((function(){!t||h&&r?(o(),h&&r&&t?v.logInteraction(m.filterChipFactory({identifier:O,position:g}).hitClearFilter()):v.logInteraction(m.clearButtonFactory().hitClearFilter())):(l(t),h?v.logInteraction(m.filterChipFactory({identifier:O,position:g}).hitClearFilter()):v.logInteraction(m.filterChipFactory({identifier:O,position:g}).hitFilter()))}),[t,O,h,r,o,l,g,v,m]),P=(0,u.useCallback)((function(e){e.detail>1||n||j()}),[n,j]),w=(0,oe.A)({allowedMimeTypesByDropPosition:(0,i.A)({},ae.Nz.ON,c),onLongDragOver:j}),S=w.className,A=w.dropPosition,D=(0,a.A)(w,Vr);return(0,I.jsx)(Lr.v,zr(zr(zr(zr({},b),{},{"aria-label":b["aria-label"]},D),A===ae.Nz.ON?{selectedColorSet:"base"}:void 0),{},{className:p()(d,S,(0,i.A)((0,i.A)({},Mr,A===ae.Nz.ON),Nr,n)),onClick:P,selectedColorSet:A===ae.Nz.ON?"invertedDark":"invertedLight",secondary:h&&!r,style:Wr,ref:y,tabIndex:-1}))},Yr=r(41509),Kr=["filterId","isPrimaryFilter","isPlaceholder","resetFilterIds","toggleFilterId","allowedDropTargetMimeTypes","className","innerRef","index","spec"],Zr=["className","dropPosition"];function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qr={marginBlockEnd:0,willChange:"transform, opacity"},Qr=function(e){var t=e.filterId,r=e.isPrimaryFilter,n=e.isPlaceholder,o=e.resetFilterIds,l=e.toggleFilterId,s=e.allowedDropTargetMimeTypes,c=void 0===s?ae.Vp:s,d=e.className,y=e.innerRef,f=e.index,g=void 0===f?0:f,m=e.spec,b=(0,a.A)(e,Kr),v=(0,T.s)(),x=(0,it.t)(),h=b.selected,O=t?x.getFilterLabel(t):"",j=(0,u.useCallback)((function(){!t||h&&r?(o(),h&&r&&t?v.logInteraction(m.filterChipFactory({identifier:O,position:g}).hitClearFilter()):v.logInteraction(m.clearButtonFactory().hitClearFilter())):(l(t),h?v.logInteraction(m.filterChipFactory({identifier:O,position:g}).hitClearFilter()):v.logInteraction(m.filterChipFactory({identifier:O,position:g}).hitFilter()))}),[t,O,h,r,o,l,g,v,m]),P=(0,u.useCallback)((function(e){e.detail>1||n||j()}),[n,j]),w=(0,oe.A)({allowedMimeTypesByDropPosition:(0,i.A)({},ae.Nz.ON,c),onLongDragOver:j}),S=w.className,A=w.dropPosition,D=(0,a.A)(w,Zr);return(0,I.jsx)(Yr.m,Jr(Jr(Jr(Jr({},b),{},{"aria-label":b["aria-label"]},D),A===ae.Nz.ON?{selectedColorSet:"base"}:void 0),{},{className:p()(d,S,(0,i.A)((0,i.A)({},Mr,A===ae.Nz.ON),Nr,n)),onClick:P,style:qr,ref:y,tabIndex:-1}))},$r=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],en=function(){return null},tn=(0,u.memo)((function(e){var t=e.availableFilters,r=e.selectedFilters,i=e.toggleFilterId,a=e.resetFilterIds,o=e.className,l=e.spec,s=!(r||t),c=s?$r:[].concat((0,n.A)(null!=r?r:[]),(0,n.A)(null!=t?t:[])),d=(0,u.useRef)(null),p=(0,u.useCallback)((function(){var e,t;(0,Er.MS)(d.current,(null===(e=d.current)||void 0===e?void 0:e.nextElementSibling)instanceof HTMLElement?null===(t=d.current)||void 0===t?void 0:t.nextElementSibling:null),a()}),[a]),y=(0,B.e)();return 0===c.length?null:(0,I.jsxs)(Tr.F,{className:o,ariaLabel:A.Ru.get("web-player.your-library-x.filter_options"),children:[!(null==r||!r.length)&&(0,I.jsx)(Qr,{resetFilterIds:p,toggleFilterId:i,allowedDropTargetMimeTypes:Ve,"aria-label":A.Ru.get("web-player.your-library-x.clear_filters"),innerRef:d,spec:l}),c.map((function(e,n){var o,c=null==r?void 0:r.includes(e),d=0===n,p=(0,I.jsx)(Xr,{filterId:e.id,isPrimaryFilter:d,isPlaceholder:s,resetFilterIds:a,toggleFilterId:i,selected:c,spec:l,index:n,children:e.name},e.id);return y?(0,I.jsx)(x.h,{menu:(0,I.jsx)(u.Suspense,{fallback:!0,children:(0,I.jsx)(en,{refiner:Ir(e),allContentTypeRefiners:null!==(o=null==t?void 0:t.map(kr))&&void 0!==o?o:[],resetFilterIds:a,isSelected:c})}),children:p},e.id):p}))]})})),rn=r(33747),nn=r(70465),an=r(76519),on=function(e){var t=e.span,r=e.onInView,n=e.marginBottom,i=e.marginTop,a=(0,u.useRef)(null);return(0,u.useEffect)((function(){if(!window.IntersectionObserver)return function(){};var e=new window.IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&r()}))}));return a.current&&e.observe(a.current),function(){e.disconnect()}}),[r]),t<=0?null:(0,I.jsx)("div",{style:{gridColumn:"1/-1",gridRow:"span ".concat(t),marginBottom:n,marginTop:i},ref:a,"data-type":"sentinel"},"topSentinel")},ln=function(e){var t=e.renderItems,r=e.nrItems,n=e.estimatedItemMaxHeight,i=e.scrollNodeRef,a=e.nrRowsOverscan,l=void 0===a?5:a,s=e.initalNrRows,c=void 0===s?5:s,d=e.onGridResize,p=(0,u.useState)({firstRowToRender:0,nrRows:c+l}),y=(0,o.A)(p,2),f=y[0],g=y[1],m=(0,u.useRef)(0),b=(0,u.useRef)(null),v=(0,u.useRef)(n),x=(0,u.useCallback)((function(){var e,t=null===(e=b.current)||void 0===e?void 0:e.querySelector(':scope > *:not([data-type="sentinel"])');v.current=t?t.getBoundingClientRect().height:v.current}),[]),h=(0,u.useCallback)((function(){var e=i.current;if(e){x();var t=Math.floor((e.scrollTop-m.current)/v.current),r=Math.max(t-l,0),n=Math.ceil(e.offsetHeight/v.current)+2*l;r===f.firstRowToRender&&n===f.nrRows||g({firstRowToRender:r,nrRows:n})}}),[l,f,i,x]),O=(0,u.useCallback)((function(e){var n=e.columnCount;if(n<=0)return[null];d&&d(n,v.current);var i=Math.ceil(r/n),a=f.firstRowToRender*n,o=f.firstRowToRender+f.nrRows-1,s=Math.min(r-1,(o+1)*n-1),c=v.current*(l-2);return[(0,I.jsx)(on,{span:f.firstRowToRender,onInView:h,marginBottom:"-".concat(c,"px")},"topSentinel-".concat(f.firstRowToRender)),t(a,s,n),(0,I.jsx)(on,{span:i-o,onInView:h,marginTop:"-".concat(c,"px")},"bottomSentinel-".concat(i-o))]}),[r,l,d,h,t,f]);return(0,u.useEffect)((function(){var e=b.current,t=i.current;e&&t&&(m.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[i]),(0,I.jsx)(an.E,{useUniformRowHeight:!0,ref:b,render:O,onLayoutChange:x})},sn=r(48291),cn=r(3504);function un(){var e=(0,b.NC)(ge.AEN),t=(0,Ke.x)("ylx-grid-scale",1),r=(0,o.A)(t,2),n=r[0];return{gridScale:e?n:1,setGridScale:r[1]}}r(63624);var dn=r(56311),pn=r(88354),yn=r(46618),fn=r(76157),gn=r(97150),mn=r(10545),bn=r(20060),vn=r(23908),xn=r(51519),hn=r(88666),On=r(95767),jn=r(91598),Pn=function(e){var t=e.iconSize,r=void 0===t?"small":t;return(0,I.jsx)("span",{className:yr,children:(0,I.jsx)(jn.C,{size:r,semanticColor:"textBrightAccent",className:pr})})},wn=r(17175),Sn=r(2965);function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?An(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cn=function(e){var t=e.children,r=e.title,n=e.subtitleSlot,i=e.isPlaying,a=(0,b.NC)(wn.rW);return(0,I.jsx)(It.Zp,{label:(0,I.jsxs)("div",{className:p()({"circular-sp-vietnamese":a},xr),children:[(0,I.jsxs)("div",{children:[r,n]}),i&&(0,I.jsx)(Pn,{})]}),placement:"right",showDelay:0,children:t})},Tn=function(e){var t=(0,u.useRef)(null);return(0,cn.c0)(e.uri)?(0,I.jsx)(Sn.cW,{parentRef:e.parentRef,api:t,children:(0,I.jsx)(Cn,Dn({},e))}):(0,I.jsx)(Cn,Dn({},e))},Rn=(r(35340),r(56142)),In=r(45294),kn=r(57023),En=function(e){var t=e.leading,r=e.subtitle,n=e.uri,i="listrow-subtitle-".concat(n);return(0,I.jsx)("div",{className:kn.A.subtitle,children:(0,I.jsxs)(Rn.j,{lineClamp:1,className:kn.A.link,id:i,dir:"auto",children:[(0,I.jsx)("span",{className:kn.A.subtitleLeadingWrapper,children:t}),r]})})},Ln=function(e){var t=e.leading,r=e.subtitle,n=e.uri,i="card-subtitle-".concat(n);return(0,I.jsx)("div",{className:kn.A.subtitle,children:(0,I.jsxs)(In.j,{lineClamp:1,className:kn.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,I.jsx)("span",{className:kn.A.subtitleLeadingWrapper,children:t}),r]})})},Nn=r(61022),Fn=r(93482),Mn=r(43786),Bn=r(66964);var Un=r(93105),_n={state:{referrer:"your_library",preventMoveFocus:!0}};function Vn(e,t,r,i){var a,o,l,s,c,d=(0,u.useContext)(Ae.g).filter,p=(0,mn.l_)(e).isActive,y=(o=e,l=(0,u.useContext)(q).typeaheadResult,s=l.uid,c=l.str,s===o?c:null),f=!!y,g=(0,Bn.W)({uri:e,type:"link"})?(0,Un.hF)(t):t,m=(0,u.useRef)(null),b=(0,Nn.Zp)(),v=(0,u.useCallback)((function(e){e.preventDefault(),i?i():g&&b(g,_n)}),[i,b,g]);return(0,u.useLayoutEffect)((function(){var e;f&&(null===(e=m.current)||void 0===e||null===(e=e.closest('[role="row"], [role="listitem"]'))||void 0===e||null===(e=e.querySelector("button"))||void 0===e||e.focus({preventScroll:!0}))}),[f]),{isActive:p,onClick:v,contents:d||y?(0,I.jsx)("span",{ref:m,children:(0,I.jsx)(fn.M,{autoEscape:!0,searchWords:[d.trim()].concat((0,n.A)(null!==(a=null==y?void 0:y.split(" "))&&void 0!==a?a:"")),textToHighlight:r})}):r}}var Hn=function(e){var t,r=e.uri,n=e.playbackUri,i=void 0===n?r:n,a=e.title,o=e.menu,l=e.to,s=Vn(i,void 0===l?(null===(t=(0,xn.o_)(r))||void 0===t?void 0:t.toURLPath(!0))||"":l,a,e.handleNavigate),c=s.isActive,u=s.contents,d="listrow-title-".concat(r);return(0,I.jsx)(x.h,{menu:o,children:(0,I.jsx)(Fn.d,{id:d,lineClamp:1,className:p()(kn.A.link,kn.A.titleLink),semanticColor:c?"textBrightAccent":"textBase",dir:"auto",children:u})})},zn=function(e){var t,r=e.uri,n=e.playbackUri,i=void 0===n?r:n,a=e.title,o=e.menu,l=e.to,s=void 0===l?(null===(t=(0,xn.o_)(r))||void 0===t?void 0:t.toURLPath(!0))||"":l,c=Vn(i,s,a,e.handleNavigate),u=c.isActive,d=c.onClick,y=c.contents;return(0,I.jsx)(x.h,{menu:o,children:(0,I.jsx)(Mn.Z,{lineClamp:1,className:p()(kn.A.link,kn.A.titleLink),semanticColor:u?"textBrightAccent":"textBase",href:s,onClick:d,role:"gridcell",dir:"auto",children:y})})},Wn=(r(79443),r(28171),r(69760)),Xn=[ie.fl.ALBUMS,ie.fl.ARTISTS,ie.fl.PLAYLISTS_V2,ie.fl.SHOWS,ie.fl.FOLDERS,ie.fl.PSEUDO_PLAYLISTS],Yn=[ie.fl.PLAYLISTS_V2,ie.fl.FOLDERS],Kn=(r(51725),r(78381),r(21932),r(66874),r(9981),r(31840),r(45991),r(46567));function Zn(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gn(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jn(e){var t=e.dropTargetUri,r=e.spec,n=e.isDropTargetPinned,i=(0,K.g)(),a=(0,u.useContext)(z.Z),s=(0,T.s)(),d=ct(),p=(0,u.useCallback)(function(){var e=(0,l.A)(c().mark((function e(l,u){var p,y,f,g,m,b,v,x,h,O,j,P;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=l[ie.fl.PLAYLISTS_V2],y=void 0===p?[]:p,f=l[ie.fl.FOLDERS],g=void 0===f?[]:f,m=(0,o.A)(g,1),b=m[0],v=u===ae.Nz.BEFORE?{before:{uri:t}}:{after:{uri:t}},!n){e.next=38;break}if(x=l[Object.keys(l)[0]][0],!(0,xn.tb)(x)&&!(0,xn.fp)(x)){e.next=24;break}return e.next=7,i.getContents();case 7:if(h=e.sent,-1!==(O=qn(h.items,x))){e.next=14;break}return e.next=12,i.add([x],{before:"start"});case 12:e.next=22;break;case 14:if(!(O>0)){e.next=22;break}if(!(0,xn.tb)(x)){e.next=20;break}return e.next=18,i.move({uri:x},{before:"start"});case 18:e.next=22;break;case 20:return e.next=22,i.moveFolder({uri:x},{before:"start"});case 22:e.next=33;break;case 24:if((0,xn.Z0)(x)){e.next=33;break}return e.next=27,a.contains(x);case 27:if(j=e.sent,P=(0,o.A)(j,1),P[0]){e.next=33;break}return e.next=33,a.add({uris:[x]});case 33:return e.next=35,a.pin(x,v);case 35:s.logInteraction(r.dragPinItem({itemToPin:x})),e.next=46;break;case 38:if(!b){e.next=43;break}return e.next=41,i.moveFolder({uri:b},v);case 41:e.next=46;break;case 43:if(!y.length){e.next=46;break}return e.next=46,d(y,v);case 46:s.logInteraction(r.dragSort());case 47:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[t,n,a,s,r,i,d]),y=st(n?{onApplyDrop:p,spec:r,isDropTargetPinned:n}:{onApplyDrop:p}),f=y.unpinConfirmationDialog,g=y.applyDropWithUnpinConfirmation,m=(0,u.useCallback)(function(){var e=(0,l.A)(c().mark((function e(t,r){var n,i,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[ie.fl.PLAYLISTS_V2],i=void 0===n?[]:n,a=t[ie.fl.FOLDERS],o=void 0===a?[]:a,!i.length||!o.length){e.next=5;break}throw new Error("Dropping a mix of playlists and folders is not supported");case 5:if(!(o.length>1)){e.next=7;break}throw new Error("Dropping multiple folders is not supported");case 7:g(t,r);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[g]);return{handleDropBeforeOrAfterRootlistItem:m,unpinConfirmationDialog:f}}function qn(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Zn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if((0,Kn.Af)(a)||(0,Kn.sA)(a)){if((0,xn.B2)(a.uri,t))return n;if((0,Kn.sA)(a)){var o=qn(a.items,t,n+1);if(-1!==o)return o}}}}catch(e){i.e(e)}finally{i.f()}return-1}var Qn=["dropPosition","className"];function $n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ti={state:{referrer:"your_library",preventMoveFocus:!0}};function ri(e){var t,r,n=e.uri,o=e.to,l=void 0===o?(null===(t=(0,xn.o_)(n))||void 0===t?void 0:t.toURLPath(!0))||"":o,s=e.type,c=e.handleNavigate,d=e.dragLabel,p=e.isPinned,y=e.canReorder,f=e.allowedDropTargetDropOnMimeTypes,g=void 0===f?[]:f,m=e.onDropTargetDropOn,b=e.onLongDragOver,v=e.openDeleteDialog,x=e.togglePlay,h=e.isItemInGrid,O=e.playInsteadOfNavigating,P=void 0!==O&&O,w=e.isPlaying,S=e.isActive,A=e.spec,D=e.folderDepth,C=(0,Bn.W)({uri:n,type:"link"})?(0,Un.hF)(l):l,R=(0,Nn.Zp)(),I=(0,Nn.zy)(),k=(0,u.useCallback)((function(){R(C,ti)}),[R,C]),E=(0,T.s)(),L=(0,u.useRef)(0),N=(0,u.useRef)(null),F=(0,u.useCallback)((function(e){var t,r=e.target;return r instanceof HTMLElement&&!(null!==(t=N.current)&&void 0!==t&&t.contains(r))}),[]),M=(0,u.useCallback)((function(e){if(!F(e)){if(e.preventDefault(),e.currentTarget.scrollIntoView({block:"nearest"}),P){if(L.current>Date.now())return;return L.current=Date.now()+300,void(w||(null==x||x(),E.logInteraction(A.yourLibraryItemFactory().hitPlay({itemToBePlayed:n}))))}c?c():C&&R(C,ei(ei({},ti),{},{replace:C===I.pathname})),E.logInteraction(A.yourLibraryItemFactory().hitUiNavigate({destination:n}))}}),[F,P,c,C,E,A,n,x,w,R,I.pathname]),B=(0,u.useCallback)((function(e){P||F(e)||x&&(S?w?E.logInteraction(A.yourLibraryItemFactory().doubleHitPause({itemToBePaused:n})):E.logInteraction(A.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:n})):E.logInteraction(A.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:n})),null==x||x())}),[F,P,x,S,w,E,A,n]),U=(0,u.useCallback)((function(){E.logInteraction(A.yourLibraryItemFactory().secondaryHitUiReveal())}),[E,A]),_=(0,Wn.P)({itemUris:[n],itemMimeTypes:[(0,ie.j3)(s)],dragLabelText:d,sectionId:null!=D?D:0,dropOriginUri:j.gv}),V=_.draggable,H=_.onDragStart,z=[];p?z=Xn:y&&(z=Yn);var W=(0,i.A)((0,i.A)((0,i.A)({},ae.Nz.ON,g),ae.Nz.BEFORE,z),ae.Nz.AFTER,z),X=Jn({dropTargetUri:n,spec:A,isDropTargetPinned:p}),Y=X.handleDropBeforeOrAfterRootlistItem,K=X.unpinConfirmationDialog,Z=(0,u.useCallback)((function(e,t){t===ae.Nz.ON?null==m||m(e,t):t!==ae.Nz.BEFORE&&t!==ae.Nz.AFTER||Y(e,t)}),[m,Y]),G=(0,oe.A)({uri:n,allowedMimeTypesByDropPosition:W,onDrop:Z,onLongDragOver:null!=b?b:k,reorderDirection:h?"horizontal":"vertical"}),J=G.dropPosition,q=G.className,Q=(0,a.A)(G,Qn),$=(0,u.useCallback)((function(e){e.repeat||F(e)||("Backspace"!==e.key&&"Delete"!==e.key||!v||v(),"Enter"===e.key&&e.shiftKey&&x&&(e.preventDefault(),x()),"Enter"===e.key&&E.logInteraction(A.yourLibraryItemFactory().keyStrokeUiNavigate({destination:n})))}),[F,E,v,A,x,n]),ee=null===(r=(0,xn.o_)(I.pathname,{parseUnknown:!0}))||void 0===r?void 0:r.toURI();return ei({onClick:M,onDoubleClick:B,draggable:V&&!!d,onDragStart:H,onKeyDown:$,unpinConfirmationDialog:K,dropPosition:J,dropTargetClassName:q,logRightClick:U,isViewActive:!!ee&&(0,xn.B2)(n,ee),itemRef:N},Q)}var ni=function(e){switch(e){case W.c.ALBUM:return A.Ru.get("web-player.your-library-x.type-album");case W.c.ARTIST:return A.Ru.get("web-player.your-library-x.type-artist");case W.c.FOLDER:return A.Ru.get("web-player.your-library-x.type-folder");case W.c.AUDIOBOOK:return A.Ru.get("web-player.your-library-x.type-audiobook");case W.c.YOUR_EPISODES:case W.c.LOCAL_FILES:case W.c.LIKED_SONGS:case W.c.PLAYLIST:return A.Ru.get("web-player.your-library-x.type-playlist");case W.c.SHOW:return A.Ru.get("web-player.your-library-x.type-show");case W.c.PRE_RELEASE_ALBUM:return A.Ru.get("web-player.your-library-x.type-prerelease-album");case W.c.PRE_RELEASE_BOOK:return A.Ru.get("web-player.your-library-x.type-prerelease-audiobook");default:return(0,ft.d)(e)}},ii=function(e){switch(e){case W.c.YOUR_EPISODES:case W.c.LIKED_SONGS:case W.c.LOCAL_FILES:return W.c.PLAYLIST;default:return e}},ai=r(48177),oi=u.createContext(!1),li=function(e){var t=e.children,r=e.isCompact;return(0,I.jsx)(oi.Provider,{value:r,children:t})},si=function(){return(0,u.useContext)(oi)};const ci="wJTUKAyYI219kJtclJLa",ui="q0_cpEyu_8EC7he96qT_",di="L8ET6xwMh_wMEqCpmunH",pi="D_1eJKOJ3wTCKO93GX06",yi="_7kcfiJ2UNEh3CDR9Wau",fi="N8wAJha8ApfxgOfqv4UM",gi="iJMxV9zMXSfrjJPyB3Fw";var mi=["onClick","onDoubleClick","draggable","onDragStart","onKeyDown","dropPosition","dropTargetClassName","unpinConfirmationDialog","logRightClick","isViewActive","itemRef"];function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xi=function(e){var t,r=e.uri,n=e.to,o=void 0===n?(null===(t=(0,xn.o_)(r))||void 0===t?void 0:t.toURLPath(!0))||"":n,l=e.handleNavigate,s=e.dragLabel,c=e.name,d=e.subtitle,y=e.cover,f=e.type,g=e.downloadButton,m=e.canReorder,b=e.allowedDropTargetDropOnMimeTypes,v=e.onDropTargetDropOn,h=e.onLongDragOver,O=e.menu,j=e.leading,P=e.openDeleteDialog,w=e.togglePlay,S=e.isPinned,A=e.shouldShowType,D=e.playbackUri,C=e.isPlaying,T=e.isActive,R=e.playInsteadOfNavigating,k=e.spec,E=e.index,L=e.animateClassName,N=void 0===L?"":L,F=e.animateState,M=e.preReleaseIcon,B=e.lockedIcon,U=ri({uri:r,to:o,handleNavigate:l,dragLabel:s,isPinned:S,canReorder:m,allowedDropTargetDropOnMimeTypes:b,onDropTargetDropOn:v,openDeleteDialog:P,onLongDragOver:h,togglePlay:w,isItemInGrid:!0,isPlaying:C,isActive:T,spec:k,playInsteadOfNavigating:R}),_=U.onClick,V=U.onDoubleClick,H=U.draggable,z=U.onDragStart,W=U.onKeyDown,X=U.dropPosition,Y=U.dropTargetClassName,K=U.unpinConfirmationDialog,Z=U.logRightClick,G=U.isViewActive,J=U.itemRef,q=(0,a.A)(U,mi),Q=(0,I.jsx)(zn,{uri:r,title:c,menu:O,handleNavigate:l,playbackUri:D}),$=(0,I.jsx)(Ln,{leading:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ai.g,{pinned:S}),B,M,g]}),subtitle:(0,I.jsxs)(I.Fragment,{children:[A&&ni(f),!!d&&A&&" • ",d]}),uri:r}),ee=(0,u.useRef)(null),te=si(),re=(0,I.jsx)(x.h,{menu:O,onShow:Z,children:(0,I.jsx)(On.E,{uri:r,trigger:On.l.OnMouseDown,children:(0,I.jsx)(bn.Z,vi({id:r,title:Q,subtitle:$,media:y,size:"sm",leading:j,className:p()(ci,(0,i.A)({},N,F)),variant:G?"tinted":void 0,onClick:_,onDoubleClick:V,padding:vn.CJ},q))})});return te&&(re=(0,I.jsx)(Tn,{title:Q,subtitleSlot:$,uri:r,isPlaying:C,parentRef:ee,children:(0,I.jsx)("div",{children:(0,I.jsx)(x.h,{menu:O,onShow:Z,children:(0,I.jsx)(On.E,{uri:r,trigger:On.l.OnMouseDown,children:(0,I.jsx)(bn.Z,vi({id:r,title:void 0,media:y,size:"sm",className:p()(ci,ui,(0,i.A)({},N,F)),variant:G?"tinted":void 0,onClick:_,onDoubleClick:V,padding:vn.vw,ref:ee},q))})})})})),(0,I.jsxs)(I.Fragment,{children:[K,(0,I.jsx)(hn.W,{draggable:H,onDragStart:z,onKeyDown:W,className:p()(Y,(0,i.A)((0,i.A)((0,i.A)({},Fr,X===ae.Nz.ON),Br,X===ae.Nz.BEFORE),Ur,X===ae.Nz.AFTER)),"aria-selected":T,innerRef:J,"aria-posinset":E,children:re})]})},hi=r(96041),Oi=r(78227),ji=r(85262),Pi=r(82122),wi=r(22030),Si=r(34757),Ai=(r(99997),r(23401)),Di=function(e){var t=e.name,r=e.uri,n=e.togglePlay,a=e.spec,o=e.isActive,l=e.isPlaying,s=e.size,c=(0,T.s)(),d=(0,u.useCallback)((function(){o?l?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:r})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:r})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:r})),n()}),[o,l,c,a,n,r]);return(0,I.jsx)("div",{className:p()(yi,(0,i.A)((0,i.A)({},gi,l),fi,"small"===s)),role:"gridcell",children:(0,I.jsx)(Ai.R,{isPlaying:l,onClick:d,ariaPlayLabel:A.Ru.get("playlist.a11y.play",t),ariaPauseLabel:A.Ru.get("playlist.a11y.pause",t),size:s})})};function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ti=(0,u.memo)((function(e){var t=e.title,r=e.type,n=e.images,a=e.isCircular,o=e.color,l=e.animateState,s=e.animateClassName,c=void 0===s?"":s,u=(0,Si._)();return(0,I.jsx)(Oi.b,{fadeIn:!0,images:u(n,48),shape:a?Oi.u.CIRCLE:Oi.u.ROUNDED_CORNERS,size:ji.Qe.SIZE_48,iconSize:"medium",type:r,title:t,className:p()(kn.A.entityImage,(0,i.A)({},c,l)),color:o,loadingMode:"eager"})})),Ri=(0,u.memo)((function(e){var t=e.title,r=e.type,n=e.uri,a=e.images,l=e.isCircular,s=e.togglePlay,c=e.color,d=e.spec,p=e.isActive,y=e.isPlaying,f=(0,b.NC)(wn.AE),g=si(),m=(0,Si._)(),v=(0,u.useState)("medium"),x=(0,o.A)(v,2),h=x[0],O=x[1],j=(0,u.useRef)(null);return(0,wi.w)({onResize:function(e){var t=e.width;O(t<90?"small":"medium")},refOrElement:j}),(0,I.jsx)("div",{className:pi,ref:j,children:(0,I.jsx)(hi.M,{images:m(a,250),FallbackComponent:function(e){return(0,I.jsx)(Pi.s,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({semanticColor:"textSubdued",type:r,size:"xxlarge",className:f?di:""},e))},isCircular:l,color:c,loadingMode:"eager",children:s&&!g&&(0,I.jsx)(Di,{name:t,uri:n,togglePlay:s,spec:d,isActive:p,isPlaying:y,size:h})})})})),Ii=r(60202);const ki="_ymJNIfklFmogab9uWY1";var Ei=function(e){var t=e.folderDepth,r=void 0===t?0:t;return(0,I.jsx)("li",{className:ki,style:{"--ylx-folder-depth":r}})},Li=["RowVariantComponent","uri","to","handleNavigate","folderDepth","className","dragLabel","isPinned","canReorder","allowedDropTargetDropOnMimeTypes","onDropTargetDropOn","onLongDragOver","style","openDeleteDialog","togglePlay","isPlaying","isActive","type","menu","name","subtitle","downloadButton","expandFolderButton","cover","alt","addedAt","lastPlayedAt","shouldShowType","playbackUri","playInsteadOfNavigating","spec","nrValidItems","index","lockedIcon","onKeyDown","preReleaseIcon"],Ni=["onClick","onDoubleClick","onDragStart","onKeyDown","dropPosition","dropTargetClassName","draggable","unpinConfirmationDialog","logRightClick","isViewActive","itemRef"];function Fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bi=function(e){var t,r=e.RowVariantComponent,n=e.uri,o=e.to,l=void 0===o?(null===(t=(0,xn.o_)(n))||void 0===t?void 0:t.toURLPath(!0))||"":o,s=e.handleNavigate,c=e.folderDepth,d=e.className,y=e.dragLabel,f=e.isPinned,g=e.canReorder,m=e.allowedDropTargetDropOnMimeTypes,b=e.onDropTargetDropOn,v=e.onLongDragOver,x=e.style,h=e.openDeleteDialog,O=e.togglePlay,j=e.isPlaying,P=e.isActive,w=e.type,S=(e.menu,e.name,e.subtitle,e.downloadButton,e.expandFolderButton,e.cover,e.alt,e.addedAt,e.lastPlayedAt,e.shouldShowType,e.playbackUri,e.playInsteadOfNavigating),A=e.spec,D=e.nrValidItems,C=e.index,T=(e.lockedIcon,e.onKeyDown),R=(e.preReleaseIcon,(0,a.A)(e,Li)),k=ri({uri:n,to:l,type:w,handleNavigate:s,dragLabel:y,isPinned:f,canReorder:g,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:b,onLongDragOver:v,openDeleteDialog:h,togglePlay:O,isPlaying:j,isActive:P,playInsteadOfNavigating:S,spec:A,folderDepth:c}),E=k.onClick,L=k.onDoubleClick,N=k.onDragStart,F=k.onKeyDown,M=k.dropPosition,B=k.dropTargetClassName,U=k.draggable,_=k.unpinConfirmationDialog,V=k.logRightClick,H=k.isViewActive,z=k.itemRef,W=(0,a.A)(k,Ni),X=(0,u.useCallback)((function(e){F(e),null==T||T(e)}),[F,T]);return(0,I.jsxs)(I.Fragment,{children:[_,M===ae.Nz.BEFORE&&(0,I.jsx)(Ei,{folderDepth:c}),(0,I.jsx)(Ii.c,Mi(Mi(Mi({style:Mi({"--ylx-folder-depth":c},x),draggable:U,onDragStart:N,onDoubleClick:L,className:p()(d,B,Ar,(0,i.A)({},Fr,M===ae.Nz.ON))},R),W),{},{onKeyDown:X,innerRef:z,"aria-setsize":D,"aria-posinset":C+1,children:(0,I.jsx)(r,Mi(Mi({},e),{},{to:l,isActive:P,isViewActive:H,onClick:E,logRightClick:V,playInsteadOfNavigating:S,parentRef:z}))})),M===ae.Nz.AFTER&&(0,I.jsx)(Ei,{folderDepth:c})]})},Ui=r(76558),_i=function(e){return e.locked?(0,I.jsx)(Ui.u,{semanticColor:"textSubdued",title:A.Ru.get("mwp.header.content.unavailable"),className:kn.A.icon,size:"xsmall"}):null};function Vi(e){var t,r,n=e.uri,i=e.artists,a=e.isPremiumOnly,o=(0,u.useContext)(Ae.g).filter,l=(0,mn.l_)(n),s=l.isPlaying,c=l.isActive,d=(0,f.wA)(),p=(0,u.useCallback)((function(){d((0,dn.aw)(n))}),[d,n]),y=(0,gn.P)({uri:n},{featureIdentifier:"album",referrerIdentifier:"your_library"}).togglePlay;return{isPlaying:s,isActive:c,openDeleteDialog:p,togglePlay:a?void 0:y,menu:(0,I.jsx)(pn.h,{uri:n,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,I.jsx)(fn.M,{searchWords:[o.trim()],textToHighlight:null!==(t=null===(r=i.at(0))||void 0===r?void 0:r.name)&&void 0!==t?t:""}),downloadButton:(0,I.jsx)(yn.M,{uri:n,size:"xsmall",className:kn.A.icon,as:"span"})}}var Hi=function(e){var t=e.libraryItem,r=e.shouldShowType,n=void 0!==r&&r,i=e.RowVariantComponent,a=e.spec,o=e.nrValidItems,l=e.index,s=t.uri,c=t.images,u=t.name,d=t.pinned,p=t.type,y=t.addedAt,f=t.lastPlayedAt,g=t.color,m=t.isPremiumOnly,b=Vi(t),v=b.isPlaying,x=b.isActive,h=b.openDeleteDialog,O=b.togglePlay,j=b.menu,P=b.subtitleText,w=b.downloadButton,S=(0,I.jsx)(Ti,{title:u,type:p,images:c,color:g}),A=(0,I.jsx)(_i,{locked:m});return(0,I.jsx)(Bi,{RowVariantComponent:i,uri:s,cover:S,name:u,subtitle:P,downloadButton:w,alt:u,type:p,dragLabel:u,menu:j,togglePlay:O,openDeleteDialog:h,addedAt:y,lastPlayedAt:f,isPinned:d,isPlaying:v,isActive:x,shouldShowType:n,spec:a,nrValidItems:o,index:l,lockedIcon:A})},zi=function(e){var t=e.libraryItem,r=e.shouldShowType,n=void 0!==r&&r,i=e.spec,a=e.index,o=t.uri,l=t.images,s=t.name,c=t.pinned,u=t.type,d=t.color,p=t.isPremiumOnly,y=Vi(t),f=y.togglePlay,g=y.menu,m=y.subtitleText,b=y.downloadButton,v=y.openDeleteDialog,x=y.isPlaying,h=y.isActive,O=(0,I.jsx)(Ri,{title:s,type:u,images:l,uri:o,togglePlay:f,color:d,spec:i,isActive:h,isPlaying:x}),j=(0,I.jsx)(_i,{locked:p});return(0,I.jsx)(xi,{uri:o,name:s,subtitle:m,menu:g,dragLabel:s,cover:O,downloadButton:b,type:u,togglePlay:f,isPinned:c,shouldShowType:n,openDeleteDialog:v,isPlaying:x,isActive:h,spec:i,index:a,lockedIcon:j})},Wi=r(65623);function Xi(e){var t=e.uri,r=(0,f.wA)(),n=(0,gn.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}).togglePlay,i=(0,mn.l_)(t);return{togglePlay:n,isPlaying:i.isPlaying,isActive:i.isActive,openDeleteDialog:(0,u.useCallback)((function(){r((0,dn.aw)(t))}),[r,t]),menu:(0,I.jsx)(Wi.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}var Yi=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l=t.uri,s=t.images,c=t.name,u=t.type,d=t.addedAt,p=t.lastPlayedAt,y=t.pinned,f=t.color,g=Xi(t),m=g.togglePlay,b=g.isPlaying,v=g.isActive,x=g.openDeleteDialog,h=g.menu,O=(0,I.jsx)(Ti,{title:c,type:u,images:s,isCircular:!0,color:f});return(0,I.jsx)(Bi,{RowVariantComponent:n,uri:l,cover:O,name:c,type:u,alt:c,dragLabel:c,menu:h,togglePlay:m,openDeleteDialog:x,addedAt:d,lastPlayedAt:p,isPlaying:b,isActive:v,isPinned:y,shouldShowType:r,spec:i,nrValidItems:a,index:o})},Ki=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.spec,i=e.index,a=t.uri,o=t.images,l=t.name,s=t.type,c=t.pinned,u=t.color,d=Xi(t),p=d.togglePlay,y=d.menu,f=d.openDeleteDialog,g=d.isPlaying,m=d.isActive,b=(0,I.jsx)(Ri,{title:l,type:s,images:o,uri:a,togglePlay:p,isCircular:!0,color:u,spec:n,isActive:m,isPlaying:g});return(0,I.jsx)(xi,{uri:a,name:l,menu:y,dragLabel:l,cover:b,type:s,togglePlay:p,isPinned:c,shouldShowType:r,openDeleteDialog:f,isPlaying:g,isActive:m,spec:n,index:i})},Zi=r(83800);function Gi(e){var t=e.uri,r=e.authorName,n=(0,u.useContext)(Ae.g).filter,i=(0,f.wA)(),a=(0,mn.l_)(t);return{isPlaying:a.isPlaying,isActive:a.isActive,openDeleteDialog:(0,u.useCallback)((function(){i((0,dn.aw)(t))}),[i,t]),menu:(0,I.jsx)(Zi.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,I.jsx)(fn.M,{searchWords:[n.trim()],textToHighlight:r}),downloadButton:(0,I.jsx)(yn.M,{uri:t,size:"xsmall",className:kn.A.icon,as:"span"})}}var Ji=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l=t.uri,s=t.images,c=t.name,u=t.type,d=t.pinned,p=t.addedAt,y=t.lastPlayedAt,f=t.color,g=Gi(t),m=g.isPlaying,b=g.isActive,v=g.openDeleteDialog,x=g.menu,h=g.subtitleText,O=g.downloadButton,j=(0,I.jsx)(Ti,{title:c,type:u,images:s,color:f}),P=(0,I.jsx)(_i,{locked:t.isLocked});return(0,I.jsx)(Bi,{RowVariantComponent:n,uri:l,cover:j,name:c,subtitle:h,alt:c,dragLabel:c,menu:x,openDeleteDialog:v,addedAt:p,lastPlayedAt:y,isPlaying:m,isActive:b,isPinned:d,shouldShowType:r,type:u,spec:i,nrValidItems:a,lockedIcon:P,index:o,downloadButton:O})},qi=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.spec,i=e.index,a=t.uri,o=t.images,l=t.name,s=t.type,c=t.pinned,u=t.color,d=Gi(t),p=d.menu,y=d.subtitleText,f=d.openDeleteDialog,g=d.isPlaying,m=d.isActive,b=d.downloadButton,v=(0,I.jsx)(Ri,{title:l,type:s,images:o,uri:a,color:u,spec:n,isActive:m,isPlaying:g});return(0,I.jsx)(xi,{uri:a,name:l,subtitle:y,menu:p,dragLabel:l,cover:v,isPinned:c,shouldShowType:r,type:s,openDeleteDialog:f,isPlaying:g,isActive:m,spec:n,index:i,downloadButton:b})},Qi=(r(67560),r(33204)),$i=r(69115),ea=r(22643);function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var na=function(e){var t=e.uri,r=e.divider,n=e.onDeleteCallback,i=(0,R.W)(),a=(0,f.wA)(),o=(0,u.useCallback)((function(){i({intent:"playlisting",type:"click"}),a((0,dn.OB)(t,n))}),[a,n,i,t]);return(0,I.jsx)(D.D,{role:"menuitem",divider:r,onClick:o,leadingIcon:(0,I.jsx)(ea.P,{semanticColor:"textSubdued",size:"small"}),children:A.Ru.get("contextmenu.delete")})},ia=u.memo((function(e){return(0,I.jsx)(O.pZ,{value:"delete-folder",children:(0,I.jsx)(na,ra({},e))})})),aa=r(13567),oa=r(84394),la=r(65888);function sa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ua=function(e){var t=e.uri,r=e.spec,n=(0,gn.P)({uri:t},{featureIdentifier:"folder"}),i=n.togglePlay,a=n.isPlaying,o=n.isActive,l=(0,T.s)(),s=(0,u.useCallback)((function(){i(),r&&l&&(a?l.logInteraction(r.playButtonFactory({uri:t}).hitPause({itemToBePaused:t})):o?l.logInteraction(r.playButtonFactory({uri:t}).hitResume({itemToBeResumed:t})):l.logInteraction(r.playButtonFactory({uri:t}).hitPlay({itemToBePlayed:t})))}),[o,a,l,r,i,t]);return(0,I.jsx)(D.D,{role:"menuitem",onClick:s,leadingIcon:a?(0,I.jsx)(oa._,{semanticColor:"textSubdued",size:"small"}):(0,I.jsx)(la.A,{semanticColor:"textSubdued",size:"small"}),children:a?A.Ru.get("pause"):A.Ru.get("play")})},da=u.memo((function(e){return(0,I.jsx)(O.pZ,{value:"create-folder",children:(0,I.jsx)(ua,ca({},e))})})),pa=r(12182);function ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ga=function(e){var t=e.uri,r=e.name,n=e.divider,i=e.spec,a=e.handleRename,o=(0,T.s)(),l=(0,f.wA)(),s=(0,u.useCallback)((function(){i&&o.logInteraction(i.editButtonFactory({uri:t}).hitUiReveal()),l((0,dn.O2)(r,a))}),[l,o,r,a,i,t]);return(0,I.jsx)(D.D,{role:"menuitem",divider:n,onClick:s,leadingIcon:(0,I.jsx)(pa.G,{semanticColor:"textSubdued",size:"small"}),children:A.Ru.get("contextmenu.rename")})},ma=u.memo((function(e){return(0,I.jsx)(O.pZ,{value:"rename",children:(0,I.jsx)(ga,fa({},e))})})),ba=r(42272),va=u.memo((function(e){var t=e.reference,r=e.name,n=void 0===r?"":r,i=e.onRename,a=e.onCreateCallback,o=void 0===a?function(){}:a,l=e.onDeleteCallback,s=e.canPin,c=void 0===s?j.oT.NO:s,u=e.isPinned,d=void 0!==u&&u,p=(0,P.o)(t.uri).spec,y=(0,$i.Ek)();return(0,I.jsx)(O.pZ,{value:"folder",children:(0,I.jsxs)(h.W,{children:[(0,I.jsx)(ma,{spec:p,uri:t.uri,name:n,handleRename:i}),(0,I.jsx)(ia,{uri:t.uri,divider:"after",onDeleteCallback:l}),(c!==j.oT.NO||d)&&(0,I.jsx)(aa.k,{uri:t.uri,canPin:c,isPinned:d,type:W.c.FOLDER,spec:p}),(0,I.jsx)(N,{position:{after:t},onCreateCallback:o,spec:p}),(0,I.jsx)(w.j,{position:{after:t},onCreateCallback:o,spec:p}),(0,I.jsx)(ba.y,{uriToBeAdded:t.uri,isInLibrary:!0,spec:p}),y&&(0,I.jsx)(da,{uri:t.uri,spec:p})]})})})),xa=r(82940),ha=r(11244),Oa=r(84828),ja=r(68198),Pa=function(e){var t=e.uri,r=(0,u.useState)(!1),n=(0,o.A)(r,2),i=n[0],a=n[1],l=(0,xa.Q)(),s=(0,u.useCallback)((function(){a(!0),setTimeout((function(){a(!1)}),500)}),[]);return(0,yt.l)(pt.UV.OPERATION_COMPLETE,(function(e){"add"===e.data.operation&&t===l.getDefaultCurationContextUri(e.data.uris[0])&&s()})),(0,Oa.e)(ha.Lj.OPERATION_COMPLETE,(function(e){"add"===e.data.operation&&t===e.data.uri&&s()})),(0,jt.b)(ja.tD.OPERATION_COMPLETE,(function(e){var r,n;"remove"!==e.data.operation&&"end"!==(null===(r=e.data.position)||void 0===r?void 0:r.after)&&(null===(n=e.data.position.after)||void 0===n?void 0:n.uri)===t&&(0,xn.fp)(t)&&s()})),{animateState:i,animateClassName:kn.A.pulse}},wa=r(90827),Sa=r(99665);function Aa(e,t){var r=e.uri,n=e.name,i=e.numberOfFolders,a=e.numberOfPlaylists,o=e.pinned,l=(0,mn.l_)(r),s=l.isPlaying,c=l.isActive,d=(0,u.useContext)(Ge).pushFolder,p=(0,f.wA)(),y=(0,gn.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}).togglePlay,g=(0,f.d4)((function(e){return e.platform.isDesktop})),m=ut(t,r),b=m.handleDropOnFolder,v=m.unpinConfirmationDialog,x=(0,wa.Z)().renameFolder,h=b,O=[a>0||!i?A.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",a):null,i>0?A.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",i):null].filter(Sa.P).join(A.Ru.getSeparator()),j=(0,u.useCallback)((function(){x(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[e,x]),P=(0,u.useCallback)((function(){d(e.uri)}),[e.uri,d]);return{openDeleteDialog:(0,u.useCallback)((function(){p((0,dn.OB)(r))}),[p,r]),togglePlay:g?y:void 0,menu:(0,I.jsx)(va,{reference:{uri:r},name:n,canPin:e.canPin,isPinned:o,onRename:j}),subtitleText:O,onDropTargetDropOn:h,handleNavigate:P,dropOnFolderUnpinConfirmationDialog:v,isPlaying:s,isActive:c}}var Da=function(e){var t,r,n=e.libraryItem,a=e.RowVariantComponent,l=e.spec,s=e.nrValidItems,c=e.index,d=n.uri,y=n.folderDepth,f=n.name,g=n.type,m=n.isFlattened,b=n.pinned,v=n.canReorder,x=Aa(n,l),h=x.openDeleteDialog,O=x.togglePlay,j=x.menu,P=x.subtitleText,w=x.onDropTargetDropOn,S=x.handleNavigate,D=x.dropOnFolderUnpinConfirmationDialog,C=x.isPlaying,R=x.isActive,k=function(e){var t=(0,u.useContext)(Ye),r=t.getIsFolderExpanded,n=t.setIsFolderExpanded;return[(0,u.useMemo)((function(){return r(e)}),[r,e]),(0,u.useCallback)((function(t){n(e,t)}),[n,e])]}(d),E=(0,o.A)(k,2),L=E[0],N=E[1],F=(0,T.s)(),M=(0,u.useCallback)((function(){N(!0),F.logInteraction(l.yourLibraryItemFactory().dragUiReveal())}),[F,N,l]),B=(0,u.useCallback)((function(e){e.stopPropagation()}),[]),U=(0,u.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),N(!L),L?F.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):F.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[N,L,F,l]),_=(0,u.useCallback)((function(e){"ArrowLeft"===e.key?N(!1):"ArrowRight"===e.key&&N(!0)}),[N]),V=!m&&(0,I.jsx)(Tt.H,{"data-skip-in-keyboard-nav":!0,"aria-label":L?A.Ru.get("web-player.your-library-x.collapse-folder"):A.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:Qi.y,size:"small",condensedAll:!0,onClick:U,onDoubleClick:B,tabIndex:-1,className:p()(yr,fr,(0,i.A)({},Sr,!L))}),H=Pa({uri:d}),z=H.animateState,W=H.animateClassName,X=(0,I.jsx)(Ti,{title:f,type:g,animateState:z,animateClassName:W});return(0,I.jsxs)(I.Fragment,{children:[D,(0,I.jsx)(Bi,{onKeyDown:_,RowVariantComponent:a,uri:d,to:"/folder/".concat(null!==(t=null===(r=(0,xn.o_)(d))||void 0===r?void 0:r.id)&&void 0!==t?t:""),handleNavigate:S,folderDepth:y,cover:X,name:f,subtitle:P,alt:f,dragLabel:f,menu:j,canReorder:v,allowedDropTargetDropOnMimeTypes:ze,onDropTargetDropOn:w,onLongDragOver:M,togglePlay:O,openDeleteDialog:h,addedAt:n.addedAt,lastPlayedAt:n.lastPlayedAt,isPinned:b,shouldShowType:!1,type:g,isPlaying:C,isActive:R,expandFolderButton:V,spec:l,nrValidItems:s,index:c})]})},Ca=function(e){var t,r,n=e.libraryItem,i=e.spec,a=e.index,o=n.uri,l=n.name,s=n.type,c=n.pinned,u=n.canReorder,d=Aa(n,i),p=d.togglePlay,y=d.menu,f=d.subtitleText,g=d.onDropTargetDropOn,m=d.handleNavigate,b=d.openDeleteDialog,v=d.isPlaying,x=d.isActive,h=Pa({uri:o}),O=h.animateState,j=h.animateClassName,P=(0,I.jsx)(Ri,{title:l,type:s,uri:o,togglePlay:p,spec:i,isActive:x,isPlaying:v});return(0,I.jsx)(xi,{uri:o,to:"/folder/".concat(null!==(t=null===(r=(0,xn.o_)(o))||void 0===r?void 0:r.id)&&void 0!==t?t:""),handleNavigate:m,cover:P,name:l,subtitle:f,menu:y,dragLabel:l,canReorder:u,allowedDropTargetDropOnMimeTypes:ze,onLongDragOver:m,onDropTargetDropOn:g,togglePlay:p,isPinned:c,shouldShowType:!1,type:s,openDeleteDialog:b,isPlaying:v,isActive:x,spec:i,index:a,animateState:O,animateClassName:j})},Ta=r(37339),Ra=u.memo((function(e){var t=e.uri,r=e.canPin,n=e.isPinned,i=e.downloadUri,a=(0,P.o)(t).spec;return(0,I.jsx)(O.pZ,{value:"generic",children:(0,I.jsxs)(h.W,{children:[i?(0,I.jsx)(Ta.d,{spec:a,uri:i}):null,r!==j.oT.NO&&(0,I.jsx)(aa.k,{uri:t,canPin:r,isPinned:n,type:W.c.PLAYLIST,spec:a})]})})})),Ia=r(13147);function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ea=[ie.fl.TRACKS,ie.fl.LOCAL_TRACKS];function La(e){var t=e.numberOfSongs,r="spotify:collection:tracks",a=(0,f.d4)(Ia.Ht).user,o=(0,xn.fH)(null==a?void 0:a.id).toURI(),l=o,s=o,c=(0,gn.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}).togglePlay,d=(0,u.useContext)(z.Z),p=(0,mn.l_)(l),y=p.isPlaying,g=p.isActive,m=(0,u.useCallback)((function(e){var t=e[ie.fl.TRACKS],r=void 0===t?[]:t,i=e[ie.fl.LOCAL_TRACKS],a=void 0===i?[]:i,o=[].concat((0,n.A)(r),(0,n.A)(a));null!=o&&o.length&&(null==d||d.add({uris:o}))}),[d]);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isPlaying:y,isActive:g,togglePlay:c,menu:(0,I.jsx)(Ra,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:s}),downloadButton:(0,I.jsx)(yn.M,{uri:s,size:"xsmall",className:kn.A.icon,as:"span"}),subtitleText:(0,I.jsx)(I.Fragment,{children:A.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:m,playbackUri:l,uri:r},Pa({uri:r}))}var Na=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l=t.images,s=t.name,c=t.type,u=t.pinned,d=t.addedAt,p=t.lastPlayedAt,y=t.color,f=La(t),g=f.isPlaying,m=f.isActive,b=f.togglePlay,v=f.menu,x=f.subtitleText,h=f.onDropTargetDropOn,O=f.playbackUri,j=f.uri,P=f.downloadButton,w=f.animateState,S=f.animateClassName,A=(0,I.jsx)(Ti,{title:s,type:c,images:l,color:y,animateState:w,animateClassName:S});return(0,I.jsx)(Bi,{RowVariantComponent:n,uri:j,cover:A,name:s,subtitle:x,alt:s,dragLabel:s,menu:v,allowedDropTargetDropOnMimeTypes:Ea,onDropTargetDropOn:h,togglePlay:b,addedAt:d,lastPlayedAt:p,isPlaying:g,isActive:m,isPinned:u,shouldShowType:r,type:c,playbackUri:O,downloadButton:P,spec:i,nrValidItems:a,index:o})},Fa=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.spec,i=e.index,a=t.images,o=t.name,l=t.type,s=t.pinned,c=t.color,u=La(t),d=u.togglePlay,p=u.menu,y=u.subtitleText,f=u.onDropTargetDropOn,g=u.playbackUri,m=u.uri,b=u.downloadButton,v=u.isPlaying,x=u.isActive,h=u.animateState,O=u.animateClassName,j=(0,I.jsx)(Ri,{title:o,type:l,images:a,uri:g,togglePlay:d,color:c,spec:n,isActive:x,isPlaying:v});return(0,I.jsx)(xi,{uri:m,name:o,subtitle:y,menu:p,dragLabel:o,allowedDropTargetDropOnMimeTypes:Ea,onDropTargetDropOn:f,cover:j,togglePlay:d,isPinned:s,shouldShowType:r,type:l,playbackUri:g,downloadButton:b,isPlaying:v,isActive:x,spec:n,index:i,animateState:h,animateClassName:O})},Ma=r(99497),Ba=r(4910),Ua=r(70003),_a=r(5264);function Va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ha(e){var t=e.numberOfFiles,r=_a.bV,n=(0,Ua.Iu)().uri,i=(0,mn.l_)(r);return{playbackUri:r,uri:n,isPlaying:i.isPlaying,isActive:i.isActive,menu:(0,I.jsx)(Ra,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,I.jsx)(Ma.F,{size:"xsmall",className:kn.A.icon,semanticColor:"textBrightAccent"}),subtitleText:A.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}var za=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l=t.name,s=t.addedAt,c=t.lastPlayedAt,u=t.type,d=t.pinned,p=Ha(t),y=p.playbackUri,f=p.uri,g=p.isPlaying,m=p.menu,b=p.subtitleText,v=p.downloadButton,x=p.isActive,h=(0,I.jsx)("div",{className:gr,children:(0,I.jsx)(Ba.e,{iconSize:24,title:l})});return(0,I.jsx)(Bi,{RowVariantComponent:n,uri:f,name:l,subtitle:b,alt:l,dragLabel:l,menu:m,addedAt:s,lastPlayedAt:c,isPinned:d,isPlaying:g,isActive:x,shouldShowType:r,playbackUri:y,downloadButton:v,cover:h,type:u,spec:i,nrValidItems:a,index:o})},Wa=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.spec,a=e.index,o=t.name,l=t.images,s=t.type,c=t.pinned,u=Ha(t),d=u.playbackUri,p=u.uri,y=u.menu,f=u.downloadButton,g=u.subtitleText,m=u.isPlaying,v=u.isActive,x=(0,b.NC)(wn.AE),h=(0,I.jsx)("div",{className:pi,children:(0,I.jsx)(hi.M,{images:l,FallbackComponent:function(e){return(0,I.jsx)(Ba.e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Va(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({size:"xxlarge",className:x?di:""},e))}})});return(0,I.jsx)(xi,{uri:p,name:o,subtitle:g,menu:y,cover:h,type:s,playbackUri:d,downloadButton:f,isPinned:c,shouldShowType:r,isPlaying:m,isActive:v,spec:n,index:a})},Xa=r(66403),Ya=function(e){var t=e.index,r=e.type,n=(0,b.NC)(wn.AE),a=si();return(0,I.jsx)(Xa.T,{columnIndex:0,children:(0,I.jsx)(bn.Z,{className:p()(ci,(0,i.A)({},ui,a)),media:(0,I.jsx)(hi.M,{images:[],FallbackComponent:function(){return(0,I.jsx)(Pi.s,{type:r,size:"xxlarge",className:n?di:"",semanticColor:"textSubdued"})},isCircular:r===W.c.ARTIST}),variant:"naked",id:t,title:"",padding:a?vn.vw:vn.CJ})})},Ka=r(77045),Za=r(19467),Ga=r(52083),Ja=r(96833),qa=r(44419),Qa=r(86678),$a=r(60103),eo=r(24827),to=r(91799),ro=r(24971),no=r(5019),io=r(76711),ao=r(39441),oo=r(15879),lo=r(84804),so=r(14045),co=r(75369),uo=r(90464),po=u.memo((function(e){var t,r,n,i,a,o=e.reference,l=e.isPublished,s=e.canPin,c=void 0===s?j.oT.NO:s,u=e.isPinned,d=void 0!==u&&u,p=e.useDialogForUnfollow,y=void 0!==p&&p,f=e.isInLibrary,g=o.uri,m=(0,Ga.J)(g),b=!(null==m||null===(t=m.permissions)||void 0===t||!t.isPrivate),v=null!==(r=null!==(n=(0,Ja.v)(g))&&void 0!==n?n:null==m?void 0:m.isPublished)&&void 0!==r?r:l,x=(0,P.o)(g).spec,S=null==m?void 0:m.hasSpotifyAudiobooks;return m&&(0,I.jsx)(O.pZ,{value:"playlist",children:(0,I.jsxs)(h.W,{children:[!S&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Qa.K,{spec:x,uris:[g]}),(0,I.jsx)(qa._,{uri:g,spec:x})]}),!b&&(0,I.jsx)(lo._,{spec:x,divider:m.isOwnedBySelf?"after":"both",uri:g,isPublished:v}),m.isOwnedBySelf&&(0,I.jsx)(to.T,{spec:x,uri:g,name:m.name,description:m.description,image:m.images[0]}),!m.isOwnedBySelf&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(so.P,{spec:x,uri:g}),(0,I.jsx)(Za.ET,{uri:g,useDialog:y,initialState:f})]}),m.isOwnedBySelf&&(0,I.jsx)(eo.u,{spec:x,uri:g}),!S&&(0,I.jsx)(Ta.d,{spec:x,uri:g}),(0,I.jsx)(N,{position:{after:o},divider:"before",spec:x}),(0,I.jsx)(w.j,{position:{after:o},spec:x}),(null===(i=m.permissions)||void 0===i?void 0:i.canAdministratePermissions)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(oo.U,{spec:x,divider:"before",uri:g,isPrivate:b}),!S&&(0,I.jsx)(no.n,{uri:g,spec:x})]}),(null===(a=m.permissions)||void 0===a?void 0:a.canCancelMembership)&&(0,I.jsx)(io._,{spec:x,divider:"before",uri:g}),(0,I.jsx)(ro.w,{spec:x,uri:g}),(0,I.jsx)(ba.y,{uriToBeAdded:g,isInLibrary:!0,spec:x}),!S&&(0,I.jsx)(co.o,{spec:x,uris:[g],isPlaylist:!0}),(c!==j.oT.NO||d)&&(0,I.jsx)(aa.k,{uri:g,canPin:c,isPinned:d,type:W.c.PLAYLIST,spec:x}),(m.isOwnedBySelf||!b)&&(0,I.jsxs)(uo.h,{divider:"before",children:[(0,I.jsx)($a.m,{spec:x,uri:g,displayText:A.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:b}),(0,I.jsx)(ao.x,{spec:x,uri:g,type:W.c.PLAYLIST})]})]})})})),yo=u.memo((function(e){var t=e.reference,r=e.canPin,n=void 0===r?j.oT.NO:r,i=e.isPinned,a=void 0!==i&&i,o=t.uri,l=(0,P.o)(o).spec;return(0,I.jsx)(O.pZ,{value:"playlist",children:(0,I.jsxs)(h.W,{children:[(0,I.jsx)(N,{position:{after:t},divider:"before",spec:l}),(0,I.jsx)(w.j,{position:{after:t},spec:l}),n!==j.oT.NO&&(0,I.jsx)(aa.k,{uri:o,canPin:n,isPinned:a,type:W.c.PLAYLIST,spec:l})]})})})),fo=r(21746),go=function(){return(0,u.useContext)(fo.w).getCapabilities()};function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bo(e,t){var r=e.uri,a=e.isLoading,o=e.owner,s=e.pinned,d=(0,u.useContext)(fo.w),p=(0,u.useContext)(Ae.g).filter,y=go().canAddAudiobooks,g=[ie.fl.TRACKS,ie.fl.LOCAL_TRACKS,ie.fl.ALBUMS,ie.fl.EPISODES],m=y?[ie.fl.AUDIOBOOKS]:[];(0,u.useEffect)((function(){a&&d.resync(r)}),[d,r,a]);var b,v=(0,gn.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}).togglePlay,x=(0,mn.l_)(r),O=x.isPlaying,j=x.isActive,P=(0,f.wA)(),w=(0,T.s)(),S=[],D=(0,u.useCallback)(function(){var e=(0,l.A)(c().mark((function e(i){var a,o,l,s,u,d,p,y,f,g,m,b;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=i[ie.fl.TRACKS],l=void 0===o?[]:o,s=i[ie.fl.LOCAL_TRACKS],u=void 0===s?[]:s,d=i[ie.fl.ALBUMS],p=void 0===d?[]:d,y=i[ie.fl.EPISODES],f=void 0===y?[]:y,g=i[ie.fl.AUDIOBOOKS],m=void 0===g?[]:g,b=[].concat((0,n.A)(l),(0,n.A)(u),(0,n.A)(p),(0,n.A)(f),(0,n.A)(m)),P((0,Ka.io)(r,b)),w.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:null!==(a=b.at(0))&&void 0!==a?a:"",playlist:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,w,t,r]);e.canAddTo&&(S=e.isEmpty?[].concat(m,g):e.isBooklist?m:g,b=D);var C,R=(0,u.useCallback)((function(){P((0,dn.O)(r))}),[P,r]),k=(0,cn.c0)(r),E=a&&!e.name;C=k?(0,I.jsx)(yo,{reference:e,canPin:e.canPin,isPinned:s}):E?(0,I.jsx)(h.W,{children:(0,I.jsx)(Za.ET,{uri:r,initialState:!0})}):(0,I.jsx)(po,{reference:e,canPin:e.canPin,isPinned:s,useDialogForUnfollow:!0,isInLibrary:!0});var L=(0,I.jsx)(yn.M,{uri:r,size:"xsmall",className:kn.A.icon,as:"span"}),N=(0,cn.c0)(r)?(0,I.jsx)(I.Fragment,{children:A.Ru.get("ylx.clicktoplay")}):(o.uri,(0,I.jsx)(fn.M,{searchWords:[p.trim()],textToHighlight:o.name}));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({openDeleteDialog:R,togglePlay:e.isBooklist?void 0:v,isPlaying:O,isActive:j,menu:C,downloadButton:L,subtitleText:N,allowedDropTargetDropOnMimeTypes:S,onDropTargetDropOn:b},Pa({uri:r}))}var vo=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l=t.uri,s=t.images,c=t.folderDepth,u=t.name,d=t.type,p=t.pinned,y=t.addedAt,f=t.lastPlayedAt,g=t.color,m=t.canReorder,b=bo(t,i),v=b.openDeleteDialog,x=b.togglePlay,h=b.isPlaying,O=b.isActive,j=b.menu,P=b.downloadButton,w=b.subtitleText,S=b.allowedDropTargetDropOnMimeTypes,A=b.onDropTargetDropOn,D=b.animateState,C=b.animateClassName,T=(0,I.jsx)(Ti,{title:u,type:d,images:s,color:g,animateState:D,animateClassName:C});return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(Bi,{RowVariantComponent:n,uri:l,folderDepth:c,cover:T,name:u,subtitle:w,alt:u,dragLabel:u,menu:j,canReorder:m,allowedDropTargetDropOnMimeTypes:S,onDropTargetDropOn:A,togglePlay:x,openDeleteDialog:v,addedAt:y,lastPlayedAt:f,isPlaying:h,isActive:O,isPinned:p,shouldShowType:r,type:d,downloadButton:P,spec:i,playInsteadOfNavigating:(0,cn.c0)(l),nrValidItems:a,index:o})})},xo=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.spec,i=e.index,a=t.uri,o=t.images,l=t.name,s=t.type,c=t.pinned,u=t.color,d=t.canReorder,p=bo(t,n),y=p.togglePlay,f=p.menu,g=p.downloadButton,m=p.subtitleText,b=p.onDropTargetDropOn,v=p.allowedDropTargetDropOnMimeTypes,x=p.openDeleteDialog,h=p.isPlaying,O=p.isActive,j=p.animateState,P=p.animateClassName,w=(0,I.jsx)(Ri,{title:l,type:s,images:o,uri:a,togglePlay:y,color:u,spec:n,isActive:O,isPlaying:h});return(0,I.jsx)(xi,{uri:a,name:l,subtitle:m,menu:f,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:v,onDropTargetDropOn:b,cover:w,togglePlay:y,isPinned:c,shouldShowType:r,type:s,downloadButton:g,openDeleteDialog:x,isPlaying:h,isActive:O,spec:n,playInsteadOfNavigating:(0,cn.c0)(a),index:i,animateState:j,animateClassName:P})},ho=r(48389),Oo=r(99010),jo=r(16007),Po=r(52429),wo=u.memo((function(e){var t=e.uri,r=e.canPin,n=void 0===r?j.oT.NO:r,i=e.isPinned,a=void 0!==i&&i,o=e.canRemove,l=void 0!==o&&o,s=(0,P.o)(t).spec;return(0,I.jsx)(O.pZ,{value:"audiobook",children:(0,I.jsxs)(h.W,{children:[l&&(0,I.jsx)(Po.p,{uri:t,removeLabel:A.Ru.get("contextmenu.remove-from-library")}),n!==j.oT.NO&&(0,I.jsx)(aa.k,{uri:t,canPin:n,isPinned:a,type:W.c.PRE_RELEASE_BOOK,spec:s}),(0,I.jsx)($a.m,{uri:t,spec:s,displayText:A.Ru.get("context-menu.copy-book-link")}),(0,I.jsx)(jo.q,{spec:s,divider:"before",uri:t})]})})}));function So(e){var t,r=e.uri,n=e.canPin,i=e.pinned,a=e.type,o=(0,u.useContext)(Ae.g).filter,l=(0,f.wA)(),s=(0,u.useCallback)((function(){l((0,dn.aw)(r,!0))}),[l,r]),c="";if(a===W.c.PRE_RELEASE_ALBUM){var d,p,y=null===(d=e.artists)||void 0===d?void 0:d.at(0);c=null!==(p=null==y?void 0:y.name)&&void 0!==p?p:"",t=(0,I.jsx)(Oo.P,{uri:r,artistUri:null==y?void 0:y.uri,canPin:n,isPinned:i,canRemove:!0})}else c=e.authorName,t=(0,I.jsx)(wo,{uri:r,canPin:n,isPinned:i,canRemove:!0});return{openDeleteDialog:s,menu:t,subtitleText:(0,I.jsx)(fn.M,{searchWords:[o.trim()],textToHighlight:c})}}var Ao=function(e){var t=e.libraryItem,r=e.shouldShowType,n=void 0!==r&&r,i=e.RowVariantComponent,a=e.spec,o=e.nrValidItems,l=e.index,s=t.uri,c=t.images,u=t.name,d=t.pinned,p=t.type,y=t.addedAt,f=t.lastPlayedAt,g=t.color,m=So(t),b=m.openDeleteDialog,v=m.menu,x=m.subtitleText,h=(0,I.jsx)(Ti,{title:u,type:p,images:c,color:g});return(0,I.jsx)(Bi,{RowVariantComponent:i,uri:s,cover:h,name:u,subtitle:x,alt:u,type:p,dragLabel:u,menu:v,openDeleteDialog:b,addedAt:y,lastPlayedAt:f,isPinned:d,isPlaying:!1,isActive:!1,shouldShowType:n,spec:a,nrValidItems:o,index:l,preReleaseIcon:(0,I.jsx)(ho.t,{size:"xsmall",className:kn.A.icon})})},Do=function(e){var t=e.libraryItem,r=e.shouldShowType,n=void 0!==r&&r,i=e.spec,a=e.index,o=t.uri,l=t.images,s=t.name,c=t.pinned,u=t.type,d=t.color,p=So(t),y=p.menu,f=p.subtitleText,g=p.openDeleteDialog,m=(0,I.jsx)(Ri,{title:s,type:u,images:l,uri:o,color:d,spec:i,isActive:!1,isPlaying:!1});return(0,I.jsx)(xi,{uri:o,name:s,subtitle:f,menu:y,dragLabel:s,cover:m,type:u,isPinned:c,shouldShowType:n,openDeleteDialog:g,isPlaying:!1,isActive:!1,spec:i,index:a,preReleaseIcon:(0,I.jsx)(ho.t,{size:"xsmall",className:kn.A.icon})})},Co=r(26684);function To(e){var t=e.uri,r=e.publisher,n=(0,u.useContext)(Ae.g).filter,i=(0,f.wA)(),a=(0,gn.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}).togglePlay,o=(0,mn.l_)(t);return{isPlaying:o.isPlaying,isActive:o.isActive,openDeleteDialog:(0,u.useCallback)((function(){i((0,dn.aw)(t))}),[i,t]),togglePlay:a,menu:(0,I.jsx)(Co.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,I.jsx)(yn.M,{uri:t,size:"xsmall",className:kn.A.icon,as:"span"}),subtitleText:(0,I.jsx)(fn.M,{autoEscape:!0,searchWords:[n.trim()],textToHighlight:r})}}var Ro=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l=t.uri,s=t.images,c=t.name,u=t.type,d=t.addedAt,p=t.lastPlayedAt,y=t.pinned,f=t.color,g=To(t),m=g.isPlaying,b=g.isActive,v=g.openDeleteDialog,x=g.togglePlay,h=g.menu,O=g.downloadButton,j=g.subtitleText,P=(0,I.jsx)(Ti,{title:c,type:u,images:s,color:f});return(0,I.jsx)(Bi,{RowVariantComponent:n,uri:l,cover:P,name:c,subtitle:j,alt:c,dragLabel:c,menu:h,togglePlay:x,openDeleteDialog:v,addedAt:d,lastPlayedAt:p,isPlaying:m,isActive:b,isPinned:y,shouldShowType:r,type:u,downloadButton:O,spec:i,nrValidItems:a,index:o})},Io=function(e){var t=e.libraryItem,r=e.shouldShowType,n=e.spec,i=e.index,a=t.uri,o=t.images,l=t.name,s=t.type,c=t.pinned,u=t.color,d=To(t),p=d.togglePlay,y=d.menu,f=d.downloadButton,g=d.subtitleText,m=d.openDeleteDialog,b=d.isPlaying,v=d.isActive,x=(0,I.jsx)(Ri,{title:l,type:s,images:o,uri:a,togglePlay:p,color:u,spec:n,isActive:v,isPlaying:b});return(0,I.jsx)(xi,{uri:a,name:l,subtitle:g,menu:y,dragLabel:l,cover:x,togglePlay:p,isPinned:c,shouldShowType:r,type:s,downloadButton:f,openDeleteDialog:m,isPlaying:b,isActive:v,spec:n,index:i})};function ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Eo=[ie.fl.EPISODES];function Lo(e){var t=e.numberOfDownloadedEpisodes,r=(0,f.d4)(Ia.Ht).user,n=(0,xn.fH)(null==r?void 0:r.id,"your-episodes").toURI(),a=j.Xn,o=(0,gn.P)({uri:n},{featureIdentifier:"episode",referrerIdentifier:"your_library"}).togglePlay,l=(0,mn.l_)(n),s=l.isPlaying,c=l.isActive,d=(0,u.useContext)(z.Z),p=(0,u.useCallback)((function(e){var t=e[ie.fl.EPISODES],r=void 0===t?[]:t;null!=r&&r.length&&(null==d||d.add({uris:r}))}),[d]);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isPlaying:s,isActive:c,togglePlay:o,menu:(0,I.jsx)(Ra,{uri:a,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,I.jsx)(Ma.F,{size:"xsmall",className:kn.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:A.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:p,playbackUri:n,uri:a},Pa({uri:a}))}var No=function(e){var t=e.libraryItem,r=e.RowVariantComponent,n=e.spec,i=e.nrValidItems,a=e.index,o=t.images,l=t.name,s=t.type,c=t.pinned,u=t.lastPlayedAt,d=t.addedAt,p=t.color,y=Lo(t),f=y.isPlaying,g=y.isActive,m=y.togglePlay,b=y.menu,v=y.downloadButton,x=y.subtitleText,h=y.onDropTargetDropOn,O=y.playbackUri,j=y.uri,P=y.animateState,w=y.animateClassName,S=(0,I.jsx)(Ti,{title:l,type:s,images:o,color:p,animateState:P,animateClassName:w});return(0,I.jsx)(Bi,{RowVariantComponent:r,uri:j,cover:S,name:l,subtitle:x,alt:l,dragLabel:l,menu:b,allowedDropTargetDropOnMimeTypes:Eo,onDropTargetDropOn:h,togglePlay:m,addedAt:d,lastPlayedAt:u,isPlaying:f,isActive:g,isPinned:c,shouldShowType:!1,type:s,downloadButton:v,playbackUri:O,spec:n,nrValidItems:i,index:a})},Fo=function(e){var t=e.libraryItem,r=e.spec,n=e.index,i=t.images,a=t.name,o=t.type,l=t.pinned,s=t.color,c=Lo(t),u=c.togglePlay,d=c.menu,p=c.downloadButton,y=c.subtitleText,f=c.onDropTargetDropOn,g=c.playbackUri,m=c.uri,b=c.isPlaying,v=c.isActive,x=c.animateState,h=c.animateClassName,O=(0,I.jsx)(Ri,{title:a,type:o,images:i,uri:m,togglePlay:u,color:s,spec:r,isActive:v,isPlaying:b});return(0,I.jsx)(xi,{uri:m,name:a,subtitle:y,menu:d,dragLabel:a,allowedDropTargetDropOnMimeTypes:Eo,onDropTargetDropOn:f,cover:O,togglePlay:u,playbackUri:g,downloadButton:p,isPinned:l,shouldShowType:!1,type:o,isPlaying:b,isActive:v,spec:r,index:n,animateState:x,animateClassName:h})};function Mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Uo=(0,me.g)(W.c),_o=(0,u.memo)((function(e){var t=e.item,r=e.primaryFilter,n=e.spec,i=e.index,a={shouldShowType:!(0,cn.c0)(t.uri)&&ii(t.type)!==r,spec:n,index:i},o=(0,b.NC)(ge.lDH),l=(0,b.NC)(ge.H8e);switch(t.type){case W.c.FOLDER:return(0,I.jsx)(Ca,Bo({libraryItem:t},a));case W.c.ALBUM:return(0,I.jsx)(zi,Bo({libraryItem:t},a));case W.c.ARTIST:return(0,I.jsx)(Ki,Bo({libraryItem:t},a));case W.c.AUDIOBOOK:return(0,I.jsx)(qi,Bo({libraryItem:t},a));case W.c.SHOW:return(0,I.jsx)(Io,Bo({libraryItem:t},a));case W.c.PLAYLIST:return(0,I.jsx)(xo,Bo({libraryItem:t},a));case W.c.LIKED_SONGS:return(0,I.jsx)(Fa,Bo({libraryItem:t},a));case W.c.YOUR_EPISODES:return(0,I.jsx)(Fo,Bo({libraryItem:t},a));case W.c.LOCAL_FILES:return(0,I.jsx)(Wa,Bo({libraryItem:t},a));case W.c.PRE_RELEASE_ALBUM:return o?(0,I.jsx)(Do,Bo({libraryItem:t},a)):null;case W.c.PRE_RELEASE_BOOK:return l?(0,I.jsx)(Do,Bo({libraryItem:t},a)):null;default:(0,ft.d)(t)}})),Vo=function(e){var t,r=e.getItems,n=e.scrollNodeRef,i=e.primaryFilter,a=e.nrValidItems,o=e.spec,l=un().gridScale,s=(0,nn.s1)(nn.yV.YLX,l),c=(0,u.useRef)({}),d=function(){var e=un().gridScale;return!!(0,b.NC)(ge.AEN)&&e<.8}(),p=(0,u.useCallback)((function(e){return(0,I.jsx)(Ya,{index:e,type:Uo(i)?i:void 0},e)}),[i]),y=(0,u.useCallback)((function(e,t){return r(e,t).map((function(t,r){return t?(0,I.jsx)(_o,{item:t,spec:o,primaryFilter:i,index:e+r},t.uri):p("".concat(e+r))}))}),[r,i,p,o]),f=(0,u.useCallback)((function(e,t){c.current={numColumns:e,rowHeight:t}}),[]);return(0,I.jsx)(rn.x,{config:s,children:(0,I.jsx)(li,{isCompact:d,children:(0,I.jsx)(sn.R,{firstInteractiveIsWrapper:!0,"aria-label":A.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(null!==(t=c.current.numColumns)&&void 0!==t?t:1)),"aria-colcount":c.current.numColumns,children:(0,I.jsx)(ln,{renderItems:y,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:n,onGridResize:f})})})})},Ho=r(95994),zo=r(84556);const Wo="main-yourLibraryX-header",Xo="ILEuCdEH9mglJaM4gKuf",Yo="main-yourLibraryX-collapseButtonWrapper",Ko="main-yourLibraryX-headerContent",Zo="iYP0xuQiJCgi7gx1jUPJ",Go="main-yourLibraryX-collapseButton",Jo="main-yourLibraryX-button",qo="af749NDLYTDK_8LinKWD",Qo="nGWhztVvLY1BInXjcWYa",$o="oZT8iKL42zhLAm_zE5F5",el="MdDY8fQ_j94mQZy7ZVXf",tl="uNReR011bI8ML42Pgveg";var rl=function(e){switch(e){case V.fX.EXPANDED:return"expanded";case V.fX.COLLAPSED:return"collapsed";case V.fX.DEFAULT:return"default";default:throw(0,ft.k)(e)}},nl=function(e){var t=e.folderUri,r=e.dropTargetClassName,n=e.spec,i=(0,V.$)(),a=i.isCollapsed,o=i.ylxSidebarState,l=i.setYlxSidebarState,s=i.lastUncollapsedYlxSidebarState,c=(0,T.s)(),d=(0,u.useCallback)((function(){var e=o===V.fX.COLLAPSED?s:V.fX.COLLAPSED;l(e),c.logInteraction(n.hitToggleState({stateBeforeToggle:rl(o),stateAfterToggle:rl(e)}))}),[o,s,l,c,n]),y=a?Ho.M:zo.A;return(0,I.jsx)(It.Zp,{label:a?A.Ru.get("web-player.your-library-x.expand-your-library"):A.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,I.jsx)(Tt.H,{"aria-label":a?A.Ru.get("web-player.your-library-x.expand-your-library"):A.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:d,className:p()(Yo,Jo,r),condensed:!0,iconLeading:t||a?void 0:y,iconOnly:t||a?y:void 0,children:!t&&!a&&A.Ru.get("web-player.your-library-x.your-library")})})},il=r(43757),al=r(80208),ol=function(e){var t=e.dropTargetClassName,r=e.spec,n=(0,V.$)(),i=n.ylxSidebarState,a=n.setYlxSidebarState,o=i===V.fX.DEFAULT,l=(0,T.s)();return(0,I.jsx)(It.Zp,{label:o?A.Ru.get("web-player.your-library-x.show-more"):A.Ru.get("web-player.your-library-x.show-less"),children:(0,I.jsx)(Tt.H,{className:p()(Jo,Qo,t),iconOnly:o?il.h:al.G,"aria-label":o?A.Ru.get("web-player.your-library-x.enlarge-your-library"):A.Ru.get("web-player.your-library-x.reduce-your-library"),onClick:function(){a(o?V.fX.EXPANDED:V.fX.DEFAULT),l.logInteraction(r.hitToggleState({stateBeforeToggle:o?"default":"expanded",stateAfterToggle:o?"expanded":"default"}))},size:"small"})})},ll=r(60009),sl=r(60828),cl=function(e){var t=e.folderMenu,r=e.folderName,n=e.dropTargetClassName;return(0,I.jsx)(sl.b,{menu:t,children:(0,I.jsx)("span",{children:(0,I.jsx)(It.Zp,{label:A.Ru.get("more.label.context",r),children:(0,I.jsx)(Tt.H,{className:p()(Jo,Qo,n),iconOnly:ll.x,"aria-haspopup":"menu","aria-label":A.Ru.get("more.label.context",r),size:"small"})})})})},ul=r(28209),dl=r(10573),pl=function(e){var t=e.dropTargetClassName,r=e.spec,n=(0,tt.t)(),i=n.isGridView,a=n.setItemsView,o=(0,T.s)();return(0,I.jsx)(It.Zp,{label:i?A.Ru.get("web-player.your-library-x.list-view"):A.Ru.get("web-player.your-library-x.grid-view"),children:(0,I.jsx)(Tt.H,{className:p()(Jo,t),iconOnly:i?ul.N:dl.D,"aria-label":i?A.Ru.get("web-player.your-library-x.list-view"):A.Ru.get("web-player.your-library-x.grid-view"),onClick:function(){a(i?tt.X.LIST:tt.X.GRID),o.logInteraction(r.hitToggleState({stateBeforeToggle:i?"grid":"list",stateAfterToggle:i?"list":"grid"}))},size:"small"})})},yl=r(53980);var fl=r(29318),gl=r(70548),ml=r(93662),bl=function(e){var t=e.folderUri,r=e.spec,n=(0,C.A)().createPlaylist,i=(0,wa.Z)().createFolder,a=(0,T.s)(),o=(0,Le.V)(),l=t?{after:{uri:t}}:{before:"start"};return(0,I.jsxs)(h.W,{children:[(0,I.jsx)(D.D,{onClick:function(){n(void 0,l),a.logInteraction(r.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,I.jsx)(S.u,{size:"small"}),children:A.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!o&&(0,I.jsx)(D.D,{onClick:function(){i(A.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(r.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,I.jsx)(ml.h,{size:"small"}),children:A.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},vl=["className","dropPosition"];function xl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ol=function(e){var t=e.className,r=void 0===t?"":t,o=e.folderUri,l=e.tooltipPlacement,s=e.spec,c=A.Ru.get("web-player.your-library-x.create.button-label"),d=(0,T.s)(),y=go().canAddAudiobooks,f=(0,C.A)(),g=f.createPlaylistFromAlbum,m=f.createPlaylistFromTracks,b=f.createPlaylistFromPlaylist,v=(0,oe.A)({allowedMimeTypesByDropPosition:(0,i.A)({},ae.Nz.ON,[ie.fl.TRACKS,ie.fl.EPISODES,ie.fl.ALBUMS,ie.fl.PLAYLISTS_V2].concat((0,n.A)(y?[ie.fl.AUDIOBOOKS]:[]))),onDrop:(0,u.useCallback)((function(e){var t=e[ie.fl.TRACKS],r=void 0===t?[]:t,i=e[ie.fl.LOCAL_TRACKS],a=void 0===i?[]:i,l=e[ie.fl.EPISODES],s=void 0===l?[]:l,c=e[ie.fl.AUDIOBOOKS],u=void 0===c?[]:c,d=e[ie.fl.ALBUMS],p=void 0===d?[]:d,y=e[ie.fl.PLAYLISTS_V2],f=void 0===y?[]:y,v=o?{after:{uri:o}}:{before:"start"},x=[].concat((0,n.A)(r),(0,n.A)(a),(0,n.A)(s));u.length>0?m(u,v):x.length?m(x,v):p.length>0?g(p[0],v):f.length>0&&b(f[0],v)}),[g,b,m,o])}),x=v.className,h=v.dropPosition,O=(0,a.A)(v,vl);return(0,I.jsx)(gl.t,{renderInline:!0,menu:(0,I.jsx)(bl,{folderUri:o,spec:s.createMenuFactory()}),preventScrollingWhileOpen:!1,children:function(e,t,n){return(0,I.jsx)(It.Zp,{label:c,placement:l,children:(0,I.jsx)(Tt.H,hl({ref:n,iconOnly:fl.u,className:p()(r,x,(0,i.A)({},Mr,h===ae.Nz.ON)),"aria-label":c,onClick:function(e){t(e),d.logInteraction(s.hitUiReveal())},size:"small"},O))})}})},jl=r(58618),Pl=["dropPosition","className"];function wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Al=function(e){var t,r=e.handleNavigateBack,n=Jn({dropTargetUri:e.parentFolderUri,spec:e.spec}).handleDropBeforeOrAfterRootlistItem,o=(0,oe.A)({allowedMimeTypesByDropPosition:(0,i.A)({},ae.Nz.ON,Ve),onDrop:(t=(0,l.A)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t,ae.Nz.BEFORE);case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onLongDragOver:r}),s=o.dropPosition,u=o.className,d=(0,a.A)(o,Pl);return(0,I.jsx)(It.Zp,{label:A.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,I.jsx)(Tt.H,Sl({className:p()(Jo,qo,u,(0,i.A)({},Mr,s===ae.Nz.ON)),"aria-label":A.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:r,iconOnly:jl.g,size:"small"},d))})},Dl=(0,u.forwardRef)((function(e,t){var r=e.folderUri,n=e.folderName,i=e.folderMenu,a=e.onRename,o=e.spec,l=e.className,s=(0,mn.l_)(null!=r?r:"not-a-folder").isActive,c=(0,f.wA)(),d=(0,T.s)(),y=(0,u.useCallback)((function(){c((0,dn.O2)(n,a)),d.logInteraction(o.hitRenameFolder({uri:r}))}),[c,n,r,d,a,o]);return(0,I.jsx)(It.Zp,{label:n,showDelay:It.uF,children:(0,I.jsx)("div",{className:p()(el,l),children:(0,I.jsx)(x.h,{menu:i,children:(0,I.jsx)(Tt.H,{"aria-label":n,onClick:y,size:"small",condensed:!0,className:p()(Jo),ref:t,children:(0,I.jsx)(Ie.E,{variant:"bodyMediumBold",semanticColor:s?"textBrightAccent":void 0,className:tl,children:n})})})})})})),Cl=r(37742),Tl=r(31710),Rl=r(25990);const Il="fJrnaZd0QWm65978IgD2",kl="yCpl0fAaEYj7E8F_Oabw";var El=function(){var e,t,r,n,i,a,l=(e=(0,u.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),t=(0,o.A)(e,2),r=t[0],n=t[1],i=Tl.I.UPDATE_TOTAL_PROGRESS,a=(0,u.useCallback)((function(e){return n(e.data.progress)}),[]),(0,Rl.b)(i,a),r),s=l.syncing,c=l.percentage,d=l.currentItem,p=l.totalItems;return s?(0,I.jsxs)("div",{className:Il,children:[(0,I.jsxs)("div",{className:kl,children:[(0,I.jsx)(Ie.E,{variant:"bodySmallBold",semanticColor:"textBase",children:A.Ru.get("web-player.your-library-x.download-progress-title")}),(0,I.jsx)(Ie.E,{variant:"bodySmallBold",semanticColor:"textBase",children:A.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",d,p)})]}),(0,I.jsx)(Cl.z,{value:c})]}):null},Ll=function(e){var t=e.parentDropTargetClassName,r=e.isLibraryCompletelyEmpty,n=e.folderUri,a=e.folderName,o=e.spec,l=(0,V.$)(),s=l.isCollapsed,c=l.ylxSidebarState,d=l.canExpand,y=(0,wa.Z)().renameFolder,f=(0,u.useContext)(Ge).popFolder,g=(0,u.useCallback)((function(){n&&y({uri:n},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[n,y]),v=(0,u.useCallback)((function(){f()}),[f]),x=n?(0,I.jsx)(va,{reference:{uri:n},name:a,onRename:g,onDeleteCallback:v}):null,h=Xe().dropOriginIsYLX,O=!s&&n&&void 0!==a,j=(0,u.useRef)(null),P=(0,u.useRef)(null),w=(0,u.useRef)(null);!function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];var o=(0,m.U0)((function(){if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";var r=t.current,n=r.scrollWidth>r.offsetWidth;e.current.style.display=n?"none":"block"}else e.current.style.display="block"}),[i]);(0,u.useLayoutEffect)(o,[o]),(0,wi.w)({refOrElement:r,observeOnly:"width",onResize:o})}(w,(0,u.useMemo)((function(){return{get current(){var e,t;return(null===(e=P.current)||void 0===e?void 0:e.firstElementChild)instanceof HTMLElement?null===(t=P.current)||void 0===t?void 0:t.firstElementChild:null}}}),[]),j,a,O);var S=(0,b.NC)(ge.AEN),A=(0,yl.A)(),D=!s||r&&s;return(0,I.jsxs)("header",{className:p()(Wo,(0,i.A)((0,i.A)({},Xo,A),$o,s)),ref:j,children:[!s&&(0,I.jsx)(El,{}),(0,I.jsxs)("div",{className:p()(Ko,(0,i.A)({},Zo,s)),children:[(0,I.jsxs)("div",{className:p()(Go,(0,i.A)({},Zo,s)),children:[(0,I.jsx)(nl,{folderUri:n,dropTargetClassName:t,spec:o.toggleCollapsedModeButtonFactory({identifier:""})}),n&&(0,I.jsx)(Al,{handleNavigateBack:v,parentFolderUri:n,spec:o.folderBackButtonFactory()}),O&&(0,I.jsx)(Dl,{folderUri:n,folderName:a,folderMenu:x,onRename:g,spec:o.folderTitleFactory(),className:h?t:void 0,ref:P},n)]}),D&&(0,I.jsx)("span",{ref:w,children:(0,I.jsx)(Ol,{className:p()(Jo,Qo),folderUri:n,tooltipPlacement:s?"right":void 0,spec:o.createMenuButtonFactory()})}),n&&!s&&(0,I.jsx)(cl,{folderName:a,folderMenu:x,dropTargetClassName:t}),c===V.fX.EXPANDED&&!S&&(0,I.jsx)(pl,{dropTargetClassName:t,spec:o.viewDensityToggleFactory({identifier:""})}),(c===V.fX.DEFAULT&&d||c===V.fX.EXPANDED)&&(0,I.jsx)(ol,{dropTargetClassName:t,spec:o.toggleExpandedModeButtonFactory({identifier:""})})]})]})},Nl=r(95147),Fl=r(41861),Ml=r(21560),Bl=r(49674),Ul=function(e){var t=e.date;return(0,I.jsx)(Ie.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Or,children:t&&A.Ru.formatRelativeDate(new Date(t),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})})};function _l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hl=function(e){var t,r=e.handleNavigate,n=(0,I.jsx)(Hn,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:r,playbackUri:e.playbackUri}),i=null!==(t=e.expandFolderButton)&&void 0!==t?t:e.isPlaying&&(0,I.jsx)(Pn,{}),a=(0,I.jsx)(En,{leading:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ai.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,I.jsxs)(I.Fragment,{children:[e.shouldShowType&&ni(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),o=e.logRightClick,l=(0,I.jsx)(x.h,{menu:e.menu,onShow:o,children:(0,I.jsx)(On.E,{uri:e.uri,trigger:On.l.OnMouseDown,children:(0,I.jsx)(Ml.v,{className:cr,media:e.cover,title:n,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:vn.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,cn.c0)(e.uri)?(0,I.jsx)(Sn.cW,{parentRef:e.parentRef,children:l}):l},zl=function(e){var t=e.handleNavigate,r=(0,I.jsx)(Hn,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),n=(0,I.jsx)(En,{leading:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ai.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,I.jsxs)(I.Fragment,{children:[e.shouldShowType&&ni(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),i=e.logRightClick;return(0,I.jsx)(Tn,Vl(Vl({},e),{},{title:r,subtitleSlot:n,parentRef:e.parentRef,children:(0,I.jsxs)("div",{children:[(0,I.jsx)(x.h,{menu:e.menu,onShow:i,children:(0,I.jsx)(On.E,{uri:e.uri,trigger:On.l.OnMouseDown,children:(0,I.jsx)(Ml.v,{className:p()(cr,dr),media:e.cover,id:e.uri,padding:vn.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,I.jsxs)("span",{className:Dr,children:[r," ",n]})]})}))},Wl=function(e){var t=(0,u.useRef)(null),r=e.logRightClick;return(0,I.jsx)(x.h,{menu:e.menu,onShow:r,children:(0,I.jsxs)("div",{className:hr,ref:t,children:[(0,I.jsx)(Hl,Vl(Vl({},e),{},{parentRef:t})),(0,I.jsx)(Ul,{date:e.addedAt}),(0,I.jsx)(Ul,{date:e.lastPlayedAt})]})})},Xl=function(e){var t,r=e.handleNavigate,n=(0,I.jsxs)("div",{className:wr,children:[(0,I.jsx)(Hn,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:r,playbackUri:e.playbackUri}),e.shouldShowType&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Bl.v,{children:"•"}),(0,I.jsx)(Bl.v,{lineClamp:1,children:ni(e.type)})]}),(!e.shouldShowType&&e.type===W.c.ALBUM||(0,cn.c0)(e.uri))&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Bl.v,{children:"•"}),(0,I.jsx)(En,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,I.jsx)(ai.g,{pinned:e.isPinned}),a=null!==(t=e.expandFolderButton)&&void 0!==t?t:e.isPlaying?(0,I.jsx)(Pn,{iconSize:"xsmall"}):(0,I.jsxs)(I.Fragment,{children:[e.downloadButton&&(0,I.jsx)("div",{className:yr,children:e.downloadButton}),e.preReleaseIcon&&(0,I.jsx)("div",{className:yr,children:e.preReleaseIcon}),e.lockedIcon&&(0,I.jsx)("div",{className:yr,children:e.lockedIcon})]}),o=e.logRightClick;return(0,I.jsx)(x.h,{menu:e.menu,onShow:o,children:(0,I.jsx)(On.E,{uri:e.uri,trigger:On.l.OnMouseDown,children:(0,I.jsx)(Ml.v,{className:p()(cr,ur),title:n,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:"".concat(vn.vw," ").concat(vn.v4),onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},Yl=function(e){var t=e.logRightClick;return(0,I.jsx)(x.h,{menu:e.menu,onShow:t,children:(0,I.jsxs)("div",{className:hr,children:[(0,I.jsx)(Xl,Vl({},e)),(0,I.jsx)(Ul,{date:e.addedAt}),(0,I.jsx)(Ul,{date:e.lastPlayedAt})]})})},Kl=function(e){var t=e.height,r=e.isCompact,n=e.primaryFilter;return(0,I.jsx)(Ii.c,{className:p()((0,i.A)((0,i.A)((0,i.A)({},mr,!r),vr,r),br,n===W.c.ARTIST)),style:{height:t}})};function Zl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jl=(0,u.memo)((function(e){var t=e.item,r=e.primaryFilter,n=e.RowVariantComponent,i=e.spec,a=e.nrValidItems,o=e.index,l={shouldShowType:!(0,cn.c0)(t.uri)&&ii(t.type)!==r,RowVariantComponent:n,spec:i,nrValidItems:a,index:o},s=(0,b.NC)(ge.lDH),c=(0,b.NC)(ge.H8e);switch(t.type){case W.c.FOLDER:return(0,I.jsx)(Da,Gl({libraryItem:t},l));case W.c.ALBUM:return(0,I.jsx)(Hi,Gl({libraryItem:t},l));case W.c.ARTIST:return(0,I.jsx)(Yi,Gl({libraryItem:t},l));case W.c.AUDIOBOOK:return(0,I.jsx)(Ji,Gl({libraryItem:t},l));case W.c.SHOW:return(0,I.jsx)(Ro,Gl({libraryItem:t},l));case W.c.PLAYLIST:return(0,I.jsx)(vo,Gl({libraryItem:t},l));case W.c.LIKED_SONGS:return(0,I.jsx)(Na,Gl({libraryItem:t},l));case W.c.YOUR_EPISODES:return(0,I.jsx)(No,Gl({libraryItem:t},l));case W.c.LOCAL_FILES:return(0,I.jsx)(za,Gl({libraryItem:t},l));case W.c.PRE_RELEASE_ALBUM:return s?(0,I.jsx)(Ao,Gl({libraryItem:t},l)):null;case W.c.PRE_RELEASE_BOOK:return c?(0,I.jsx)(Ao,Gl({libraryItem:t},l)):null;default:(0,ft.d)(t)}})),ql=function(e){var t=e.getItems,r=e.scrollNodeRef,n=e.primaryFilter,i=e.nrValidItems,a=e.spec,o=(0,V.vW)(),l=nt(),s=l.rowHeight,c=l.libraryRowMode===rt.COMPACT,d=function(e,t){switch(e){case V.fX.COLLAPSED:return zl;case V.fX.DEFAULT:return t?Xl:Hl;case V.fX.EXPANDED:return t?Yl:Wl;default:(0,ft.d)(e)}}(o,c),p=(0,u.useCallback)((function(e,t){return(0,I.jsx)(Kl,{height:e,isCompact:c,primaryFilter:n},t)}),[c,n]),y=(0,u.useCallback)((function(e,r){return t(e,r).map((function(t,r){return t?(0,I.jsx)(Jl,{item:t,spec:a,RowVariantComponent:d,primaryFilter:n,nrValidItems:i,index:e+r},t.uri):p("".concat(s,"px"),"".concat(e+r))}))}),[d,t,n,p,s,a,i]);return(0,I.jsx)(Fl.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":A.Ru.get("web-player.your-library-x.your-library"),children:(0,I.jsx)(Nl.L,{renderRows:y,nrRows:i,rowHeight:s,scrollNodeRef:r,renderPlaceholder:p})})},Ql=r(77700),$l=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,Ke.x)("onboarding-dismissed:ylx-playlist-ordering",!1),n=(0,o.A)(r,2),i=n[0],a=n[1],l=(0,Ke.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),s=(0,o.A)(l,2),c=s[0],d=s[1],p=(0,u.useState)(!1),y=(0,o.A)(p,2),f=y[0],g=y[1],m=Xe().dropOriginIsYLX,b=(0,u.useContext)(se.O_).draggingIsInProgress;(0,u.useEffect)((function(){b&&m&&g(!0)}),[b,m]);var v=(0,u.useCallback)((function(){a(!0),g(!1),d(c+1)}),[c,d,a]);return{show:e&&c<3&&(!i||f)&&(t||f),onHide:v}},es=r(8143),ts=r(19006),rs=r(88728);const ns="cZ3IJprhLYLVtLoxVtDe",is="C8nlESBb6d0huyAhMq2v",as="yclq4HDmRA_euiUYwB9O";var os=function(e){var t,r,n=e.title,i=e.bodyText,a=e.children,l=e.root,s=e.show,c=e.childrenWrapperClassName,d=e.onHide,p=(0,u.useState)(null),y=(0,o.A)(p,2),f=y[0],g=y[1],m=(0,u.useState)(null),v=(0,o.A)(m,2),x=v[0],h=v[1],O=(0,b.NC)(ge.zJD),j=(0,u.useCallback)((function(){d()}),[d]);(0,u.useEffect)((function(){if(!s)return function(){};var e=function(e){"Escape"===e.key&&j()};return window.addEventListener("keydown",e,!0),function(){window.removeEventListener("keydown",e,!0)}}),[j,x,s]);var P=null==f?void 0:f.getBoundingClientRect();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{ref:g,className:c,children:a}),P&&s&&O&&(0,es.createPortal)((0,I.jsx)("div",{className:ns,style:{top:null!==(t=null==P?void 0:P.top)&&void 0!==t?t:0,left:null!==(r=null==P?void 0:P.left)&&void 0!==r?r:0,width:null==P?void 0:P.width,height:null==P?void 0:P.height},ref:h,children:(0,I.jsxs)(ts.A,{popoverTitle:n,arrow:ts.A.left,colorSet:"announcement",className:is,children:[(0,I.jsx)(Ie.E,{as:"p",dangerouslySetInnerHTML:{__html:i||""}}),(0,I.jsx)(Tt.H,{size:"small",onClick:j,iconOnly:rs.M,"aria-label":A.Ru.get("close"),className:as})]})}),l||document.body)]})},ls=r(65791),ss=r(35248),cs=r(20347),us=r(17739),ds=function(e,t,r){var n,i=t.closest('li[role="presentation"]'),a=null===(n=e.parentElement)||void 0===n?void 0:n.querySelectorAll('ul[role="menu"]');if(r===us.O.UP){var o,l=null==a?void 0:a[a.length-1],s=e.previousElementSibling,c=null==i||null===(o=i.previousElementSibling)||void 0===o?void 0:o.previousElementSibling;if(t instanceof HTMLUListElement||!c){if(s&&s instanceof HTMLUListElement)return s;if(l&&l instanceof HTMLUListElement)return l}}else{if(!(null==i?void 0:i.nextElementSibling)){var u=e.nextElementSibling;return u&&u instanceof HTMLUListElement?u:null==a?void 0:a[0]}}};const ps="GvHaMehoYEIaLhHafB4F",ys="main-yourLibraryX-librarySortWrapper",fs="ijaSPbJ8wd3RNiyukjlh",gs="w0nWe_59HwsG7nQLoibF",ms="LbAtRPub21imosz1Xjht";var bs=[{itemsViewState:tt.X.LIST,compactModeState:rt.COMPACT},{itemsViewState:tt.X.LIST,compactModeState:rt.DEFAULT},{itemsViewState:tt.X.GRID,compactModeState:rt.DEFAULT}],vs=function(e,t,r){return Math.round((e+t)*r)/r},xs=function(e){return e.itemsViewState===tt.X.GRID?A.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===rt.COMPACT?A.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):A.Ru.get("web-player.your-library-x.sort-and-view-picker.list")},hs=function(e){var t=e.selectedSort,r=e.selectedView,n=e.onSortSelect,i=e.onViewSelect,a=e.sortOptions,o=e.spec,l=e.id,s=(0,T.s)(),c=(0,u.useCallback)((function(e){return e.itemsViewState===tt.X.GRID?(0,I.jsx)(dl.D,{size:"small"}):e.compactModeState===rt.COMPACT?(0,I.jsx)(ls.d,{size:"small"}):(0,I.jsx)(ul.N,{size:"small"})}),[]),d=un(),p=d.gridScale,y=d.setGridScale,f=function(e){var t=vs(e,.5,100);y(t),s.logInteraction(o.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},g=(0,u.useCallback)((function(e){y(e),s.logInteraction(o.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[s,y,o]),m=function(e){var t;return null==e||null===(t=e.parentElement)||void 0===t?void 0:t.querySelector("ul")},b=(0,u.useRef)(null);return(0,I.jsxs)("div",{id:l,className:fs,ref:b,children:[(0,I.jsxs)(h.W,{"aria-label":A.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:ds,getInitialFocusElement:m,children:[(0,I.jsx)(ss.y,{children:A.Ru.get("web-player.your-library-x.sort_by")}),a.map((function(e,r){var i=e.key,o=e.value;return(0,I.jsx)(D.D,{role:"menuitemradio","aria-checked":i===t.key,onClick:function(){return n(i,r)},divider:r===a.length-1?"after":void 0,autoClose:!1,children:o},i)}))]}),(0,I.jsxs)(h.W,{"aria-label":A.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:ds,getInitialFocusElement:m,children:[(0,I.jsx)(ss.y,{children:A.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),bs.map((function(e){var t=xs(e),n=e.itemsViewState===r.itemsViewState&&e.compactModeState===r.compactModeState;return(0,I.jsx)(D.D,{role:"menuitemradio","aria-checked":n,onClick:function(){return i(e)},leadingIcon:c(e),autoClose:!1,children:t},t)})),tt.X.GRID===r.itemsViewState&&(0,I.jsx)("li",{role:"presentation",children:(0,I.jsx)("div",{role:"menuitem",className:ms,children:(0,I.jsx)(cs.z2,{labelText:A.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:vs(p,-.5,100),max:1,step:.1,onDragStart:f,onDragMove:f,onDragEnd:f,onStepBackward:function(){return g(vs(p,-.1,10))},onStepForward:function(){return g(vs(p,.1,10))},forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})},Os=function(e){var t,r,n,i=e.sortOptions,a=e.selectedSort,l=e.onSortSelect,s=e.root,c=e.showReorderingOnboarding,d=e.scrollNodeRef,p=e.spec,y=(0,tt.t)(),f=y.itemsView,g=y.setItemsView,m=nt(),b=m.libraryRowMode,v=m.setLibraryRowMode,x=(0,T.s)(),h=(0,u.useCallback)((function(){x.logInteraction(p.hitUiReveal())}),[x,p]),O=(0,u.useMemo)((function(){return f===tt.X.GRID?{itemsViewState:tt.X.GRID,compactModeState:rt.DEFAULT}:b===rt.COMPACT?{itemsViewState:tt.X.LIST,compactModeState:rt.COMPACT}:{itemsViewState:tt.X.LIST,compactModeState:rt.DEFAULT}}),[f,b]),j=(0,u.useCallback)((function(e){var t=p.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===tt.X.GRID?g(tt.X.GRID):e.compactModeState===rt.COMPACT?(t=p.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),g(tt.X.LIST),v(rt.COMPACT)):(t=p.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),g(tt.X.LIST),v(rt.DEFAULT)),x.logInteraction(t)}),[x,g,v,p]),P=(0,u.useRef)(null),w=(0,Ce.y)(d,"0px 0px 0px 0px",.75,P),S=(0,Ke.x)("sort-view-picker-onboarding-seen",!1),D=(0,o.A)(S,2),C=D[0],R=D[1],k=$l(C&&c,!w),E=k.show,L=k.onHide,N=(0,u.useCallback)((function(){h(),R(!0)}),[h,R]);return(0,I.jsx)(os,{bodyText:A.Ru.get("web-player.your-library-x.sort-and-view-picker.view-onboarding"),root:s,show:!C&&!w,childrenWrapperClassName:ys,onHide:function(){return R(!0)},children:(0,I.jsx)(os,{bodyText:A.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:s,show:E,childrenWrapperClassName:ys,onHide:L,children:(0,I.jsx)(sl.b,{menu:(0,I.jsx)(hs,{selectedSort:a,selectedView:{itemsViewState:null!==(t=O.itemsViewState)&&void 0!==t?t:tt.X.LIST,compactModeState:null!==(r=O.compactModeState)&&void 0!==r?r:rt.DEFAULT},sortOptions:i,onSortSelect:l,onViewSelect:j,spec:p,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,I.jsx)(Tt.H,{"aria-label":A.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",a.value,xs(O)),onClick:N,size:"small",iconTrailing:(n=O,n.itemsViewState===tt.X.GRID?dl.D:n.compactModeState===rt.COMPACT?ls.d:ul.N),ref:P,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,I.jsx)(Ie.E,{variant:"bodySmall",className:gs,children:a.value})})})})})},js=function(e){var t,r,n,i,a,o=e.sortOrders,l=e.activeSortOrderId,s=e.setActiveSortOrderId,c=e.root,d=e.showReorderingOnboarding,p=e.spec,y=e.scrollNodeRef,f=(0,u.useMemo)((function(){return p.sortMenuButtonFactory()}),[p]),g=(0,u.useMemo)((function(){return p.sortbyViewasMenuButtonFactory()}),[p]),m=(0,T.s)(),v=(0,it.t)(),x=null!==(t=o.find((function(e){return e.id===l})))&&void 0!==t?t:null==o?void 0:o.at(0),h=(0,u.useRef)(null),O=(0,b.NC)(ge.AEN),j=(0,u.useCallback)((function(e,t){s(e);var r=v.getSortOrderLabel(e);O?m.logInteraction(g.sortOptionFactory({identifier:r,position:t}).hitSort()):m.logInteraction(f.sortMenuFactory().sortOptionFactory({identifier:r,position:t}).hitSort())}),[v,m,s,g,f,O]),P=$l(d),w=P.show,S=P.onHide;return O?(0,I.jsx)(Os,{sortOptions:o.map((function(e){return{key:e.id,value:e.name}})),selectedSort:{key:null!==(i=null==x?void 0:x.id)&&void 0!==i?i:"",value:null!==(a=null==x?void 0:x.name)&&void 0!==a?a:""},onSortSelect:j,root:c,showReorderingOnboarding:d,scrollNodeRef:y,spec:g}):(0,I.jsx)("div",{className:ps,ref:h,children:(0,I.jsx)(os,{bodyText:A.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:c,show:w,childrenWrapperClassName:ys,onHide:S,children:(0,I.jsx)(Ql.g,{options:o.map((function(e){return{key:e.id,value:e.name}})),onClick:function(){m.logInteraction(f.hitUiReveal())},onSelect:j,selected:{key:null!==(r=null==x?void 0:x.id)&&void 0!==r?r:"",value:null!==(n=null==x?void 0:x.name)&&void 0!==n?n:""},heading:A.Ru.get("web-player.your-library-x.sort_by"),ariaLabel:A.Ru.get("web-player.your-library-x.sort_by")})})})},Ps=r(19008),ws=r(43724);var Ss=function(e){var t=e.clearOnEscapeInElementRef,r=e.primaryFilter,n=e.spec,i=(0,it.t)(),a=(0,T.s)(),o=function(e){switch(e){case W.c.PRE_RELEASE_ALBUM:case W.c.ALBUM:return A.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case W.c.ARTIST:return A.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case W.c.PLAYLIST:return A.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case W.c.SHOW:return A.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case W.c.PRE_RELEASE_BOOK:case W.c.AUDIOBOOK:return A.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return A.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return A.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,ft.k)(e)}}(r),l=(0,u.useCallback)((function(){return a.logInteraction(n.searchButtonFactory().hitUiReveal()),!0}),[a,n]),s=(0,u.useCallback)((function(){return a.logInteraction(n.textFilterFactory().keyStrokeClearFilter()),!0}),[a,n]);return(0,I.jsx)(Ps.S,{placeholder:o,clearOnEscapeInElementRef:t,debounceFilterChangeTimeout:null!=i&&i.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:l,onClear:s,useExpandCallback:function(e){(0,ws.f)(U.gO.FOCUS_YLX_TEXT_FILTER,e)}})};const As="main-yourLibraryX-libraryContainer",Ds="main-yourLibraryX-libraryFilter",Cs="iwhVJuPipY1lrQIjaA1k",Ts="main-yourLibraryX-libraryItemContainer",Rs="main-yourLibraryX-libraryRootlist",Is="sikBfynL1Y6I25nVpbAg",ks="KwShd3RdVrsX6dGLJNxT",Es="main-yourLibraryX-filters",Ls="qOtD4rsRpIMhQLCjJ4K3",Ns="RHRitk6QC3rvuG24RAdj",Fs="main-yourLibraryX-filterArea";var Ms=["dropPosition","className"],Bs=["offset","limit","items"];function Us(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Us(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Vs={items:[],totalLength:0},Hs=function(){return null},zs=function(){var e,t,r,s,d,f,h,O,P=(0,u.useContext)(Ae.g).filter,w=(0,u.useState)(null),S=(0,o.A)(w,2),A=S[0],D=S[1],C=function(e){var t=(0,u.useContext)(Ge),r=t.openedFolderUri,n=void 0===r?Ze:r,a=t.change,l=t.resetFolder,s=(0,u.useRef)(n),c=(0,Ke.x)("ylx-active-filter-ids",(0,i.A)({},n,[])),d=(0,o.A)(c,2),p=d[0],y=d[1],f=(0,u.useRef)(!0),g=(0,m.U0)((function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Set(e);a.has(t)?a.delete(t):a.add(t),f.current=r,y(Qe(Qe({},p),{},(0,i.A)({},n,Array.from(a))))}),[e,y,n]),b=(0,u.useCallback)((function(){return y(Qe(Qe({},p),{},(0,i.A)({},n,[])))}),[n,p,y]),v=(0,u.useCallback)((function(e){n&&l(),y(Qe(Qe({},p),{},(0,i.A)({},Ze,e?[e]:[])))}),[n,l,p,y]);return(0,u.useLayoutEffect)((function(){n!==s.current&&n!==Ze&&"PUSH"===a&&y(Qe(Qe({},p),{},(0,i.A)({},n,p[s.current]))),s.current=n}),[a,n,p,y]),{filtersPickedByUserRef:f,selectedFilterIds:p[n],resetFilterIds:b,resetAndToggleRootFilter:v,toggleFilterId:g}}(null!==(e=null==A||null===(t=A.selectedFilters)||void 0===t?void 0:t.map((function(e){return e.id})))&&void 0!==e?e:[]),R=C.filtersPickedByUserRef,k=C.selectedFilterIds,E=C.resetFilterIds,L=C.resetAndToggleRootFilter,N=C.toggleFilterId,M=function(e){var t=(0,it.t)().getContentsPrimaryFilterId(W.c.PLAYLIST),r=(0,u.useContext)(Ge).openedFolderUri,n=void 0===r?"":r,a=(0,Ke.x)("ylx-active-sort-order-by-filter-id",{}),l=(0,o.A)(a,2),s=l[0],c=l[1],d="".concat(n&&t?t:e);return{selectedSortOrderId:s[d],setSelectedSortOrderId:(0,u.useCallback)((function(e){c(bt(bt({},s),{},(0,i.A)({},d,e)))}),[d,s,c])}}(null==k?void 0:k[0]),G=M.selectedSortOrderId,J=M.setSelectedSortOrderId,q=(0,u.useRef)(null),$=(0,u.useRef)(null),ee=(0,u.useRef)(null),ue=function(){var e=(0,u.useContext)(Ye);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}().expandedFolders,de=(0,u.useContext)(Ge),pe=de.openedFolderUri,ye=de.resetFolder,fe=(0,De.p)(),me=(0,Y.P)(),be=(0,u.useContext)(z.Z),ve=(0,K.g)(),xe=(0,B.e)(),he=ct(),Oe=(0,u.useState)(!1),je=(0,o.A)(Oe,2),Pe=je[0],we=je[1],Re=(0,V.$)(),Ie=Re.isCollapsed,ke=Re.isExpanded,Ee=Re.setYlxSidebarState;!function(e){var t=(0,u.useContext)(z.Z),r=(0,V.$)(),n=r.isCollapsed,i=r.setYlxSidebarState,a=r.lastUncollapsedYlxSidebarState,o=(0,H.W)(),l=(0,u.useCallback)((function(){var e=n?a:V.fX.COLLAPSED;i(e)}),[n,a,i]),s=(0,u.useCallback)((function(){e(null),n&&i(a)}),[n,a,e,i]),c=(0,u.useCallback)((function(r){return function(){e(t.getContentsPrimaryFilterId(r)),n&&i(a)}}),[n,a,t,e,i]),d=c(W.c.PLAYLIST),p=c(W.c.SHOW),y=c(W.c.ARTIST),f=c(W.c.ALBUM),g=c(W.c.AUDIOBOOK);(0,_.Nx)(o?U.gO.TOGGLE_NPV_SIDEBAR:U.gO.TOGGLE_YLX_SIDEBAR,l),(0,_.Nx)(U.gO.GO_TO_LIBRARY,s),(0,_.Nx)(U.gO.GO_TO_PLAYLISTS,d),(0,_.Nx)(U.gO.GO_TO_PODCASTS,p),(0,_.Nx)(U.gO.GO_TO_ARTISTS,y),(0,_.Nx)(U.gO.GO_TO_ALBUMS,f),(0,_.Nx)(U.gO.GO_TO_AUDIOBOOKS,g)}(L);var Le,Ne=(0,tt.t)().isGridView,Fe=nt().libraryRowMode===rt.COMPACT,Me=(0,ne.r)(v.j,{data:{identifier:"yourlibraryx"}}),Be=Me.spec,Ue=Me.UBIFragment;Le=Ie?"collapsed":Ne?ke?"expanded_grid":"default_grid":Fe?ke?"expanded_compact":"default_compact":ke?"expanded_list":"default_list";var _e=(0,u.useMemo)((function(){return Be.sidebarFactory({uri:null!=pe?pe:Ze,identifier:Le})}),[Be,pe,Le]),ze=(0,re.t)(_e),Je=(0,u.useMemo)((function(){return _e.headerFactory()}),[_e]),qe=(0,u.useMemo)((function(){return Je.filtersFactory()}),[Je]),at=(0,u.useMemo)((function(){return Je.searchBarFactory()}),[Je]),ot=(0,u.useMemo)((function(){return _e.listFactory()}),[_e]),lt=(0,T.s)();!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=(0,We.n)(),i=(0,u.useContext)(z.Z).getContentsPrimaryFilterId("downloaded"),a=(0,u.useRef)(e);a.current=e;var o=(0,u.useRef)(t);o.current=t;var l=(0,u.useRef)(r);l.current=r;var s=(0,u.useRef)(!1);(0,u.useEffect)((function(){if(i){var e=o.current.includes(i),t=a.current.includes(i),r=o.current.length>1,c=!n&&!r&&!e&&t,u=n&&e&&s.current;(c||u)&&(c&&(s.current=!0),l.current(i,!1))}}),[i,n]);var c=(0,u.useRef)(t);(0,m.Ij)((function(){i&&(t.includes(i)&&!c.current.includes(i)&&s.current||(s.current=!1),c.current=t)}),[i,t])}(null==A||null===(r=A.availableFilters)||void 0===r?void 0:r.map((function(e){return e.id})),null==A||null===(s=A.selectedFilters)||void 0===s?void 0:s.map((function(e){return e.id})),N);var st=ut(ot,pe),dt=st.handleDropOnFolder,pt=st.unpinConfirmationDialog,yt=Xe(),ft=yt.dropOriginIsYLX,mt=yt.entityIsInFolder,vt=(0,u.useContext)(se.O_).setDraggingIsInProgress;(0,ce.g)(q);var xt=pe?He:Ve,ht=!mt||null!=A&&A.reorderAllowed?[]:[ie.fl.PLAYLISTS_V2,ie.fl.FOLDERS],Ot=(0,oe.A)({allowedMimeTypesByDropPosition:(0,i.A)({},ae.Nz.ON,ft?ht:xt),onDrop:(0,u.useCallback)(function(){var e=(0,l.A)(c().mark((function e(t){var r,i,a,o,l,s,u,d,p,y,f,g,m,b,v,x,h,O,j;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe?dt(t):(r=t[ie.fl.TRACKS],i=void 0===r?[]:r,a=t[ie.fl.LOCAL_TRACKS],o=void 0===a?[]:a,l=t[ie.fl.ALBUMS],s=t[ie.fl.ARTISTS],u=t[ie.fl.EPISODES],d=t[ie.fl.SHOWS],p=t[ie.fl.PLAYLISTS_V2],y=void 0===p?[]:p,f=t[ie.fl.FOLDERS],g=t[ie.fl.AUDIOBOOKS],(m=[].concat((0,n.A)(i),(0,n.A)(o))).length&&(null==be||be.add({uris:m}),lt.logInteraction(ot.dragCreatePlaylist())),null!=l&&l.length&&(null==be||be.add({uris:l}),lt.logInteraction(ot.dragLike({itemToBeLiked:null!==(b=l.at(0))&&void 0!==b?b:""}))),null!=s&&s.length&&(null==be||be.add({uris:s}),lt.logInteraction(ot.dragLike({itemToBeLiked:null!==(v=s.at(0))&&void 0!==v?v:""}))),null!=u&&u.length&&(null==be||be.add({uris:u}),lt.logInteraction(ot.dragLike({itemToBeLiked:null!==(x=u.at(0))&&void 0!==x?x:""}))),null!=d&&d.length&&(null==be||be.add({uris:d}),lt.logInteraction(ot.dragLike({itemToBeLiked:null!==(h=d.at(0))&&void 0!==h?h:""}))),null!=g&&g.length&&(null==be||be.add({uris:g}),lt.logInteraction(ot.dragLike({itemToBeLiked:null!==(O=g.at(0))&&void 0!==O?O:""}))),y.length&&(he(y,{before:"start"}),ft?lt.logInteraction(ot.dragSort()):lt.logInteraction(ot.dragLike({itemToBeLiked:null!==(j=y.at(0))&&void 0!==j?j:""}))),null!=f&&f.length&&(ve.moveFolder({uri:f[0]},{before:"start"}),lt.logInteraction(ot.dragSort())));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[pe,dt,be,lt,ot,he,ft,ve]),onLongDragOver:(0,u.useCallback)((function(){Ie&&Ee(V.fX.DEFAULT)}),[Ie,Ee])}),jt=Ot.dropPosition,Pt=Ot.className,wt=(0,a.A)(Ot,Ms),St=(0,b.NC)(ge.H8e),Dt=(0,b.NC)(ge.lDH),Ct=St||Dt,Tt=(0,u.useMemo)((function(){return{filters:k,sortOrder:G,textFilter:P,includeLocalFiles:me,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:Ct,expandedFolders:Ie||Ne?[]:ue,filtersPickedByUser:R.current,folderUri:pe}}),[k,G,P,me,Ct,Ie,Ne,ue,R,pe]),Rt=(0,u.useCallback)(function(){var e=(0,l.A)(c().mark((function e(t,r){var n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be.getContents(_s({offset:t,limit:r},Tt));case 3:return n=e.sent,n.offset,n.limit,n.items,i=(0,a.A)(n,Bs),we(!1),e.abrupt("return",_s({fetchedId:Tt.folderUri,onCacheSuccess:function(){D((function(e){return(0,y.j)(i,e)?e:i}))}},n));case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0 instanceof j.c_)){e.next=16;break}return E(),e.abrupt("return",Vs);case 16:if(!(e.t0 instanceof j.IU)){e.next=21;break}return J(void 0),e.abrupt("return",Vs);case 21:if(!(e.t0 instanceof j.db)){e.next=24;break}return ye(),e.abrupt("return",Vs);case 24:return(0,Z.UD)(e.t0),we(!0),e.abrupt("return",Vs);case 27:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),[Tt,be,E,ye,J]),It=!1===(null==A?void 0:A.hasUnfilteredItems),kt=(null==A?void 0:A.hasTextFilter)&&0===A.totalLength&&""!==P,Et=(0,u.useContext)(Ae.g).setFilter;(0,u.useEffect)((function(){kt&&Ie&&Et("")}),[kt,Ie,Et]);var Lt=0===(null==A?void 0:A.totalLength)&&A.selectedFilters.length>0&&!A.passedFolderUri&&!A.hasTextFilter;(0,m.Ij)((function(){var e=null==A?void 0:A.selectedFilters.at(-1);Lt&&e&&N(e.id,!1)}),[Lt,null==A?void 0:A.selectedFilters]);var Nt=(0,b.NC)(ge.HbK,{loadingValue:!1})&&(null==be?void 0:be.getCapabilities().canFetchAllItems),Mt=(0,X.E)({nrItems:50,fetch:Rt,limit:50,cacheAllOnInvalidation:Nt,cacheAllLimit:5e4}),Bt=Mt.fetchedId,_t=Mt.getItems,Vt=Mt.nrValidItems,Ht=Mt.invalidateCache,zt=(0,g.YQ)(Ht,200,{leading:!0,trailing:!0,maxWait:1e3});At(null==A?void 0:A.primaryFilter,zt);var Wt=!pe&&!Bt||pe===Bt;!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,u.useRef)({});(0,u.useLayoutEffect)((function(){if(!e.current)return function(){};var n=e.current,i=r.current[t];n.scrollTop=null!=i?i:0;var a=function(){r.current[t]=n.scrollTop};return null==n||n.addEventListener("scroll",a),function(){null==n||n.removeEventListener("scroll",a)}}),[e,t])}(q,Bt);var Xt,Yt=(0,u.useCallback)((function(){Ht(),we(!1)}),[Ht]),Kt=(0,Ce.y)(q),Zt=!(null==A||!A.openedFolderName),Gt=(0,b.NC)(ge._p8,{loadingValue:!1})&&Nt,Jt=function(e,t,r){var n=(0,tt.t)().isGridView,i=nt().rowHeight;return(0,u.useCallback)(function(){var a=(0,l.A)(c().mark((function a(o){var l,s,u,d,p,y,f,g,m;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=i,u=1,n&&(y=null===(d=e.current)||void 0===d?void 0:d.querySelector('li[role="row"]'),s=null!==(p=null==y?void 0:y.getBoundingClientRect().height)&&void 0!==p?p:0,null!=y&&y.parentElement&&(u=getComputedStyle(y.parentElement).getPropertyValue("grid-template-columns").split(" ").length)),s){a.next=5;break}return a.abrupt("return",null);case 5:return f=r(0,5e4,{cachedOnly:!0}),g=f.find((function(e){return(null==e?void 0:e.name)&&(0,$e.u)(o,e.name)})),-1!==(m=g?f.indexOf(g):-1)&&t.current&&et(t.current,e.current,Math.floor(m/u)*s,s),a.abrupt("return",null!==(l=null==g?void 0:g.uri)&&void 0!==l?l:null);case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[e,t,i,r,n])}(ee,q,_t),qt=Pe?(0,I.jsx)(lr,{onClick:Yt}):null;(0,u.useEffect)((function(){Pe&&Ie&&Ee(V.fX.DEFAULT)}),[Pe,Ie,Ee]),It&&!Ie&&(Xt=Zt?(0,I.jsx)(Ut,{className:Pt}):(0,I.jsx)(Qt,{className:Pt}));var $t=kt?(0,I.jsx)(nr,{query:P,className:Pt}):null,er=(0,b.NC)(ge.AEN),tr=!Ie&&!Xt&&(0,I.jsxs)("div",{className:p()(Ds,Pt,(0,i.A)({},Cs,er)),children:[(0,I.jsx)(Ss,{clearOnEscapeInElementRef:$,primaryFilter:null==A?void 0:A.primaryFilter,spec:at},pe),(0,I.jsx)(js,{sortOrders:null!==(d=null==A?void 0:A.availableSortOrders)&&void 0!==d?d:[],activeSortOrderId:null==A||null===(f=A.selectedSortOrder)||void 0===f?void 0:f.id,setActiveSortOrderId:J,root:$.current,showReorderingOnboarding:(null==A?void 0:A.primaryFilter)===W.c.PLAYLIST&&!(null!=A&&A.reorderAllowed),spec:Je,scrollNodeRef:q})]}),rr=Pe&&!A,ir=ke&&!Ne&&!qt&&!Xt,ar=(null!==(h=null==A?void 0:A.selectedFilters)&&void 0!==h?h:[]).length>0,or=xe&&!ar&&!pe;return(0,I.jsx)(Q,{containerRef:$,findMatchingTypeaheadUid:Jt,isEnabled:Gt,children:(0,I.jsxs)(Ue,{spec:Be,children:[(0,I.jsx)(Se,{}),(0,I.jsx)(x.h,{menu:(0,I.jsx)(F,{folderUri:pe}),children:(0,I.jsxs)("div",_s(_s({className:p()(As,(0,i.A)((0,i.A)({},Fr,jt===ae.Nz.ON),Is,Ie)),ref:function(e){$.current=e,ze(e)}},wt),{},{tabIndex:-1,onDragStart:function(){return vt(!0)},onDragEnd:function(){return vt(!1)},children:[pt,(0,I.jsxs)("div",{className:p()((0,i.A)({},Ns,Kt)),children:[(0,I.jsx)(Ll,{parentDropTargetClassName:Pt,isLibraryCompletelyEmpty:It,folderUri:null==A?void 0:A.passedFolderUri,folderName:null==A?void 0:A.openedFolderName,spec:Je.titleRowFactory()}),!fe&&(0,I.jsx)(Ue,{spec:Je,children:(0,I.jsx)(Ft,{})}),!Ie&&!rr&&(0,I.jsxs)("div",{className:Fs,children:[or&&(0,I.jsx)(u.Suspense,{fallback:null,children:(0,I.jsx)(Hs,{allContentTypeFilters:null!==(O=null==A?void 0:A.availableFilters)&&void 0!==O?O:[]})}),(0,I.jsx)(tn,{selectedFilters:null==A?void 0:A.selectedFilters,availableFilters:null==A?void 0:A.availableFilters,toggleFilterId:N,resetFilterIds:E,className:p()(Es,(0,i.A)({},Ls,!Wt)),scrollNodeRef:q,spec:qe},Bt),ke&&tr]}),ir&&(0,I.jsx)(Cr,{isScrolled:Kt})]}),(0,I.jsx)(le.a,{className:Ts,onInstanceCreated:function(e){q.current=e.elements().viewport},children:(0,I.jsxs)("div",{className:p()(Rs,(0,i.A)((0,i.A)((0,i.A)({},Ls,!Pe&&!Wt),Is,Ie),ks,ir)),children:[!ke&&tr,!Ie&&(null==A?void 0:A.tagPlaylist)&&(0,I.jsx)(u.Suspense,{fallback:null,children:(0,I.jsx)(Te,{playlist:A.tagPlaylist})}),qt||Xt||$t,(0,I.jsx)("div",{ref:ee,children:Ne?(0,I.jsx)(Vo,{getItems:_t,scrollNodeRef:q,primaryFilter:null==A?void 0:A.primaryFilter,nrValidItems:Vt,spec:ot}):(0,I.jsx)(ql,{getItems:_t,scrollNodeRef:q,primaryFilter:null==A?void 0:A.primaryFilter,nrValidItems:Vt,spec:ot})})]})}),gt(),(0,I.jsx)(te,{})]}))})]})})},Ws=function(){var e=(0,f.d4)((function(e){return e.session})).isAnonymous;return(0,I.jsx)(M.s,{onError:function(e){(0,Z.Jy)(e,"YourLibraryX")},children:(0,I.jsx)(Ae.s,{uri:j.gv,children:(0,I.jsx)(sr,{children:(0,I.jsxs)(Je,{children:[(0,I.jsx)(zs,{}),(0,I.jsx)(_e,{isAnonymous:e})]})})})})}},55730:(e,t,r)=>{r.d(t,{P:()=>i});var n=r(49805);function i(){return(0,n.y)()[0]}},49805:(e,t,r)=>{r.d(t,{y:()=>o});var n=r(26017),i=r(30758),a=r(77159);function o(){var e=(0,i.useContext)(a._),t=(0,i.useState)(e.getIsEnabled()),r=(0,n.A)(t,2),o=r[0],l=r[1];return(0,i.useEffect)((function(){var t=e.subscribeIsEnabled(l);return function(){return t()}}),[e]),[o,(0,i.useCallback)((function(t){return e.setIsEnabled(t)}),[e])]}}}]);
//# sourceMappingURL=5178.js.map