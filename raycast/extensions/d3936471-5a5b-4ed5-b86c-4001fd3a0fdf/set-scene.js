var zi=Object.create;var Je=Object.defineProperty,Hi=Object.defineProperties,ji=Object.getOwnPropertyDescriptor,Gi=Object.getOwnPropertyDescriptors,Xi=Object.getOwnPropertyNames,un=Object.getOwnPropertySymbols,Ki=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,Yi=Object.prototype.propertyIsEnumerable;var ln=(r,e,t)=>e in r?Je(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,V=(r,e)=>{for(var t in e||(e={}))dn.call(e,t)&&ln(r,t,e[t]);if(un)for(var t of un(e))Yi.call(e,t)&&ln(r,t,e[t]);return r},ge=(r,e)=>Hi(r,Gi(e)),hn=r=>Je(r,"__esModule",{value:!0});var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ji=(r,e)=>{for(var t in e)Je(r,t,{get:e[t],enumerable:!0})},pn=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Xi(e))!dn.call(r,s)&&(t||s!=="default")&&Je(r,s,{get:()=>e[s],enumerable:!(n=ji(e,s))||n.enumerable});return r},ke=(r,e)=>pn(hn(Je(r!=null?zi(Ki(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),Zi=(r=>(e,t)=>r&&r.get(e)||(t=pn(hn({}),e,1),r&&r.set(e,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var rt=E(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.getUint64=j.getInt64=j.setInt64=j.setUint64=j.UINT32_MAX=void 0;j.UINT32_MAX=4294967295;function wo(r,e,t){let n=t/4294967296,s=t;r.setUint32(e,n),r.setUint32(e+4,s)}j.setUint64=wo;function Eo(r,e,t){let n=Math.floor(t/4294967296),s=t;r.setUint32(e,n),r.setUint32(e+4,s)}j.setInt64=Eo;function So(r,e){let t=r.getInt32(e),n=r.getUint32(e+4);return t*4294967296+n}j.getInt64=So;function Co(r,e){let t=r.getUint32(e),n=r.getUint32(e+4);return t*4294967296+n}j.getUint64=Co});var Ct=E(k=>{"use strict";var xr,wr,Er;Object.defineProperty(k,"__esModule",{value:!0});k.utf8DecodeTD=k.TEXT_DECODER_THRESHOLD=k.utf8DecodeJs=k.utf8EncodeTE=k.TEXT_ENCODER_THRESHOLD=k.utf8EncodeJs=k.utf8Count=void 0;var Dn=rt(),St=(typeof process>"u"||((xr=process==null?void 0:process.env)===null||xr===void 0?void 0:xr.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function bo(r){let e=r.length,t=0,n=0;for(;n<e;){let s=r.charCodeAt(n++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&n<e){let i=r.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}k.utf8Count=bo;function To(r,e,t){let n=r.length,s=t,i=0;for(;i<n;){let o=r.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){let u=r.charCodeAt(i);(u&64512)===56320&&(++i,o=((o&1023)<<10)+(u&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}k.utf8EncodeJs=To;var nt=St?new TextEncoder:void 0;k.TEXT_ENCODER_THRESHOLD=St?typeof process<"u"&&((wr=process==null?void 0:process.env)===null||wr===void 0?void 0:wr.TEXT_ENCODING)!=="force"?200:0:Dn.UINT32_MAX;function Oo(r,e,t){e.set(nt.encode(r),t)}function Uo(r,e,t){nt.encodeInto(r,e.subarray(t))}k.utf8EncodeTE=(nt==null?void 0:nt.encodeInto)?Uo:Oo;var Io=4096;function Ao(r,e,t){let n=e,s=n+t,i=[],o="";for(;n<s;){let u=r[n++];if((u&128)===0)i.push(u);else if((u&224)===192){let f=r[n++]&63;i.push((u&31)<<6|f)}else if((u&240)===224){let f=r[n++]&63,a=r[n++]&63;i.push((u&31)<<12|f<<6|a)}else if((u&248)===240){let f=r[n++]&63,a=r[n++]&63,d=r[n++]&63,c=(u&7)<<18|f<<12|a<<6|d;c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|c&1023),i.push(c)}else i.push(u);i.length>=Io&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}k.utf8DecodeJs=Ao;var Do=St?new TextDecoder:null;k.TEXT_DECODER_THRESHOLD=St?typeof process<"u"&&((Er=process==null?void 0:process.env)===null||Er===void 0?void 0:Er.TEXT_DECODER)!=="force"?200:0:Dn.UINT32_MAX;function Lo(r,e,t){let n=r.subarray(e,e+t);return Do.decode(n)}k.utf8DecodeTD=Lo});var Sr=E(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.ExtData=void 0;var Ln=class{constructor(e,t){this.type=e,this.data=t}};bt.ExtData=Ln});var Ot=E(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.DecodeError=void 0;var st=class extends Error{constructor(e){super(e);let t=Object.create(st.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:st.name})}};Tt.DecodeError=st});var Cr=E(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.timestampExtension=L.decodeTimestampExtension=L.decodeTimestampToTimeSpec=L.encodeTimestampExtension=L.encodeDateToTimeSpec=L.encodeTimeSpecToTimestamp=L.EXT_TIMESTAMP=void 0;var Bo=Ot(),Bn=rt();L.EXT_TIMESTAMP=-1;var Ro=4294967296-1,ko=17179869184-1;function Rn({sec:r,nsec:e}){if(r>=0&&e>=0&&r<=ko)if(e===0&&r<=Ro){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,r),t}else{let t=r/4294967296,n=r&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|t&3),i.setUint32(4,n),s}else{let t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,e),(0,Bn.setInt64)(n,4,r),t}}L.encodeTimeSpecToTimestamp=Rn;function kn(r){let e=r.getTime(),t=Math.floor(e/1e3),n=(e-t*1e3)*1e6,s=Math.floor(n/1e9);return{sec:t+s,nsec:n-s*1e9}}L.encodeDateToTimeSpec=kn;function Mn(r){if(r instanceof Date){let e=kn(r);return Rn(e)}else return null}L.encodeTimestampExtension=Mn;function Pn(r){let e=new DataView(r.buffer,r.byteOffset,r.byteLength);switch(r.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let t=e.getUint32(0),n=e.getUint32(4),s=(t&3)*4294967296+n,i=t>>>2;return{sec:s,nsec:i}}case 12:{let t=(0,Bn.getInt64)(e,4),n=e.getUint32(0);return{sec:t,nsec:n}}default:throw new Bo.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${r.length}`)}}L.decodeTimestampToTimeSpec=Pn;function Nn(r){let e=Pn(r);return new Date(e.sec*1e3+e.nsec/1e6)}L.decodeTimestampExtension=Nn;L.timestampExtension={type:L.EXT_TIMESTAMP,encode:Mn,decode:Nn}});var Dt=E(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.ExtensionCodec=void 0;var Ut=Sr(),Mo=Cr(),It=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Mo.timestampExtension)}register({type:e,encode:t,decode:n}){if(e>=0)this.encoders[e]=t,this.decoders[e]=n;else{let s=1+e;this.builtInEncoders[s]=t,this.builtInDecoders[s]=n}}tryToEncode(e,t){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let i=s(e,t);if(i!=null){let o=-1-n;return new Ut.ExtData(o,i)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let i=s(e,t);if(i!=null){let o=n;return new Ut.ExtData(o,i)}}}return e instanceof Ut.ExtData?e:null}decode(e,t,n){let s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(e,t,n):new Ut.ExtData(t,e)}};At.ExtensionCodec=It;It.defaultCodec=new It});var br=E(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.createDataView=Me.ensureUint8Array=void 0;function Fn(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new Uint8Array(r):Uint8Array.from(r)}Me.ensureUint8Array=Fn;function Po(r){if(r instanceof ArrayBuffer)return new DataView(r);let e=Fn(r);return new DataView(e.buffer,e.byteOffset,e.byteLength)}Me.createDataView=Po});var Tr=E(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.Encoder=ne.DEFAULT_INITIAL_BUFFER_SIZE=ne.DEFAULT_MAX_DEPTH=void 0;var it=Ct(),No=Dt(),qn=rt(),Fo=br();ne.DEFAULT_MAX_DEPTH=100;ne.DEFAULT_INITIAL_BUFFER_SIZE=2048;var Vn=class{constructor(e=No.ExtensionCodec.defaultCodec,t=void 0,n=ne.DEFAULT_MAX_DEPTH,s=ne.DEFAULT_INITIAL_BUFFER_SIZE,i=!1,o=!1,u=!1,f=!1){this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=i,this.forceFloat32=o,this.ignoreUndefined=u,this.forceIntegerToFloat=f,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}getUint8Array(){return this.bytes.subarray(0,this.pos)}reinitializeState(){this.pos=0}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()}doEncode(e,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){let t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(e){let t=new ArrayBuffer(e),n=new Uint8Array(t),s=new DataView(t);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>it.TEXT_ENCODER_THRESHOLD){let s=(0,it.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,it.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=s}else{let s=(0,it.utf8Count)(e);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,it.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=s}}encodeObject(e,t){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);let n=(0,Fo.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,t){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of e)this.doEncode(s,t+1)}countWithoutUndefined(e,t){let n=0;for(let s of t)e[s]!==void 0&&n++;return n}encodeMap(e,t){let n=Object.keys(e);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let i of n){let o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,t+1))}}encodeExtension(e){let t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,qn.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,qn.setInt64)(this.view,this.pos,e),this.pos+=8}};ne.Encoder=Vn});var Wn=E(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.encode=void 0;var qo=Tr(),Vo={};function Wo(r,e=Vo){return new qo.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encode(r)}Lt.encode=Wo});var $n=E(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.prettyByte=void 0;function $o(r){return`${r<0?"-":""}0x${Math.abs(r).toString(16).padStart(2,"0")}`}Bt.prettyByte=$o});var Hn=E(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.CachedKeyDecoder=void 0;var zo=Ct(),Ho=16,jo=16,zn=class{constructor(e=Ho,t=jo){this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,n){let s=this.caches[n-1];e:for(let i of s){let o=i.bytes;for(let u=0;u<n;u++)if(o[u]!==e[t+u])continue e;return i.str}return null}store(e,t){let n=this.caches[e.length-1],s={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,t,n){let s=this.find(e,t,n);if(s!=null)return this.hit++,s;this.miss++;let i=(0,zo.utf8DecodeJs)(e,t,n),o=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(o,i),i}};Rt.CachedKeyDecoder=zn});var kt=E(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.Decoder=le.DataViewIndexOutOfBoundsError=void 0;var Or=$n(),Go=Dt(),Ie=rt(),Ur=Ct(),Ir=br(),Xo=Hn(),ue=Ot(),Ko=r=>{let e=typeof r;return e==="string"||e==="number"},ot=-1,Ar=new DataView(new ArrayBuffer(0)),Yo=new Uint8Array(Ar.buffer);le.DataViewIndexOutOfBoundsError=(()=>{try{Ar.getInt8(0)}catch(r){return r.constructor}throw new Error("never reached")})();var jn=new le.DataViewIndexOutOfBoundsError("Insufficient data"),Jo=new Xo.CachedKeyDecoder,Gn=class{constructor(e=Go.ExtensionCodec.defaultCodec,t=void 0,n=Ie.UINT32_MAX,s=Ie.UINT32_MAX,i=Ie.UINT32_MAX,o=Ie.UINT32_MAX,u=Ie.UINT32_MAX,f=Jo){this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=i,this.maxMapLength=o,this.maxExtLength=u,this.keyDecoder=f,this.totalPos=0,this.pos=0,this.view=Ar,this.bytes=Yo,this.headByte=ot,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=ot,this.stack.length=0}setBuffer(e){this.bytes=(0,Ir.ensureUint8Array)(e),this.view=(0,Ir.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===ot&&!this.hasRemaining(1))this.setBuffer(e);else{let t=this.bytes.subarray(this.pos),n=(0,Ir.ensureUint8Array)(e),s=new Uint8Array(t.length+n.length);s.set(t),s.set(n,t.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let t=!1,n;for await(let u of e){if(t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(u);try{n=this.doDecodeSync(),t=!0}catch(f){if(!(f instanceof le.DataViewIndexOutOfBoundsError))throw f}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,Or.prettyByte)(s)} at ${o} (${i} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,t){let n=t,s=-1;for await(let i of e){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof le.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),t;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){let s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e<160){let s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{let s=e-160;t=this.decodeUtf8String(s,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)t=this.readI64();else if(e===217){let s=this.lookU8();t=this.decodeUtf8String(s,1)}else if(e===218){let s=this.lookU16();t=this.decodeUtf8String(s,2)}else if(e===219){let s=this.lookU32();t=this.decodeUtf8String(s,4)}else if(e===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(e===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(e===196){let s=this.lookU8();t=this.decodeBinary(s,1)}else if(e===197){let s=this.lookU16();t=this.decodeBinary(s,2)}else if(e===198){let s=this.lookU32();t=this.decodeBinary(s,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){let s=this.lookU8();t=this.decodeExtension(s,1)}else if(e===200){let s=this.lookU16();t=this.decodeExtension(s,2)}else if(e===201){let s=this.lookU32();t=this.decodeExtension(s,4)}else throw new ue.DecodeError(`Unrecognized type byte: ${(0,Or.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=t,s.position++,s.position===s.size)n.pop(),t=s.array;else continue e;else if(s.type===1){if(!Ko(t))throw new ue.DecodeError("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new ue.DecodeError("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)n.pop(),t=s.map;else{s.key=null,s.type=1;continue e}}return t}}readHeadByte(){return this.headByte===ot&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=ot}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new ue.DecodeError(`Unrecognized array type byte: ${(0,Or.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new ue.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new ue.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,t){var n;if(e>this.maxStrLength)throw new ue.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+e)throw jn;let s=this.pos+t,i;return this.stateIsMapKey()&&((n=this.keyDecoder)===null||n===void 0?void 0:n.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,s,e):e>Ur.TEXT_DECODER_THRESHOLD?i=(0,Ur.utf8DecodeTD)(this.bytes,s,e):i=(0,Ur.utf8DecodeJs)(this.bytes,s,e),this.pos+=t+e,i}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,t){if(e>this.maxBinLength)throw new ue.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+t))throw jn;let n=this.pos+t,s=this.bytes.subarray(n,n+e);return this.pos+=t+e,s}decodeExtension(e,t){if(e>this.maxExtLength)throw new ue.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+t),s=this.decodeBinary(e,t+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,Ie.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,Ie.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};le.Decoder=Gn});var Dr=E(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.decodeMulti=se.decode=se.defaultDecodeOptions=void 0;var Xn=kt();se.defaultDecodeOptions={};function Zo(r,e=se.defaultDecodeOptions){return new Xn.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(r)}se.decode=Zo;function Qo(r,e=se.defaultDecodeOptions){return new Xn.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(r)}se.decodeMulti=Qo});var Jn=E(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.ensureAsyncIterable=xe.asyncIterableFromStream=xe.isAsyncIterable=void 0;function Kn(r){return r[Symbol.asyncIterator]!=null}xe.isAsyncIterable=Kn;function ea(r){if(r==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*Yn(r){let e=r.getReader();try{for(;;){let{done:t,value:n}=await e.read();if(t)return;ea(n),yield n}}finally{e.releaseLock()}}xe.asyncIterableFromStream=Yn;function ta(r){return Kn(r)?r:Yn(r)}xe.ensureAsyncIterable=ta});var Qn=E(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.decodeStream=ie.decodeMultiStream=ie.decodeArrayStream=ie.decodeAsync=void 0;var Lr=kt(),Br=Jn(),Mt=Dr();async function ra(r,e=Mt.defaultDecodeOptions){let t=(0,Br.ensureAsyncIterable)(r);return new Lr.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(t)}ie.decodeAsync=ra;function na(r,e=Mt.defaultDecodeOptions){let t=(0,Br.ensureAsyncIterable)(r);return new Lr.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(t)}ie.decodeArrayStream=na;function Zn(r,e=Mt.defaultDecodeOptions){let t=(0,Br.ensureAsyncIterable)(r);return new Lr.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(t)}ie.decodeMultiStream=Zn;function sa(r,e=Mt.defaultDecodeOptions){return Zn(r,e)}ie.decodeStream=sa});var rs=E(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.decodeTimestampExtension=C.encodeTimestampExtension=C.decodeTimestampToTimeSpec=C.encodeTimeSpecToTimestamp=C.encodeDateToTimeSpec=C.EXT_TIMESTAMP=C.ExtData=C.ExtensionCodec=C.Encoder=C.DataViewIndexOutOfBoundsError=C.DecodeError=C.Decoder=C.decodeStream=C.decodeMultiStream=C.decodeArrayStream=C.decodeAsync=C.decodeMulti=C.decode=C.encode=void 0;var ia=Wn();Object.defineProperty(C,"encode",{enumerable:!0,get:function(){return ia.encode}});var es=Dr();Object.defineProperty(C,"decode",{enumerable:!0,get:function(){return es.decode}});Object.defineProperty(C,"decodeMulti",{enumerable:!0,get:function(){return es.decodeMulti}});var Pt=Qn();Object.defineProperty(C,"decodeAsync",{enumerable:!0,get:function(){return Pt.decodeAsync}});Object.defineProperty(C,"decodeArrayStream",{enumerable:!0,get:function(){return Pt.decodeArrayStream}});Object.defineProperty(C,"decodeMultiStream",{enumerable:!0,get:function(){return Pt.decodeMultiStream}});Object.defineProperty(C,"decodeStream",{enumerable:!0,get:function(){return Pt.decodeStream}});var ts=kt();Object.defineProperty(C,"Decoder",{enumerable:!0,get:function(){return ts.Decoder}});Object.defineProperty(C,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return ts.DataViewIndexOutOfBoundsError}});var oa=Ot();Object.defineProperty(C,"DecodeError",{enumerable:!0,get:function(){return oa.DecodeError}});var aa=Tr();Object.defineProperty(C,"Encoder",{enumerable:!0,get:function(){return aa.Encoder}});var ca=Dt();Object.defineProperty(C,"ExtensionCodec",{enumerable:!0,get:function(){return ca.ExtensionCodec}});var fa=Sr();Object.defineProperty(C,"ExtData",{enumerable:!0,get:function(){return fa.ExtData}});var Pe=Cr();Object.defineProperty(C,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return Pe.EXT_TIMESTAMP}});Object.defineProperty(C,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return Pe.encodeDateToTimeSpec}});Object.defineProperty(C,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return Pe.encodeTimeSpecToTimestamp}});Object.defineProperty(C,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return Pe.decodeTimestampToTimeSpec}});Object.defineProperty(C,"encodeTimestampExtension",{enumerable:!0,get:function(){return Pe.encodeTimestampExtension}});Object.defineProperty(C,"decodeTimestampExtension",{enumerable:!0,get:function(){return Pe.decodeTimestampExtension}})});var ss=E((hf,ns)=>{var Ne=1e3,Fe=Ne*60,qe=Fe*60,Ae=qe*24,ua=Ae*7,la=Ae*365.25;ns.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return da(r);if(t==="number"&&isFinite(r))return e.long?pa(r):ha(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function da(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*la;case"weeks":case"week":case"w":return t*ua;case"days":case"day":case"d":return t*Ae;case"hours":case"hour":case"hrs":case"hr":case"h":return t*qe;case"minutes":case"minute":case"mins":case"min":case"m":return t*Fe;case"seconds":case"second":case"secs":case"sec":case"s":return t*Ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ha(r){var e=Math.abs(r);return e>=Ae?Math.round(r/Ae)+"d":e>=qe?Math.round(r/qe)+"h":e>=Fe?Math.round(r/Fe)+"m":e>=Ne?Math.round(r/Ne)+"s":r+"ms"}function pa(r){var e=Math.abs(r);return e>=Ae?Nt(r,e,Ae,"day"):e>=qe?Nt(r,e,qe,"hour"):e>=Fe?Nt(r,e,Fe,"minute"):e>=Ne?Nt(r,e,Ne,"second"):r+" ms"}function Nt(r,e,t,n){var s=e>=t*1.5;return Math.round(r/t)+" "+n+(s?"s":"")}});var Rr=E((pf,is)=>{function ma(r){t.debug=t,t.default=t,t.coerce=f,t.disable=i,t.enable=s,t.enabled=o,t.humanize=ss(),t.destroy=a,Object.keys(r).forEach(d=>{t[d]=r[d]}),t.names=[],t.skips=[],t.formatters={};function e(d){let c=0;for(let h=0;h<d.length;h++)c=(c<<5)-c+d.charCodeAt(h),c|=0;return t.colors[Math.abs(c)%t.colors.length]}t.selectColor=e;function t(d){let c,h=null,m,g;function _(...y){if(!_.enabled)return;let l=_,p=Number(new Date),x=p-(c||p);l.diff=x,l.prev=c,l.curr=p,c=p,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let v=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(w,I)=>{if(w==="%%")return"%";v++;let U=t.formatters[I];if(typeof U=="function"){let T=y[v];w=U.call(l,T),y.splice(v,1),v--}return w}),t.formatArgs.call(l,y),(l.log||t.log).apply(l,y)}return _.namespace=d,_.useColors=t.useColors(),_.color=t.selectColor(d),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==t.namespaces&&(m=t.namespaces,g=t.enabled(d)),g),set:y=>{h=y}}),typeof t.init=="function"&&t.init(_),_}function n(d,c){let h=t(this.namespace+(typeof c>"u"?":":c)+d);return h.log=this.log,h}function s(d){t.save(d),t.namespaces=d,t.names=[],t.skips=[];let c,h=(typeof d=="string"?d:"").split(/[\s,]+/),m=h.length;for(c=0;c<m;c++)!h[c]||(d=h[c].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.slice(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function i(){let d=[...t.names.map(u),...t.skips.map(u).map(c=>"-"+c)].join(",");return t.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let c,h;for(c=0,h=t.skips.length;c<h;c++)if(t.skips[c].test(d))return!1;for(c=0,h=t.names.length;c<h;c++)if(t.names[c].test(d))return!0;return!1}function u(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function f(d){return d instanceof Error?d.stack||d.message:d}function a(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}is.exports=ma});var os=E((W,Ft)=>{W.formatArgs=ya;W.save=ga;W.load=va;W.useColors=_a;W.storage=xa();W.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();W.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _a(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ya(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ft.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(t++,s==="%c"&&(n=t))}),r.splice(n,0,e)}W.log=console.debug||console.log||(()=>{});function ga(r){try{r?W.storage.setItem("debug",r):W.storage.removeItem("debug")}catch{}}function va(){let r;try{r=W.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function xa(){try{return localStorage}catch{}}Ft.exports=Rr()(W);var{formatters:wa}=Ft.exports;wa.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var cs=E((mf,as)=>{"use strict";as.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var ls=E((_f,us)=>{"use strict";var Ea=require("os"),fs=require("tty"),G=cs(),{env:D}=process,we;G("no-color")||G("no-colors")||G("color=false")||G("color=never")?we=0:(G("color")||G("colors")||G("color=true")||G("color=always"))&&(we=1);"FORCE_COLOR"in D&&(D.FORCE_COLOR==="true"?we=1:D.FORCE_COLOR==="false"?we=0:we=D.FORCE_COLOR.length===0?1:Math.min(parseInt(D.FORCE_COLOR,10),3));function kr(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Mr(r,e){if(we===0)return 0;if(G("color=16m")||G("color=full")||G("color=truecolor"))return 3;if(G("color=256"))return 2;if(r&&!e&&we===void 0)return 0;let t=we||0;if(D.TERM==="dumb")return t;if(process.platform==="win32"){let n=Ea.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in D)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in D)||D.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in D)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(D.TEAMCITY_VERSION)?1:0;if(D.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in D){let n=parseInt((D.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(D.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(D.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(D.TERM)||"COLORTERM"in D?1:t}function Sa(r){let e=Mr(r,r&&r.isTTY);return kr(e)}us.exports={supportsColor:Sa,stdout:kr(Mr(!0,fs.isatty(1))),stderr:kr(Mr(!0,fs.isatty(2)))}});var hs=E((B,Vt)=>{var Ca=require("tty"),qt=require("util");B.init=Da;B.log=Ua;B.formatArgs=Ta;B.save=Ia;B.load=Aa;B.useColors=ba;B.destroy=qt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");B.colors=[6,2,3,4,5,1];try{let r=ls();r&&(r.stderr||r).level>=2&&(B.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}B.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function ba(){return"colors"in B.inspectOpts?Boolean(B.inspectOpts.colors):Ca.isatty(process.stderr.fd)}function Ta(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;r[0]=i+r[0].split(`
`).join(`
`+i),r.push(s+"m+"+Vt.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Oa()+e+" "+r[0]}function Oa(){return B.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Ua(...r){return process.stderr.write(qt.format(...r)+`
`)}function Ia(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Aa(){return process.env.DEBUG}function Da(r){r.inspectOpts={};let e=Object.keys(B.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=B.inspectOpts[e[t]]}Vt.exports=Rr()(B);var{formatters:ds}=Vt.exports;ds.o=function(r){return this.inspectOpts.colors=this.useColors,qt.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ds.O=function(r){return this.inspectOpts.colors=this.useColors,qt.inspect(r,this.inspectOpts)}});var ps=E((yf,Pr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Pr.exports=os():Pr.exports=hs()});var _s=E((gf,Nr)=>{"use strict";var La=Object.prototype.hasOwnProperty,q="~";function at(){}Object.create&&(at.prototype=Object.create(null),new at().__proto__||(q=!1));function Ba(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function ms(r,e,t,n,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var i=new Ba(t,n||r,s),o=q?q+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],i]:r._events[o].push(i):(r._events[o]=i,r._eventsCount++),r}function Wt(r,e){--r._eventsCount===0?r._events=new at:delete r._events[e]}function M(){this._events=new at,this._eventsCount=0}M.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)La.call(t,n)&&e.push(q?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};M.prototype.listeners=function(e){var t=q?q+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};M.prototype.listenerCount=function(e){var t=q?q+e:e,n=this._events[t];return n?n.fn?1:n.length:0};M.prototype.emit=function(e,t,n,s,i,o){var u=q?q+e:e;if(!this._events[u])return!1;var f=this._events[u],a=arguments.length,d,c;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),a){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,s),!0;case 5:return f.fn.call(f.context,t,n,s,i),!0;case 6:return f.fn.call(f.context,t,n,s,i,o),!0}for(c=1,d=new Array(a-1);c<a;c++)d[c-1]=arguments[c];f.fn.apply(f.context,d)}else{var h=f.length,m;for(c=0;c<h;c++)switch(f[c].once&&this.removeListener(e,f[c].fn,void 0,!0),a){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,t);break;case 3:f[c].fn.call(f[c].context,t,n);break;case 4:f[c].fn.call(f[c].context,t,n,s);break;default:if(!d)for(m=1,d=new Array(a-1);m<a;m++)d[m-1]=arguments[m];f[c].fn.apply(f[c].context,d)}}return!0};M.prototype.on=function(e,t,n){return ms(this,e,t,n,!1)};M.prototype.once=function(e,t,n){return ms(this,e,t,n,!0)};M.prototype.removeListener=function(e,t,n,s){var i=q?q+e:e;if(!this._events[i])return this;if(!t)return Wt(this,i),this;var o=this._events[i];if(o.fn)o.fn===t&&(!s||o.once)&&(!n||o.context===n)&&Wt(this,i);else{for(var u=0,f=[],a=o.length;u<a;u++)(o[u].fn!==t||s&&!o[u].once||n&&o[u].context!==n)&&f.push(o[u]);f.length?this._events[i]=f.length===1?f[0]:f:Wt(this,i)}return this};M.prototype.removeAllListeners=function(e){var t;return e?(t=q?q+e:e,this._events[t]&&Wt(this,t)):(this._events=new at,this._eventsCount=0),this};M.prototype.off=M.prototype.removeListener;M.prototype.addListener=M.prototype.on;M.prefixed=q;M.EventEmitter=M;typeof Nr<"u"&&(Nr.exports=M)});var Ee=E((vf,ys)=>{"use strict";ys.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var ct=E((xf,$t)=>{"use strict";var{EMPTY_BUFFER:Ra}=Ee();function ka(r,e){if(r.length===0)return Ra;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),n=0;for(let s=0;s<r.length;s++){let i=r[s];t.set(i,n),n+=i.length}return n<e?t.slice(0,n):t}function gs(r,e,t,n,s){for(let i=0;i<s;i++)t[n+i]=r[i]^e[i&3]}function vs(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function Ma(r){return r.byteLength===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}function Fr(r){if(Fr.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=Buffer.from(r):ArrayBuffer.isView(r)?e=Buffer.from(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),Fr.readOnly=!1),e}$t.exports={concat:ka,mask:gs,toArrayBuffer:Ma,toBuffer:Fr,unmask:vs};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");$t.exports.mask=function(e,t,n,s,i){i<48?gs(e,t,n,s,i):r.mask(e,t,n,s,i)},$t.exports.unmask=function(e,t){e.length<32?vs(e,t):r.unmask(e,t)}}catch{}});var Ss=E((wf,Es)=>{"use strict";var xs=Symbol("kDone"),qr=Symbol("kRun"),ws=class{constructor(e){this[xs]=()=>{this.pending--,this[qr]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[qr]()}[qr](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[xs])}}};Es.exports=ws});var lt=E((Ef,Us)=>{"use strict";var ft=require("zlib"),Cs=ct(),Pa=Ss(),{kStatusCode:bs}=Ee(),Na=Buffer.from([0,0,255,255]),jt=Symbol("permessage-deflate"),de=Symbol("total-length"),ut=Symbol("callback"),Se=Symbol("buffers"),Ht=Symbol("error"),zt,Ts=class{constructor(e,t,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!zt){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;zt=new Pa(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[ut];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,n=e.find(s=>!(t.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>s.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(n.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?n.client_max_window_bits=t.clientMaxWindowBits:(n.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(n=>{let s=t[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);t[n]=s})}),e}decompress(e,t,n){zt.add(s=>{this._decompress(e,t,(i,o)=>{s(),n(i,o)})})}compress(e,t,n){zt.add(s=>{this._compress(e,t,(i,o)=>{s(),n(i,o)})})}_decompress(e,t,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?ft.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=ft.createInflateRaw(ge(V({},this._options.zlibInflateOptions),{windowBits:o})),this._inflate[jt]=this,this._inflate[de]=0,this._inflate[Se]=[],this._inflate.on("error",qa),this._inflate.on("data",Os)}this._inflate[ut]=n,this._inflate.write(e),t&&this._inflate.write(Na),this._inflate.flush(()=>{let i=this._inflate[Ht];if(i){this._inflate.close(),this._inflate=null,n(i);return}let o=Cs.concat(this._inflate[Se],this._inflate[de]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[de]=0,this._inflate[Se]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,t,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?ft.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=ft.createDeflateRaw(ge(V({},this._options.zlibDeflateOptions),{windowBits:o})),this._deflate[de]=0,this._deflate[Se]=[],this._deflate.on("data",Fa)}this._deflate[ut]=n,this._deflate.write(e),this._deflate.flush(ft.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=Cs.concat(this._deflate[Se],this._deflate[de]);t&&(i=i.slice(0,i.length-4)),this._deflate[ut]=null,this._deflate[de]=0,this._deflate[Se]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};Us.exports=Ts;function Fa(r){this[Se].push(r),this[de]+=r.length}function Os(r){if(this[de]+=r.length,this[jt]._maxPayload<1||this[de]<=this[jt]._maxPayload){this[Se].push(r);return}this[Ht]=new RangeError("Max payload size exceeded"),this[Ht].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Ht][bs]=1009,this.removeListener("data",Os),this.reset()}function qa(r){this[jt]._inflate=null,r[bs]=1007,this[ut](r)}});var dt=E((Sf,Vr)=>{"use strict";var Va=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Wa(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function Is(r){let e=r.length,t=0;for(;t<e;)if((r[t]&128)===0)t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}Vr.exports={isValidStatusCode:Wa,isValidUTF8:Is,tokenChars:Va};if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");Vr.exports.isValidUTF8=function(e){return e.length<150?Is(e):r(e)}}catch{}});var zr=E((Cf,Ps)=>{"use strict";var{Writable:$a}=require("stream"),As=lt(),{BINARY_TYPES:za,EMPTY_BUFFER:Ds,kStatusCode:Ha,kWebSocket:ja}=Ee(),{concat:Wr,toArrayBuffer:Ga,unmask:Xa}=ct(),{isValidStatusCode:Ka,isValidUTF8:Ls}=dt(),ht=0,Bs=1,Rs=2,ks=3,$r=4,Ya=5,Ms=class extends $a{constructor(e={}){super();this._binaryType=e.binaryType||za[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[ja]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=ht,this._loop=!1}_write(e,t,n){if(this._opcode===8&&this._state==ht)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=n.slice(e),n.slice(0,e)}let t=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=t.length-e;e>=n.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case ht:t=this.getInfo();break;case Bs:t=this.getPayloadLength16();break;case Rs:t=this.getPayloadLength64();break;case ks:this.getMask();break;case $r:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((e[0]&48)!==0)return this._loop=!1,A(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)===64;if(t&&!this._extensions[As.extensionName])return this._loop=!1,A(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,A(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,A(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,A(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,A(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,A(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,A(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,A(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,A(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,A(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Bs;else if(this._payloadLength===127)this._state=Rs;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,A(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,A(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=ks:this._state=$r}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=$r}getData(e){let t=Ds;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&Xa(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=Ya,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[As.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return t(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(A(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(i)}let o=this.dataMessage();if(o)return t(o);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=Wr(t,e):this._binaryType==="arraybuffer"?n=Ga(Wr(t,e)):n=t,this.emit("message",n,!0)}else{let n=Wr(t,e);if(!this._skipUTF8Validation&&!Ls(n))return this._loop=!1,A(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=ht}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,Ds),this.end();else{if(e.length===1)return A(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let t=e.readUInt16BE(0);if(!Ka(t))return A(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let n=e.slice(2);if(!this._skipUTF8Validation&&!Ls(n))return A(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,n),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=ht}};Ps.exports=Ms;function A(r,e,t,n,s){let i=new r(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(i,A),i.code=s,i[Ha]=n,i}});var Hr=E((Of,qs)=>{"use strict";var bf=require("net"),Tf=require("tls"),{randomFillSync:Ja}=require("crypto"),Ns=lt(),{EMPTY_BUFFER:Za}=Ee(),{isValidStatusCode:Qa}=dt(),{mask:Fs,toBuffer:Ve}=ct(),J=Symbol("kByteLength"),ec=Buffer.alloc(4),he=class{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let n,s=!1,i=2,o=!1;t.mask&&(n=t.maskBuffer||ec,t.generateMask?t.generateMask(n):Ja(n,0,4),o=(n[0]|n[1]|n[2]|n[3])===0,i=6);let u;typeof e=="string"?(!t.mask||o)&&t[J]!==void 0?u=t[J]:(e=Buffer.from(e),u=e.length):(u=e.length,s=t.mask&&t.readOnly&&!o);let f=u;u>=65536?(i+=8,f=127):u>125&&(i+=2,f=126);let a=Buffer.allocUnsafe(s?u+i:i);return a[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(a[0]|=64),a[1]=f,f===126?a.writeUInt16BE(u,2):f===127&&(a[2]=a[3]=0,a.writeUIntBE(u,4,6)),t.mask?(a[1]|=128,a[i-4]=n[0],a[i-3]=n[1],a[i-2]=n[2],a[i-1]=n[3],o?[a,e]:s?(Fs(e,n,a,i,u),[a]):(Fs(e,n,e,0,u),[a,e])):[a,e]}close(e,t,n,s){let i;if(e===void 0)i=Za;else{if(typeof e!="number"||!Qa(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let u=Buffer.byteLength(t);if(u>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+u),i.writeUInt16BE(e,0),typeof t=="string"?i.write(t,2):i.set(t,2)}}let o={[J]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,o,s]):this.sendFrame(he.frame(i,o),s)}ping(e,t,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):(e=Ve(e),s=e.length,i=Ve.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[J]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(he.frame(e,o),n)}pong(e,t,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):(e=Ve(e),s=e.length,i=Ve.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[J]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(he.frame(e,o),n)}send(e,t,n){let s=this._extensions[Ns.extensionName],i=t.binary?2:1,o=t.compress,u,f;if(typeof e=="string"?(u=Buffer.byteLength(e),f=!1):(e=Ve(e),u=e.length,f=Ve.readOnly),this._firstFragment?(this._firstFragment=!1,o&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=u>=s._threshold),this._compress=o):(o=!1,i=0),t.fin&&(this._firstFragment=!0),s){let a={[J]:u,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:f,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,a,n]):this.dispatch(e,this._compress,a,n)}else this.sendFrame(he.frame(e,{[J]:u,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:f,rsv1:!1}),n)}dispatch(e,t,n,s){if(!t){this.sendFrame(he.frame(e,n),s);return}let i=this._extensions[Ns.extensionName];this._bufferedBytes+=n[J],this._deflating=!0,i.compress(e,n.fin,(o,u)=>{if(this._socket.destroyed){let f=new Error("The socket was closed while data was being compressed");typeof s=="function"&&s(f);for(let a=0;a<this._queue.length;a++){let d=this._queue[a],c=d[d.length-1];typeof c=="function"&&c(f)}return}this._bufferedBytes-=n[J],this._deflating=!1,n.readOnly=!1,this.sendFrame(he.frame(u,n),s),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][J],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][J],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};qs.exports=he});var Ys=E((Uf,Ks)=>{"use strict";var{kForOnEventAttribute:jr,kListener:Vs}=Ee(),Ws=Symbol("kCode"),$s=Symbol("kData"),zs=Symbol("kError"),Hs=Symbol("kMessage"),js=Symbol("kReason"),We=Symbol("kTarget"),Gs=Symbol("kType"),Xs=Symbol("kWasClean"),Ce=class{constructor(e){this[We]=null,this[Gs]=e}get target(){return this[We]}get type(){return this[Gs]}};Object.defineProperty(Ce.prototype,"target",{enumerable:!0});Object.defineProperty(Ce.prototype,"type",{enumerable:!0});var $e=class extends Ce{constructor(e,t={}){super(e);this[Ws]=t.code===void 0?0:t.code,this[js]=t.reason===void 0?"":t.reason,this[Xs]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Ws]}get reason(){return this[js]}get wasClean(){return this[Xs]}};Object.defineProperty($e.prototype,"code",{enumerable:!0});Object.defineProperty($e.prototype,"reason",{enumerable:!0});Object.defineProperty($e.prototype,"wasClean",{enumerable:!0});var pt=class extends Ce{constructor(e,t={}){super(e);this[zs]=t.error===void 0?null:t.error,this[Hs]=t.message===void 0?"":t.message}get error(){return this[zs]}get message(){return this[Hs]}};Object.defineProperty(pt.prototype,"error",{enumerable:!0});Object.defineProperty(pt.prototype,"message",{enumerable:!0});var Gt=class extends Ce{constructor(e,t={}){super(e);this[$s]=t.data===void 0?null:t.data}get data(){return this[$s]}};Object.defineProperty(Gt.prototype,"data",{enumerable:!0});var tc={addEventListener(r,e,t={}){let n;if(r==="message")n=function(i,o){let u=new Gt("message",{data:o?i:i.toString()});u[We]=this,e.call(this,u)};else if(r==="close")n=function(i,o){let u=new $e("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});u[We]=this,e.call(this,u)};else if(r==="error")n=function(i){let o=new pt("error",{error:i,message:i.message});o[We]=this,e.call(this,o)};else if(r==="open")n=function(){let i=new Ce("open");i[We]=this,e.call(this,i)};else return;n[jr]=!!t[jr],n[Vs]=e,t.once?this.once(r,n):this.on(r,n)},removeEventListener(r,e){for(let t of this.listeners(r))if(t[Vs]===e&&!t[jr]){this.removeListener(r,t);break}}};Ks.exports={CloseEvent:$e,ErrorEvent:pt,Event:Ce,EventTarget:tc,MessageEvent:Gt}});var Gr=E((If,Js)=>{"use strict";var{tokenChars:mt}=dt();function oe(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function rc(r){let e=Object.create(null),t=Object.create(null),n=!1,s=!1,i=!1,o,u,f=-1,a=-1,d=-1,c=0;for(;c<r.length;c++)if(a=r.charCodeAt(c),o===void 0)if(d===-1&&mt[a]===1)f===-1&&(f=c);else if(c!==0&&(a===32||a===9))d===-1&&f!==-1&&(d=c);else if(a===59||a===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${c}`);d===-1&&(d=c);let m=r.slice(f,d);a===44?(oe(e,m,t),t=Object.create(null)):o=m,f=d=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);else if(u===void 0)if(d===-1&&mt[a]===1)f===-1&&(f=c);else if(a===32||a===9)d===-1&&f!==-1&&(d=c);else if(a===59||a===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${c}`);d===-1&&(d=c),oe(t,r.slice(f,d),!0),a===44&&(oe(e,o,t),t=Object.create(null),o=void 0),f=d=-1}else if(a===61&&f!==-1&&d===-1)u=r.slice(f,c),f=d=-1;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(s){if(mt[a]!==1)throw new SyntaxError(`Unexpected character at index ${c}`);f===-1?f=c:n||(n=!0),s=!1}else if(i)if(mt[a]===1)f===-1&&(f=c);else if(a===34&&f!==-1)i=!1,d=c;else if(a===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(a===34&&r.charCodeAt(c-1)===61)i=!0;else if(d===-1&&mt[a]===1)f===-1&&(f=c);else if(f!==-1&&(a===32||a===9))d===-1&&(d=c);else if(a===59||a===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${c}`);d===-1&&(d=c);let m=r.slice(f,d);n&&(m=m.replace(/\\/g,""),n=!1),oe(t,u,m),a===44&&(oe(e,o,t),t=Object.create(null),o=void 0),u=void 0,f=d=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);if(f===-1||i||a===32||a===9)throw new SyntaxError("Unexpected end of input");d===-1&&(d=c);let h=r.slice(f,d);return o===void 0?oe(e,h,t):(u===void 0?oe(t,h,!0):n?oe(t,u,h.replace(/\\/g,"")):oe(t,u,h),oe(e,o,t)),e}function nc(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?s:`${s}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Js.exports={format:nc,parse:rc}});var Zr=E((Df,ci)=>{"use strict";var sc=require("events"),ic=require("https"),oc=require("http"),ei=require("net"),ac=require("tls"),{randomBytes:cc,createHash:fc}=require("crypto"),{Readable:Af}=require("stream"),{URL:Xr}=require("url"),be=lt(),uc=zr(),lc=Hr(),{BINARY_TYPES:Zs,EMPTY_BUFFER:Xt,GUID:dc,kForOnEventAttribute:Kr,kListener:hc,kStatusCode:pc,kWebSocket:P,NOOP:ti}=Ee(),{EventTarget:{addEventListener:mc,removeEventListener:_c}}=Ys(),{format:yc,parse:gc}=Gr(),{toBuffer:vc}=ct(),xc=30*1e3,ri=Symbol("kAborted"),Yr=[8,13],pe=["CONNECTING","OPEN","CLOSING","CLOSED"],wc=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,S=class extends sc{constructor(e,t,n){super();this._binaryType=Zs[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Xt,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=S.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(n=t,t=[]):t=[t]),ni(this,e,t,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){!Zs.includes(e)||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){let s=new uc({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new lc(e,this._extensions,n.generateMask),this._receiver=s,this._socket=e,s[P]=this,e[P]=this,s.on("conclude",Cc),s.on("drain",bc),s.on("error",Tc),s.on("message",Oc),s.on("ping",Uc),s.on("pong",Ic),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",ii),e.on("data",Yt),e.on("end",oi),e.on("error",ai),this._readyState=S.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=S.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[be.extensionName]&&this._extensions[be.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=S.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==S.CLOSED){if(this.readyState===S.CONNECTING){let n="WebSocket was closed before the connection was established";return $(this,this._req,n)}if(this.readyState===S.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=S.CLOSING,this._sender.close(e,t,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),xc)}}pause(){this.readyState===S.CONNECTING||this.readyState===S.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===S.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==S.OPEN){Jr(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||Xt,t,n)}pong(e,t,n){if(this.readyState===S.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==S.OPEN){Jr(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||Xt,t,n)}resume(){this.readyState===S.CONNECTING||this.readyState===S.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===S.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(n=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==S.OPEN){Jr(this,e,n);return}let s=V({binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[be.extensionName]||(s.compress=!1),this._sender.send(e||Xt,s,n)}terminate(){if(this.readyState!==S.CLOSED){if(this.readyState===S.CONNECTING){let e="WebSocket was closed before the connection was established";return $(this,this._req,e)}this._socket&&(this._readyState=S.CLOSING,this._socket.destroy())}}};Object.defineProperty(S,"CONNECTING",{enumerable:!0,value:pe.indexOf("CONNECTING")});Object.defineProperty(S.prototype,"CONNECTING",{enumerable:!0,value:pe.indexOf("CONNECTING")});Object.defineProperty(S,"OPEN",{enumerable:!0,value:pe.indexOf("OPEN")});Object.defineProperty(S.prototype,"OPEN",{enumerable:!0,value:pe.indexOf("OPEN")});Object.defineProperty(S,"CLOSING",{enumerable:!0,value:pe.indexOf("CLOSING")});Object.defineProperty(S.prototype,"CLOSING",{enumerable:!0,value:pe.indexOf("CLOSING")});Object.defineProperty(S,"CLOSED",{enumerable:!0,value:pe.indexOf("CLOSED")});Object.defineProperty(S.prototype,"CLOSED",{enumerable:!0,value:pe.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(S.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(S.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[Kr])return e[hc];return null},set(e){for(let t of this.listeners(r))if(t[Kr]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[Kr]:!0})}})});S.prototype.addEventListener=mc;S.prototype.removeEventListener=_c;ci.exports=S;function ni(r,e,t,n){let s=ge(V({protocolVersion:Yr[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},n),{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(!Yr.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${Yr.join(", ")})`);let i;if(e instanceof Xr)i=e,r._url=e.href;else{try{i=new Xr(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}r._url=e}let o=i.protocol==="wss:",u=i.protocol==="ws+unix:",f;if(i.protocol!=="ws:"&&!o&&!u?f=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:u&&!i.pathname?f="The URL's pathname is empty":i.hash&&(f="The URL contains a fragment identifier"),f){let _=new SyntaxError(f);if(r._redirects===0)throw _;Kt(r,_);return}let a=o?443:80,d=cc(16).toString("base64"),c=o?ic.request:oc.request,h=new Set,m;if(s.createConnection=o?Sc:Ec,s.defaultPort=s.defaultPort||a,s.port=i.port||a,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers=V({"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":d,Connection:"Upgrade",Upgrade:"websocket"},s.headers),s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(m=new be(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=yc({[be.extensionName]:m.offer()})),t.length){for(let _ of t){if(typeof _!="string"||!wc.test(_)||h.has(_))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(_)}s.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),u){let _=s.path.split(":");s.socketPath=_[0],s.path=_[1]}let g;if(s.followRedirects){if(r._redirects===0){r._originalSecure=o,r._originalHost=i.host;let _=n&&n.headers;if(n=ge(V({},n),{headers:{}}),_)for(let[y,l]of Object.entries(_))n.headers[y.toLowerCase()]=l}else if(r.listenerCount("redirect")===0){let _=i.host===r._originalHost;(!_||r._originalSecure&&!o)&&(delete s.headers.authorization,delete s.headers.cookie,_||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),g=r._req=c(s),r._redirects&&r.emit("redirect",r.url,g)}else g=r._req=c(s);s.timeout&&g.on("timeout",()=>{$(r,g,"Opening handshake has timed out")}),g.on("error",_=>{g===null||g[ri]||(g=r._req=null,Kt(r,_))}),g.on("response",_=>{let y=_.headers.location,l=_.statusCode;if(y&&s.followRedirects&&l>=300&&l<400){if(++r._redirects>s.maxRedirects){$(r,g,"Maximum redirects exceeded");return}g.abort();let p;try{p=new Xr(y,e)}catch{let v=new SyntaxError(`Invalid URL: ${y}`);Kt(r,v);return}ni(r,p,t,n)}else r.emit("unexpected-response",g,_)||$(r,g,`Unexpected server response: ${_.statusCode}`)}),g.on("upgrade",(_,y,l)=>{if(r.emit("upgrade",_),r.readyState!==S.CONNECTING)return;if(g=r._req=null,_.headers.upgrade.toLowerCase()!=="websocket"){$(r,y,"Invalid Upgrade header");return}let p=fc("sha1").update(d+dc).digest("base64");if(_.headers["sec-websocket-accept"]!==p){$(r,y,"Invalid Sec-WebSocket-Accept header");return}let x=_.headers["sec-websocket-protocol"],v;if(x!==void 0?h.size?h.has(x)||(v="Server sent an invalid subprotocol"):v="Server sent a subprotocol but none was requested":h.size&&(v="Server sent no subprotocol"),v){$(r,y,v);return}x&&(r._protocol=x);let b=_.headers["sec-websocket-extensions"];if(b!==void 0){if(!m){$(r,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let w;try{w=gc(b)}catch{$(r,y,"Invalid Sec-WebSocket-Extensions header");return}let I=Object.keys(w);if(I.length!==1||I[0]!==be.extensionName){$(r,y,"Server indicated an extension that was not requested");return}try{m.accept(w[be.extensionName])}catch{$(r,y,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[be.extensionName]=m}r.setSocket(y,l,{generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),g.end()}function Kt(r,e){r._readyState=S.CLOSING,r.emit("error",e),r.emitClose()}function Ec(r){return r.path=r.socketPath,ei.connect(r)}function Sc(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=ei.isIP(r.host)?"":r.host),ac.connect(r)}function $(r,e,t){r._readyState=S.CLOSING;let n=new Error(t);Error.captureStackTrace(n,$),e.setHeader?(e[ri]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Kt,r,n)):(e.destroy(n),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function Jr(r,e,t){if(e){let n=vc(e).length;r._socket?r._sender._bufferedBytes+=n:r._bufferedAmount+=n}if(t){let n=new Error(`WebSocket is not open: readyState ${r.readyState} (${pe[r.readyState]})`);t(n)}}function Cc(r,e){let t=this[P];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[P]!==void 0&&(t._socket.removeListener("data",Yt),process.nextTick(si,t._socket),r===1005?t.close():t.close(r,e))}function bc(){let r=this[P];r.isPaused||r._socket.resume()}function Tc(r){let e=this[P];e._socket[P]!==void 0&&(e._socket.removeListener("data",Yt),process.nextTick(si,e._socket),e.close(r[pc])),e.emit("error",r)}function Qs(){this[P].emitClose()}function Oc(r,e){this[P].emit("message",r,e)}function Uc(r){let e=this[P];e.pong(r,!e._isServer,ti),e.emit("ping",r)}function Ic(r){this[P].emit("pong",r)}function si(r){r.resume()}function ii(){let r=this[P];this.removeListener("close",ii),this.removeListener("data",Yt),this.removeListener("end",oi),r._readyState=S.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[P]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",Qs),r._receiver.on("finish",Qs))}function Yt(r){this[P]._receiver.write(r)||this.pause()}function oi(){let r=this[P];r._readyState=S.CLOSING,r._receiver.end(),this.end()}function ai(){let r=this[P];this.removeListener("error",ai),this.on("error",ti),r&&(r._readyState=S.CLOSING,this.destroy())}});var di=E((Lf,li)=>{"use strict";var{Duplex:Ac}=require("stream");function fi(r){r.emit("close")}function Dc(){!this.destroyed&&this._writableState.finished&&this.destroy()}function ui(r){this.removeListener("error",ui),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function Lc(r,e){let t=!0,n=new Ac(ge(V({},e),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return r.on("message",function(i,o){let u=!o&&n._readableState.objectMode?i.toString():i;n.push(u)||r.pause()}),r.once("error",function(i){n.destroyed||(t=!1,n.destroy(i))}),r.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(r.readyState===r.CLOSED){i(s),process.nextTick(fi,n);return}let o=!1;r.once("error",function(f){o=!0,i(f)}),r.once("close",function(){o||i(s),process.nextTick(fi,n)}),t&&r.terminate()},n._final=function(s){if(r.readyState===r.CONNECTING){r.once("open",function(){n._final(s)});return}r._socket!==null&&(r._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(r._socket.once("finish",function(){s()}),r.close()))},n._read=function(){r.isPaused&&r.resume()},n._write=function(s,i,o){if(r.readyState===r.CONNECTING){r.once("open",function(){n._write(s,i,o)});return}r.send(s,o)},n.on("end",Dc),n.on("error",ui),n}li.exports=Lc});var pi=E((Bf,hi)=>{"use strict";var{tokenChars:Bc}=dt();function Rc(r){let e=new Set,t=-1,n=-1,s=0;for(s;s<r.length;s++){let o=r.charCodeAt(s);if(n===-1&&Bc[o]===1)t===-1&&(t=s);else if(s!==0&&(o===32||o===9))n===-1&&t!==-1&&(n=s);else if(o===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let u=r.slice(t,n);if(e.has(u))throw new SyntaxError(`The "${u}" subprotocol is duplicated`);e.add(u),t=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(t===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=r.slice(t,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}hi.exports={parse:Rc}});var Ei=E((Pf,wi)=>{"use strict";var kc=require("events"),Jt=require("http"),Rf=require("https"),kf=require("net"),Mf=require("tls"),{createHash:Mc}=require("crypto"),mi=Gr(),De=lt(),Pc=pi(),Nc=Zr(),{GUID:Fc,kWebSocket:qc}=Ee(),Vc=/^[+/0-9A-Za-z]{22}==$/,_i=0,yi=1,vi=2,xi=class extends kc{constructor(e,t){super();if(e=V({maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Nc},e),e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Jt.createServer((n,s)=>{let i=Jt.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Wc(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,o)=>{this.handleUpgrade(s,i,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=_i}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===vi){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(_t,this);return}if(e&&this.once("close",e),this._state!==yi)if(this._state=yi,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(_t,this):process.nextTick(_t,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{_t(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,s){t.on("error",gi);let i=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Le(this,e,t,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Le(this,e,t,400,"Invalid Upgrade header");return}if(!i||!Vc.test(i)){Le(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){Le(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){yt(t,400);return}let u=e.headers["sec-websocket-protocol"],f=new Set;if(u!==void 0)try{f=Pc.parse(u)}catch{Le(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let a=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&a!==void 0){let c=new De(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let h=mi.parse(a);h[De.extensionName]&&(c.accept(h[De.extensionName]),d[De.extensionName]=c)}catch{Le(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let c={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(c,(h,m,g,_)=>{if(!h)return yt(t,m||401,g,_);this.completeUpgrade(d,i,f,e,t,n,s)});return}if(!this.options.verifyClient(c))return yt(t,401)}this.completeUpgrade(d,i,f,e,t,n,s)}completeUpgrade(e,t,n,s,i,o,u){if(!i.readable||!i.writable)return i.destroy();if(i[qc])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>_i)return yt(i,503);let f=Mc("sha1").update(t+Fc).digest("base64"),a=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${f}`],d=new this.options.WebSocket(null);if(n.size){let c=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;c&&(a.push(`Sec-WebSocket-Protocol: ${c}`),d._protocol=c)}if(e[De.extensionName]){let c=e[De.extensionName].params,h=mi.format({[De.extensionName]:[c]});a.push(`Sec-WebSocket-Extensions: ${h}`),d._extensions=e}this.emit("headers",a,s),i.write(a.concat(`\r
`).join(`\r
`)),i.removeListener("error",gi),d.setSocket(i,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(d),d.on("close",()=>{this.clients.delete(d),this._shouldEmitClose&&!this.clients.size&&process.nextTick(_t,this)})),u(d,s)}};wi.exports=xi;function Wc(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let n of Object.keys(e))r.removeListener(n,e[n])}}function _t(r){r._state=vi,r.emit("close")}function gi(){this.destroy()}function yt(r,e,t,n){t=t||Jt.STATUS_CODES[e],n=V({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t)},n),r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${Jt.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+t)}function Le(r,e,t,n,s){if(r.listenerCount("wsClientError")){let i=new Error(s);Error.captureStackTrace(i,Le),r.emit("wsClientError",i,t,e)}else yt(t,n,s)}});var Ci=E((Nf,Si)=>{"use strict";var me=Zr();me.createWebSocketStream=di();me.Server=Ei();me.Receiver=zr();me.Sender=Hr();me.WebSocket=me;me.WebSocketServer=me.Server;Si.exports=me});var Ti=E((Ff,bi)=>{"use strict";bi.exports=Ci()});var Qr=E((Zt,Oi)=>{(function(r,e){typeof Zt=="object"?Oi.exports=Zt=e():typeof define=="function"&&define.amd?define([],e):r.CryptoJS=e()})(Zt,function(){var r=r||function(e,t){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var s=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function l(){}return function(p){var x;return l.prototype=p,x=new l,l.prototype=null,x}}(),o={},u=o.lib={},f=u.Base=function(){return{extend:function(l){var p=i(this);return l&&p.mixIn(l),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var l=this.extend();return l.init.apply(l,arguments),l},init:function(){},mixIn:function(l){for(var p in l)l.hasOwnProperty(p)&&(this[p]=l[p]);l.hasOwnProperty("toString")&&(this.toString=l.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=u.WordArray=f.extend({init:function(l,p){l=this.words=l||[],p!=t?this.sigBytes=p:this.sigBytes=l.length*4},toString:function(l){return(l||c).stringify(this)},concat:function(l){var p=this.words,x=l.words,v=this.sigBytes,b=l.sigBytes;if(this.clamp(),v%4)for(var w=0;w<b;w++){var I=x[w>>>2]>>>24-w%4*8&255;p[v+w>>>2]|=I<<24-(v+w)%4*8}else for(var U=0;U<b;U+=4)p[v+U>>>2]=x[U>>>2];return this.sigBytes+=b,this},clamp:function(){var l=this.words,p=this.sigBytes;l[p>>>2]&=4294967295<<32-p%4*8,l.length=e.ceil(p/4)},clone:function(){var l=f.clone.call(this);return l.words=this.words.slice(0),l},random:function(l){for(var p=[],x=0;x<l;x+=4)p.push(s());return new a.init(p,l)}}),d=o.enc={},c=d.Hex={stringify:function(l){for(var p=l.words,x=l.sigBytes,v=[],b=0;b<x;b++){var w=p[b>>>2]>>>24-b%4*8&255;v.push((w>>>4).toString(16)),v.push((w&15).toString(16))}return v.join("")},parse:function(l){for(var p=l.length,x=[],v=0;v<p;v+=2)x[v>>>3]|=parseInt(l.substr(v,2),16)<<24-v%8*4;return new a.init(x,p/2)}},h=d.Latin1={stringify:function(l){for(var p=l.words,x=l.sigBytes,v=[],b=0;b<x;b++){var w=p[b>>>2]>>>24-b%4*8&255;v.push(String.fromCharCode(w))}return v.join("")},parse:function(l){for(var p=l.length,x=[],v=0;v<p;v++)x[v>>>2]|=(l.charCodeAt(v)&255)<<24-v%4*8;return new a.init(x,p)}},m=d.Utf8={stringify:function(l){try{return decodeURIComponent(escape(h.stringify(l)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(l){return h.parse(unescape(encodeURIComponent(l)))}},g=u.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(l){typeof l=="string"&&(l=m.parse(l)),this._data.concat(l),this._nDataBytes+=l.sigBytes},_process:function(l){var p,x=this._data,v=x.words,b=x.sigBytes,w=this.blockSize,I=w*4,U=b/I;l?U=e.ceil(U):U=e.max((U|0)-this._minBufferSize,0);var T=U*w,_e=e.min(T*4,b);if(T){for(var Q=0;Q<T;Q+=w)this._doProcessBlock(v,Q);p=v.splice(0,T),x.sigBytes-=_e}return new a.init(p,_e)},clone:function(){var l=f.clone.call(this);return l._data=this._data.clone(),l},_minBufferSize:0}),_=u.Hasher=g.extend({cfg:f.extend(),init:function(l){this.cfg=this.cfg.extend(l),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(l){return this._append(l),this._process(),this},finalize:function(l){l&&this._append(l);var p=this._doFinalize();return p},blockSize:512/32,_createHelper:function(l){return function(p,x){return new l.init(x).finalize(p)}},_createHmacHelper:function(l){return function(p,x){return new y.HMAC.init(l,x).finalize(p)}}}),y=o.algo={};return o}(Math);return r})});var Ii=E((Qt,Ui)=>{(function(r,e){typeof Qt=="object"?Ui.exports=Qt=e(Qr()):typeof define=="function"&&define.amd?define(["./core"],e):e(r.CryptoJS)})(Qt,function(r){return function(e){var t=r,n=t.lib,s=n.WordArray,i=n.Hasher,o=t.algo,u=[],f=[];(function(){function c(_){for(var y=e.sqrt(_),l=2;l<=y;l++)if(!(_%l))return!1;return!0}function h(_){return(_-(_|0))*4294967296|0}for(var m=2,g=0;g<64;)c(m)&&(g<8&&(u[g]=h(e.pow(m,1/2))),f[g]=h(e.pow(m,1/3)),g++),m++})();var a=[],d=o.SHA256=i.extend({_doReset:function(){this._hash=new s.init(u.slice(0))},_doProcessBlock:function(c,h){for(var m=this._hash.words,g=m[0],_=m[1],y=m[2],l=m[3],p=m[4],x=m[5],v=m[6],b=m[7],w=0;w<64;w++){if(w<16)a[w]=c[h+w]|0;else{var I=a[w-15],U=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,T=a[w-2],_e=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;a[w]=U+a[w-7]+_e+a[w-16]}var Q=p&x^~p&v,vt=g&_^g&y^_&y,nr=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),X=(p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25),je=b+X+Q+f[w]+a[w],Te=nr+vt;b=v,v=x,x=p,p=l+je|0,l=y,y=_,_=g,g=je+Te|0}m[0]=m[0]+g|0,m[1]=m[1]+_|0,m[2]=m[2]+y|0,m[3]=m[3]+l|0,m[4]=m[4]+p|0,m[5]=m[5]+x|0,m[6]=m[6]+v|0,m[7]=m[7]+b|0},_doFinalize:function(){var c=this._data,h=c.words,m=this._nDataBytes*8,g=c.sigBytes*8;return h[g>>>5]|=128<<24-g%32,h[(g+64>>>9<<4)+14]=e.floor(m/4294967296),h[(g+64>>>9<<4)+15]=m,c.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});t.SHA256=i._createHelper(d),t.HmacSHA256=i._createHmacHelper(d)}(Math),r.SHA256})});var Di=E((er,Ai)=>{(function(r,e){typeof er=="object"?Ai.exports=er=e(Qr()):typeof define=="function"&&define.amd?define(["./core"],e):e(r.CryptoJS)})(er,function(r){return function(){var e=r,t=e.lib,n=t.WordArray,s=e.enc,i=s.Base64={stringify:function(u){var f=u.words,a=u.sigBytes,d=this._map;u.clamp();for(var c=[],h=0;h<a;h+=3)for(var m=f[h>>>2]>>>24-h%4*8&255,g=f[h+1>>>2]>>>24-(h+1)%4*8&255,_=f[h+2>>>2]>>>24-(h+2)%4*8&255,y=m<<16|g<<8|_,l=0;l<4&&h+l*.75<a;l++)c.push(d.charAt(y>>>6*(3-l)&63));var p=d.charAt(64);if(p)for(;c.length%4;)c.push(p);return c.join("")},parse:function(u){var f=u.length,a=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var c=0;c<a.length;c++)d[a.charCodeAt(c)]=c}var h=a.charAt(64);if(h){var m=u.indexOf(h);m!==-1&&(f=m)}return o(u,f,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(u,f,a){for(var d=[],c=0,h=0;h<f;h++)if(h%4){var m=a[u.charCodeAt(h-1)]<<h%4*2,g=a[u.charCodeAt(h)]>>>6-h%4*2,_=m|g;d[c>>>2]|=_<<24-c%4*8,c++}return n.create(d,c)}}(),r.enc.Base64})});var jc={};Ji(jc,{default:()=>Vi});var Z=require("@raycast/api");var O=require("react");function gn(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{a(n.next(d))}catch(c){o(c)}}function f(d){try{a(n.throw(d))}catch(c){o(c)}}function a(d){d.done?i(d.value):s(d.value).then(u,f)}a((n=n.apply(r,e||[])).next())})}function vn(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(d){return f([a,d])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,s=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(r,t)}catch(d){a=[6,d],s=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var re=function(){},R=re(),Ze=Object,F=function(r){return r===R},ve=function(r){return typeof r=="function"},fe=function(r,e){return Ze.assign({},r,e)},_r="undefined",yr=function(){return typeof window!=_r},Qi=function(){return typeof document!=_r},eo=function(){return yr()&&typeof window.requestAnimationFrame!=_r},wt=new WeakMap,to=0,tt=function(r){var e=typeof r,t=r&&r.constructor,n=t==Date,s,i;if(Ze(r)===r&&!n&&t!=RegExp){if(s=wt.get(r),s)return s;if(s=++to+"~",wt.set(r,s),t==Array){for(s="@",i=0;i<r.length;i++)s+=tt(r[i])+",";wt.set(r,s)}if(t==Ze){s="#";for(var o=Ze.keys(r).sort();!F(i=o.pop());)F(r[i])||(s+=i+":"+tt(r[i])+",");wt.set(r,s)}}else s=n?r.toJSON():e=="symbol"?r.toString():e=="string"?JSON.stringify(r):""+r;return s},lr=!0,ro=function(){return lr},xn=yr(),gr=Qi(),dr=xn&&window.addEventListener?window.addEventListener.bind(window):re,no=gr?document.addEventListener.bind(document):re,hr=xn&&window.removeEventListener?window.removeEventListener.bind(window):re,so=gr?document.removeEventListener.bind(document):re,io=function(){var r=gr&&document.visibilityState;return F(r)||r!=="hidden"},oo=function(r){return no("visibilitychange",r),dr("focus",r),function(){so("visibilitychange",r),hr("focus",r)}},ao=function(r){var e=function(){lr=!0,r()},t=function(){lr=!1};return dr("online",e),dr("offline",t),function(){hr("online",e),hr("offline",t)}},co={isOnline:ro,isVisible:io},fo={initFocus:oo,initReconnect:ao},Et=!yr()||"Deno"in window,uo=function(r){return eo()?window.requestAnimationFrame(r):setTimeout(r,1)},Qe=Et?O.useEffect:O.useLayoutEffect,fr=typeof navigator<"u"&&navigator.connection,mn=!Et&&fr&&(["slow-2g","2g"].includes(fr.effectiveType)||fr.saveData),wn=function(r){if(ve(r))try{r=r()}catch{r=""}var e=[].concat(r);r=typeof r=="string"?r:(Array.isArray(r)?r.length:r)?tt(r):"";var t=r?"$swr$"+r:"";return[r,e,t]},Ue=new WeakMap,En=0,Sn=1,Cn=2,et=function(r,e,t,n,s,i,o){o===void 0&&(o=!0);var u=Ue.get(r),f=u[0],a=u[1],d=u[3],c=f[e],h=a[e];if(o&&h)for(var m=0;m<h.length;++m)h[m](t,n,s);return i&&(delete d[e],c&&c[0])?c[0](Cn).then(function(){return r.get(e)}):r.get(e)},lo=0,pr=function(){return++lo},bn=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return gn(void 0,void 0,void 0,function(){var t,n,s,i,o,u,f,a,d,c,h,m,g,_,y,l,p,x,v,b,w;return vn(this,function(I){switch(I.label){case 0:if(t=r[0],n=r[1],s=r[2],i=r[3],o=typeof i=="boolean"?{revalidate:i}:i||{},u=F(o.populateCache)?!0:o.populateCache,f=o.revalidate!==!1,a=o.rollbackOnError!==!1,d=o.optimisticData,c=wn(n),h=c[0],m=c[2],!h)return[2];if(g=Ue.get(t),_=g[2],r.length<3)return[2,et(t,h,t.get(h),R,R,f,!0)];if(y=s,p=pr(),_[h]=[p,0],x=!F(d),v=t.get(h),x&&(b=ve(d)?d(v):d,t.set(h,b),et(t,h,b)),ve(y))try{y=y(t.get(h))}catch(U){l=U}return y&&ve(y.then)?[4,y.catch(function(U){l=U})]:[3,2];case 1:if(y=I.sent(),p!==_[h][0]){if(l)throw l;return[2,y]}else l&&x&&a&&(u=!0,y=v,t.set(h,v));I.label=2;case 2:return u&&(l||(ve(u)&&(y=u(y,v)),t.set(h,y)),t.set(m,fe(t.get(m),{error:l}))),_[h][1]=pr(),[4,et(t,h,y,l,R,f,!!u)];case 3:if(w=I.sent(),l)throw l;return[2,u?w:y]}})})},_n=function(r,e){for(var t in r)r[t][0]&&r[t][0](e)},Tn=function(r,e){if(!Ue.has(r)){var t=fe(fo,e),n={},s=bn.bind(R,r),i=re;if(Ue.set(r,[n,{},{},{},s]),!Et){var o=t.initFocus(setTimeout.bind(R,_n.bind(R,n,En))),u=t.initReconnect(setTimeout.bind(R,_n.bind(R,n,Sn)));i=function(){o&&o(),u&&u(),Ue.delete(r)}}return[r,s,i]}return[r,Ue.get(r)[4]]},ho=function(r,e,t,n,s){var i=t.errorRetryCount,o=s.retryCount,u=~~((Math.random()+.5)*(1<<(o<8?o:8)))*t.errorRetryInterval;!F(i)&&o>i||setTimeout(n,u,s)},On=Tn(new Map),Un=On[0],po=On[1],In=fe({onLoadingSlow:re,onSuccess:re,onError:re,onErrorRetry:ho,onDiscarded:re,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:mn?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:mn?5e3:3e3,compare:function(r,e){return tt(r)==tt(e)},isPaused:function(){return!1},cache:Un,mutate:po,fallback:{}},co),An=function(r,e){var t=fe(r,e);if(e){var n=r.use,s=r.fallback,i=e.use,o=e.fallback;n&&i&&(t.use=n.concat(i)),s&&o&&(t.fallback=fe(s,o))}return t},mr=(0,O.createContext)({}),mo=function(r){var e=r.value,t=An((0,O.useContext)(mr),e),n=e&&e.provider,s=(0,O.useState)(function(){return n?Tn(n(t.cache||Un),e):R})[0];return s&&(t.cache=s[0],t.mutate=s[1]),Qe(function(){return s?s[2]:R},[]),(0,O.createElement)(mr.Provider,fe(r,{value:t}))},_o=function(r,e){var t=(0,O.useState)({})[1],n=(0,O.useRef)(r),s=(0,O.useRef)({data:!1,error:!1,isValidating:!1}),i=(0,O.useCallback)(function(o){var u=!1,f=n.current;for(var a in o){var d=a;f[d]!==o[d]&&(f[d]=o[d],s.current[d]&&(u=!0))}u&&!e.current&&t({})},[]);return Qe(function(){n.current=r}),[n,s.current,i]},yo=function(r){return ve(r[1])?[r[0],r[1],r[2]||{}]:[r[0],null,(r[1]===null?r[2]:r[1])||{}]},go=function(){return fe(In,(0,O.useContext)(mr))},vo=function(r){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=go(),i=yo(t),o=i[0],u=i[1],f=i[2],a=An(s,f),d=r,c=a.use;if(c)for(var h=c.length;h-- >0;)d=c[h](d);return d(o,u||a.fetcher,a)}},yn=function(r,e,t){var n=e[r]||(e[r]=[]);return n.push(t),function(){var s=n.indexOf(t);s>=0&&(n[s]=n[n.length-1],n.pop())}},ur={dedupe:!0},xo=function(r,e,t){var n=t.cache,s=t.compare,i=t.fallbackData,o=t.suspense,u=t.revalidateOnMount,f=t.refreshInterval,a=t.refreshWhenHidden,d=t.refreshWhenOffline,c=Ue.get(n),h=c[0],m=c[1],g=c[2],_=c[3],y=wn(r),l=y[0],p=y[1],x=y[2],v=(0,O.useRef)(!1),b=(0,O.useRef)(!1),w=(0,O.useRef)(l),I=(0,O.useRef)(e),U=(0,O.useRef)(t),T=function(){return U.current},_e=function(){return T().isVisible()&&T().isOnline()},Q=function(K){return n.set(x,fe(n.get(x),K))},vt=n.get(l),nr=F(i)?t.fallback[l]:i,X=F(vt)?nr:vt,je=n.get(x)||{},Te=je.error,an=!v.current,cn=function(){return an&&!F(u)?u:T().isPaused()?!1:o?F(X)?!1:t.revalidateIfStale:F(X)||t.revalidateIfStale},Wi=function(){return!l||!e?!1:je.isValidating?!0:an&&cn()},sr=Wi(),ir=_o({data:X,error:Te,isValidating:sr},b),Be=ir[0],or=ir[1],xt=ir[2],Oe=(0,O.useCallback)(function(K){return gn(void 0,void 0,void 0,function(){var z,H,Y,Ge,Xe,ee,N,ye,te,ar,Ke,Re,cr;return vn(this,function(Ye){switch(Ye.label){case 0:if(z=I.current,!l||!z||b.current||T().isPaused())return[2,!1];Ge=!0,Xe=K||{},ee=!_[l]||!Xe.dedupe,N=function(){return!b.current&&l===w.current&&v.current},ye=function(){var fn=_[l];fn&&fn[1]===Y&&delete _[l]},te={isValidating:!1},ar=function(){Q({isValidating:!1}),N()&&xt(te)},Q({isValidating:!0}),xt({isValidating:!0}),Ye.label=1;case 1:return Ye.trys.push([1,3,,4]),ee&&(et(n,l,Be.current.data,Be.current.error,!0),t.loadingTimeout&&!n.get(l)&&setTimeout(function(){Ge&&N()&&T().onLoadingSlow(l,t)},t.loadingTimeout),_[l]=[z.apply(void 0,p),pr()]),cr=_[l],H=cr[0],Y=cr[1],[4,H];case 2:return H=Ye.sent(),ee&&setTimeout(ye,t.dedupingInterval),!_[l]||_[l][1]!==Y?(ee&&N()&&T().onDiscarded(l),[2,!1]):(Q({error:R}),te.error=R,Ke=g[l],!F(Ke)&&(Y<=Ke[0]||Y<=Ke[1]||Ke[1]===0)?(ar(),ee&&N()&&T().onDiscarded(l),[2,!1]):(s(Be.current.data,H)?te.data=Be.current.data:te.data=H,s(n.get(l),H)||n.set(l,H),ee&&N()&&T().onSuccess(H,l,t),[3,4]));case 3:return Re=Ye.sent(),ye(),T().isPaused()||(Q({error:Re}),te.error=Re,ee&&N()&&(T().onError(Re,l,t),(typeof t.shouldRetryOnError=="boolean"&&t.shouldRetryOnError||ve(t.shouldRetryOnError)&&t.shouldRetryOnError(Re))&&_e()&&T().onErrorRetry(Re,l,t,Oe,{retryCount:(Xe.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Ge=!1,ar(),N()&&ee&&et(n,l,te.data,te.error,!1),[2,!0]}})})},[l]),$i=(0,O.useCallback)(bn.bind(R,n,function(){return w.current}),[]);if(Qe(function(){I.current=e,U.current=t}),Qe(function(){if(!!l){var K=l!==w.current,z=Oe.bind(R,ur),H=function(N,ye,te){xt(fe({error:ye,isValidating:te},s(Be.current.data,N)?R:{data:N}))},Y=0,Ge=function(N){if(N==En){var ye=Date.now();T().revalidateOnFocus&&ye>Y&&_e()&&(Y=ye+T().focusThrottleInterval,z())}else if(N==Sn)T().revalidateOnReconnect&&_e()&&z();else if(N==Cn)return Oe()},Xe=yn(l,m,H),ee=yn(l,h,Ge);return b.current=!1,w.current=l,v.current=!0,K&&xt({data:X,error:Te,isValidating:sr}),cn()&&(F(X)||Et?z():uo(z)),function(){b.current=!0,Xe(),ee()}}},[l,Oe]),Qe(function(){var K;function z(){var Y=ve(f)?f(X):f;Y&&K!==-1&&(K=setTimeout(H,Y))}function H(){!Be.current.error&&(a||T().isVisible())&&(d||T().isOnline())?Oe(ur).then(z):z()}return z(),function(){K&&(clearTimeout(K),K=-1)}},[f,a,d,Oe]),(0,O.useDebugValue)(X),o&&F(X)&&l)throw I.current=e,U.current=t,b.current=!1,F(Te)?Oe(ur):Te;return{mutate:$i,get data(){return or.data=!0,X},get error(){return or.error=!0,Te},get isValidating(){return or.isValidating=!0,sr}}},Xc=Ze.defineProperty(mo,"default",{value:In});var vr=vo(xo);var rr=ke(rs(),1),Ri=ke(ps(),1),en=ke(_s(),1),tn=ke(Ti(),1),rn=ke(Ii(),1),nn=ke(Di(),1);function tr(){return tr=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tr.apply(this,arguments)}function $c(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}var ae;(function(r){r[r.Hello=0]="Hello",r[r.Identify=1]="Identify",r[r.Identified=2]="Identified",r[r.Reidentify=3]="Reidentify",r[r.Event=5]="Event",r[r.Request=6]="Request",r[r.RequestResponse=7]="RequestResponse",r[r.RequestBatch=8]="RequestBatch",r[r.RequestBatchResponse=9]="RequestBatchResponse"})(ae||(ae={}));var Li;(function(r){r[r.None=0]="None",r[r.General=1]="General",r[r.Config=2]="Config",r[r.Scenes=4]="Scenes",r[r.Inputs=8]="Inputs",r[r.Transitions=16]="Transitions",r[r.Filters=32]="Filters",r[r.Outputs=64]="Outputs",r[r.SceneItems=128]="SceneItems",r[r.MediaInputs=256]="MediaInputs",r[r.Vendors=512]="Vendors",r[r.Ui=1024]="Ui",r[r.All=1023]="All",r[r.InputVolumeMeters=65536]="InputVolumeMeters",r[r.InputActiveStateChanged=131072]="InputActiveStateChanged",r[r.InputShowStateChanged=262144]="InputShowStateChanged",r[r.SceneItemTransformChanged=524288]="SceneItemTransformChanged"})(Li||(Li={}));var Bi;(function(r){r[r.None=-1]="None",r[r.SerialRealtime=0]="SerialRealtime",r[r.SerialFrame=1]="SerialFrame",r[r.Parallel=2]="Parallel"})(Bi||(Bi={}));function zc(r,e,t){let n=nn.default.stringify((0,rn.default)(t+r));return nn.default.stringify((0,rn.default)(n+e))}var Hc=["authentication","rpcVersion"],gt=(0,Ri.default)("obs-websocket-js"),ze=class extends Error{constructor(e,t){super(t);this.code=void 0,this.code=e}},He=class extends en.default{constructor(...e){super(...e);this._identified=!1,this.internalListeners=new en.default,this.socket=void 0}static generateMessageId(){return String(He.requestCounter++)}get identified(){return this._identified}async connect(e="ws://127.0.0.1:4444",t,n={}){var s=this;this.socket&&await this.disconnect();try{let i=this.internalEventPromise("ConnectionClosed"),o=this.internalEventPromise("ConnectionError");return await Promise.race([async function(){let u=await s.createConnection(e);return s.emit("Hello",u),s.identify(u,t,n)}(),new Promise((u,f)=>{o.then(a=>{a.message&&f(a)}),i.then(a=>{f(a)})})])}catch(i){throw await this.disconnect(),i}}async disconnect(){if(!this.socket||this.socket.readyState===tn.default.CLOSED)return;let e=this.internalEventPromise("ConnectionClosed");this.socket.close(),await e}async reidentify(e){let t=this.internalEventPromise(`op:${ae.Identified}`);return await this.message(ae.Reidentify,e),t}async call(e,t){let n=He.generateMessageId(),s=this.internalEventPromise(`res:${n}`);await this.message(ae.Request,{requestId:n,requestType:e,requestData:t});let{requestStatus:i,responseData:o}=await s;if(!i.result)throw new ze(i.code,i.comment);return o}cleanup(){!this.socket||(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket=void 0,this._identified=!1,this.internalListeners.removeAllListeners())}async createConnection(e){var t;let n=this.internalEventPromise("ConnectionOpened"),s=this.internalEventPromise(`op:${ae.Hello}`);this.socket=new tn.default(e,this.protocol),this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),await n;let i=(t=this.socket)==null?void 0:t.protocol;if(!i)throw new ze(-1,"Server sent no subprotocol");if(i!==this.protocol)throw new ze(-1,"Server sent an invalid subprotocol");return s}async identify(e,t,n={}){let{authentication:s,rpcVersion:i}=e,o=$c(e,Hc),u=tr({rpcVersion:i},n);s&&t&&(u.authentication=zc(s.salt,s.challenge,t));let f=this.internalEventPromise(`op:${ae.Identified}`);await this.message(ae.Identify,u);let a=await f;return this._identified=!0,this.emit("Identified",a),tr({rpcVersion:i},o,a)}async message(e,t){if(!this.socket)throw new Error("Not connected");if(!this.identified&&e!==1)throw new Error("Socket not identified");let n=await this.encodeMessage({op:e,d:t});this.socket.send(n)}async internalEventPromise(e){return new Promise(t=>{this.internalListeners.once(e,t)})}onOpen(e){gt("socket.open"),this.emit("ConnectionOpened"),this.internalListeners.emit("ConnectionOpened",e)}async onMessage(e){try{let{op:t,d:n}=await this.decodeMessage(e.data);if(gt("socket.message: %d %j",t,n),t===void 0||n===void 0)return;switch(t){case ae.Event:{let{eventType:s,eventData:i}=n;this.emit(s,i);return}case ae.RequestResponse:{let{requestId:s}=n;this.internalListeners.emit(`res:${s}`,n);return}default:this.internalListeners.emit(`op:${t}`,n)}}catch(t){gt("error handling message: %o",t)}}onError(e){gt("socket.error: %o",e);let t=new ze(-1,e.message);this.emit("ConnectionError",t),this.internalListeners.emit("ConnectionError",t)}onClose(e){gt("socket.close: %s (%d)",e.reason,e.code);let t=new ze(e.code,e.reason);this.emit("ConnectionClosed",t),this.internalListeners.emit("ConnectionClosed",t),this.cleanup()}};He.requestCounter=1;typeof exports<"u"&&Object.defineProperty(exports,"__esModule",{value:!0});var sn=class extends He{constructor(...e){super(...e);this.protocol="obswebsocket.msgpack"}async encodeMessage(e){return(0,rr.encode)(e)}async decodeMessage(e){return typeof Blob<"u"&&e instanceof Blob&&(e=await e.arrayBuffer()),(0,rr.decode)(e)}};var Mi=require("@raycast/api"),ki=(0,Mi.getPreferenceValues)();async function Pi(){let r=new sn;return await r.connect(ki["obs-url"],ki["obs-password"]),r}var ce=require("@raycast/api"),Ni=async()=>{await(0,ce.confirmAlert)({title:"OBS Studio is Not Installed",message:"OBS Studio not installed on your Mac. Please install and setup the websocket plugin to continue.",primaryAction:{title:"Get OBS Studio",onAction:()=>{(0,ce.open)("https://obsproject.com/")}}})},Fi=async()=>(0,ce.showToast)({title:"Websocket Connection Error",message:"Websocket connection error. Please check your connection and try again.",style:ce.Toast.Style.Failure});async function qi(){return!!(await(0,ce.getApplications)()).find(e=>e.bundleId==="com.obsproject.obs-studio")}var on;function Vi(){let{data:r}=vr("appInstalled",async()=>{let s=await qi();return s||await Ni(),s}),{data:e,mutate:t,error:n}=vr(()=>r?"/api/scenes":null,async()=>(on=await Pi(),await on.call("GetSceneList")));return n&&Fi(),_jsx(Z.List,null,e?.scenes.map(s=>{let i=e?.currentProgramSceneName===s.sceneName;return _jsx(Z.List.Item,{title:s.sceneName,key:s.sceneIndex,accessories:[{icon:i?{source:Z.Icon.Checkmark,tintColor:Z.Color.Green}:null,tooltip:i?"Current Program Scene":null}],actions:_jsx(Z.ActionPanel,null,_jsx(Z.Action,{title:"Switch to Scene",onAction:async()=>{await on.call("SetCurrentProgramScene",{sceneName:s.sceneName}),t()}}))})}))}module.exports=Zi(jc);0&&(module.exports={});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
