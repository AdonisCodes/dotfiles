{
  "version": 3,
  "sources": ["../node_modules/untildify/index.js", "../src/clear-derived-data.command.tsx", "../src/shared/operation-with-user-feedback.ts", "../src/shared/exec-async.ts", "../src/shared/run-apple-script.ts", "../src/shared/fs-async.ts", "../src/services/xcode-cleanup.service.ts"],
  "sourcesContent": ["'use strict';\nconst os = require('os');\n\nconst homeDirectory = os.homedir();\n\nmodule.exports = pathWithTilde => {\n\tif (typeof pathWithTilde !== 'string') {\n\t\tthrow new TypeError(`Expected a string, got ${typeof pathWithTilde}`);\n\t}\n\n\treturn homeDirectory ? pathWithTilde.replace(/^~(?=$|\\/|\\\\)/, homeDirectory) : pathWithTilde;\n};\n", "import { operationWithUserFeedback } from \"./shared/operation-with-user-feedback\";\nimport { XcodeCleanupService } from \"./services/xcode-cleanup.service\";\nimport { Alert, confirmAlert, Icon } from \"@raycast/api\";\n\nexport default async () => {\n  const alertOptions: Alert.Options = {\n    icon: Icon.Trash,\n    title: \"Clear derived data\",\n    message: \"Are you sure you want to clear the derived data directory?\",\n    primaryAction: {\n      title: \"Clear\",\n      style: Alert.ActionStyle.Destructive,\n    },\n  };\n  if (!(await confirmAlert(alertOptions))) {\n    return;\n  }\n  await operationWithUserFeedback(\n    \"Clearing derived data\",\n    \"Successfully cleared derived data\",\n    \"An error occurred while trying to clear the derived data directory\",\n    XcodeCleanupService.clearDerivedData\n  );\n};\n", "import { showToast, Toast } from \"@raycast/api\";\n\n/**\n * OperationWithUserFeedback Result\n */\nexport interface OperationWithUserFeedbackResult<T> {\n  /**\n   * Bool value if operation succeeded or failed\n   */\n  isSuccess: boolean;\n  /**\n   * The optional generic Result\n   */\n  result?: T;\n  /**\n   * The Toast\n   */\n  toast: Toast;\n}\n\n/**\n * Perform an operation with user feedback while loading, on success and on failure\n * @param loadingTitle The loading title while the operation is running\n * @param successTitle The success title when the operation succeeded\n * @param failureTitle The failure title when the operation failed\n * @param operation The operation to perform\n */\nexport async function operationWithUserFeedback<T>(\n  loadingTitle: string,\n  successTitle: string,\n  failureTitle: string,\n  operation: () => Promise<T>\n): Promise<OperationWithUserFeedbackResult<T>> {\n  // Show Toast\n  const toast = await showToast({\n    style: Toast.Style.Animated,\n    title: loadingTitle,\n  });\n  try {\n    // Perform operation\n    const result = await operation();\n    // Show success Toast\n    toast.style = Toast.Style.Success;\n    toast.title = successTitle;\n    return {\n      isSuccess: true,\n      result: result,\n      toast: toast,\n    };\n  } catch (error) {\n    // Log error\n    console.error(error);\n    // Show failure Toast\n    toast.style = Toast.Style.Failure;\n    toast.title = failureTitle;\n    toast.message = `${error}`;\n    return {\n      isSuccess: false,\n      toast: toast,\n    };\n  }\n}\n", "import { exec } from \"child_process\";\nimport { promisify } from \"util\";\n\n/**\n * Spawns a shell then executes the command within that shell, buffering any generated output.\n */\nexport const execAsync = promisify(exec);\n", "import { execAsync } from \"./exec-async\";\n\n/**\n * Run AppleScript\n * @param appleScript The AppleScript either an inline string or an array of lines\n */\nexport function runAppleScript(appleScript: string | string[]): Promise<string> {\n  // Declare parameters\n  let parameters: string;\n  // Check if AppleScript is an array\n  if (Array.isArray(appleScript)) {\n    // Map each line with a separate \"-e\" flag\n    parameters = appleScript.map((line) => `-e '${line}'`).join(\" \");\n  } else {\n    // Use inline AppleScript\n    parameters = `-e '${appleScript}'`;\n  }\n  // Execute osascript with parameters\n  return execAsync(`osascript ${parameters}`).then((output) => output.stdout);\n}\n", "import fs from \"fs\";\nimport { PathLike } from \"node:fs\";\n\n/**\n * Exists\n */\nexport const existsAsync = (path: PathLike) => {\n  return fs.promises\n    .access(path, fs.constants.F_OK)\n    .then(() => true)\n    .catch(() => false);\n};\n\n/**\n * Read directory\n */\nexport const readDirectoryAsync = fs.promises.readdir;\n\n/**\n * Make directory\n */\nexport const makeDirectoryAsync = fs.promises.mkdir;\n\n/**\n * Remove directory\n */\nexport const removeDirectoryAsync = fs.promises.rm;\n\n/**\n * Read file\n */\nexport const readFileAsync = fs.promises.readFile;\n\n/**\n * Write file\n */\nexport const writeFileAsync = fs.promises.writeFile;\n\n/**\n * Delete file\n */\nexport const deleteFileAsync = fs.promises.rm;\n", "import { execAsync } from \"../shared/exec-async\";\nimport { runAppleScript } from \"../shared/run-apple-script\";\nimport { readDirectoryAsync } from \"../shared/fs-async\";\nimport Path from \"path\";\nimport untildify from \"untildify\";\n\n/**\n * XcodeCleanupService\n */\nexport class XcodeCleanupService {\n  /**\n   * Clear the Xcode Derived Data directory\n   */\n  static clearDerivedData(): Promise<void> {\n    return runAppleScript([\n      'set dd to (path to home folder as string) & \"Library:Developer:Xcode:DerivedData\"',\n      'tell application \"Finder\"',\n      \"if dd exists then\",\n      \"move dd to trash\",\n      \"end if\",\n      \"end tell\",\n    ]).then();\n  }\n\n  /**\n   * Remove Derived Data directory for a given app\n   * @param appName The name of the app\n   */\n  static removeDerivedData(appName: string): Promise<void> {\n    const derivedDataPath = untildify(\"~/Library/Developer/Xcode/DerivedData\");\n    return readDirectoryAsync(derivedDataPath).then((directories) => {\n      const directory = directories.find((directory) => directory.split(\"-\").slice(0, -1).join(\"-\") === appName);\n      if (!directory) {\n        return Promise.resolve();\n      }\n      return runAppleScript(\n        `tell application \"Finder\" to delete POSIX file \"${Path.join(derivedDataPath, directory)}\"`\n      ).then();\n    });\n  }\n\n  /**\n   * Clear Swift Package Manager Cache\n   */\n  static clearSwiftPackageManagerCache(): Promise<void> {\n    return execAsync(\"rm -rf ~/Library/org.swift.swiftpm && rm -rf ~/Library/Caches/org.swift.swiftpm\").then();\n  }\n\n  /**\n   * Clear SwiftUI Previews Cache\n   */\n  static clearSwiftUIPreviewsCache(): Promise<void> {\n    return execAsync(\"rm -rf ~/Library/Developer/Xcode/UserData/Previews\").then();\n  }\n\n  /**\n   * Delete unsupported Simulators\n   */\n  static deleteUnsupportedSimulators(): Promise<void> {\n    return execAsync(\"xcrun simctl delete unavailable\").then();\n  }\n}\n"],
  "mappings": "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",
  "names": ["require_untildify", "__commonJSMin", "exports", "module", "os", "homeDirectory", "pathWithTilde", "clear_derived_data_command_exports", "__export", "clear_derived_data_command_default", "__toCommonJS", "import_api", "operationWithUserFeedback", "loadingTitle", "successTitle", "failureTitle", "operation", "toast", "result", "error", "import_child_process", "import_util", "execAsync", "runAppleScript", "appleScript", "parameters", "line", "execAsync", "output", "import_fs", "readDirectoryAsync", "fs", "makeDirectoryAsync", "removeDirectoryAsync", "readFileAsync", "writeFileAsync", "deleteFileAsync", "import_path", "import_untildify", "XcodeCleanupService", "runAppleScript", "appName", "derivedDataPath", "untildify", "readDirectoryAsync", "directories", "directory", "Path", "execAsync", "import_api", "clear_derived_data_command_default", "alertOptions", "operationWithUserFeedback", "XcodeCleanupService"]
}
